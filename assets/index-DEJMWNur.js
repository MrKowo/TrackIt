(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var Vm={exports:{}},Sc={};var kv;function W2(){if(kv)return Sc;kv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return Sc.Fragment=t,Sc.jsx=e,Sc.jsxs=e,Sc}var Nv;function Z2(){return Nv||(Nv=1,Vm.exports=W2()),Vm.exports}var E=Z2(),Pm={exports:{}},zt={};var Dv;function J2(){if(Dv)return zt;Dv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),x=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=x&&z[x]||z["@@iterator"],typeof z=="function"?z:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function U(z,X,ut){this.props=z,this.context=X,this.refs=D,this.updater=ut||k}U.prototype.isReactComponent={},U.prototype.setState=function(z,X){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,X,"setState")},U.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function W(){}W.prototype=U.prototype;function J(z,X,ut){this.props=z,this.context=X,this.refs=D,this.updater=ut||k}var at=J.prototype=new W;at.constructor=J,R(at,U.prototype),at.isPureReactComponent=!0;var st=Array.isArray;function ot(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(z,X,ut){var ht=ut.ref;return{$$typeof:n,type:z,key:X,ref:ht!==void 0?ht:null,props:ut}}function V(z,X){return N(z.type,X,z.props)}function M(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function L(z){var X={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ut){return X[ut]})}var O=/\/+/g;function kt(z,X){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):X.toString(36)}function Nt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ot,ot):(z.status="pending",z.then(function(X){z.status==="pending"&&(z.status="fulfilled",z.value=X)},function(X){z.status==="pending"&&(z.status="rejected",z.reason=X)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function q(z,X,ut,ht,Tt){var Y=typeof z;(Y==="undefined"||Y==="boolean")&&(z=null);var bt=!1;if(z===null)bt=!0;else switch(Y){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(z.$$typeof){case n:case t:bt=!0;break;case y:return bt=z._init,q(bt(z._payload),X,ut,ht,Tt)}}if(bt)return Tt=Tt(z),bt=ht===""?"."+kt(z,0):ht,st(Tt)?(ut="",bt!=null&&(ut=bt.replace(O,"$&/")+"/"),q(Tt,X,ut,"",function(xt){return xt})):Tt!=null&&(M(Tt)&&(Tt=V(Tt,ut+(Tt.key==null||z&&z.key===Tt.key?"":(""+Tt.key).replace(O,"$&/")+"/")+bt)),X.push(Tt)),1;bt=0;var Ft=ht===""?".":ht+":";if(st(z))for(var Ut=0;Ut<z.length;Ut++)ht=z[Ut],Y=Ft+kt(ht,Ut),bt+=q(ht,X,ut,Y,Tt);else if(Ut=w(z),typeof Ut=="function")for(z=Ut.call(z),Ut=0;!(ht=z.next()).done;)ht=ht.value,Y=Ft+kt(ht,Ut++),bt+=q(ht,X,ut,Y,Tt);else if(Y==="object"){if(typeof z.then=="function")return q(Nt(z),X,ut,ht,Tt);throw X=String(z),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return bt}function tt(z,X,ut){if(z==null)return z;var ht=[],Tt=0;return q(z,ht,"","",function(Y){return X.call(ut,Y,Tt++)}),ht}function pt(z){if(z._status===-1){var X=z._result;X=X(),X.then(function(ut){(z._status===0||z._status===-1)&&(z._status=1,z._result=ut)},function(ut){(z._status===0||z._status===-1)&&(z._status=2,z._result=ut)}),z._status===-1&&(z._status=0,z._result=X)}if(z._status===1)return z._result.default;throw z._result}var Dt=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},At={map:tt,forEach:function(z,X,ut){tt(z,function(){X.apply(this,arguments)},ut)},count:function(z){var X=0;return tt(z,function(){X++}),X},toArray:function(z){return tt(z,function(X){return X})||[]},only:function(z){if(!M(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return zt.Activity=_,zt.Children=At,zt.Component=U,zt.Fragment=e,zt.Profiler=r,zt.PureComponent=J,zt.StrictMode=i,zt.Suspense=f,zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,zt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return I.H.useMemoCache(z)}},zt.cache=function(z){return function(){return z.apply(null,arguments)}},zt.cacheSignal=function(){return null},zt.cloneElement=function(z,X,ut){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ht=R({},z.props),Tt=z.key;if(X!=null)for(Y in X.key!==void 0&&(Tt=""+X.key),X)!A.call(X,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&X.ref===void 0||(ht[Y]=X[Y]);var Y=arguments.length-2;if(Y===1)ht.children=ut;else if(1<Y){for(var bt=Array(Y),Ft=0;Ft<Y;Ft++)bt[Ft]=arguments[Ft+2];ht.children=bt}return N(z.type,Tt,ht)},zt.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},zt.createElement=function(z,X,ut){var ht,Tt={},Y=null;if(X!=null)for(ht in X.key!==void 0&&(Y=""+X.key),X)A.call(X,ht)&&ht!=="key"&&ht!=="__self"&&ht!=="__source"&&(Tt[ht]=X[ht]);var bt=arguments.length-2;if(bt===1)Tt.children=ut;else if(1<bt){for(var Ft=Array(bt),Ut=0;Ut<bt;Ut++)Ft[Ut]=arguments[Ut+2];Tt.children=Ft}if(z&&z.defaultProps)for(ht in bt=z.defaultProps,bt)Tt[ht]===void 0&&(Tt[ht]=bt[ht]);return N(z,Y,Tt)},zt.createRef=function(){return{current:null}},zt.forwardRef=function(z){return{$$typeof:h,render:z}},zt.isValidElement=M,zt.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:pt}},zt.memo=function(z,X){return{$$typeof:g,type:z,compare:X===void 0?null:X}},zt.startTransition=function(z){var X=I.T,ut={};I.T=ut;try{var ht=z(),Tt=I.S;Tt!==null&&Tt(ut,ht),typeof ht=="object"&&ht!==null&&typeof ht.then=="function"&&ht.then(ot,Dt)}catch(Y){Dt(Y)}finally{X!==null&&ut.types!==null&&(X.types=ut.types),I.T=X}},zt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},zt.use=function(z){return I.H.use(z)},zt.useActionState=function(z,X,ut){return I.H.useActionState(z,X,ut)},zt.useCallback=function(z,X){return I.H.useCallback(z,X)},zt.useContext=function(z){return I.H.useContext(z)},zt.useDebugValue=function(){},zt.useDeferredValue=function(z,X){return I.H.useDeferredValue(z,X)},zt.useEffect=function(z,X){return I.H.useEffect(z,X)},zt.useEffectEvent=function(z){return I.H.useEffectEvent(z)},zt.useId=function(){return I.H.useId()},zt.useImperativeHandle=function(z,X,ut){return I.H.useImperativeHandle(z,X,ut)},zt.useInsertionEffect=function(z,X){return I.H.useInsertionEffect(z,X)},zt.useLayoutEffect=function(z,X){return I.H.useLayoutEffect(z,X)},zt.useMemo=function(z,X){return I.H.useMemo(z,X)},zt.useOptimistic=function(z,X){return I.H.useOptimistic(z,X)},zt.useReducer=function(z,X,ut){return I.H.useReducer(z,X,ut)},zt.useRef=function(z){return I.H.useRef(z)},zt.useState=function(z){return I.H.useState(z)},zt.useSyncExternalStore=function(z,X,ut){return I.H.useSyncExternalStore(z,X,ut)},zt.useTransition=function(){return I.H.useTransition()},zt.version="19.2.1",zt}var Mv;function Zp(){return Mv||(Mv=1,Pm.exports=J2()),Pm.exports}var lt=Zp(),Lm={exports:{}},Ac={},jm={exports:{}},Um={};var Ov;function tC(){return Ov||(Ov=1,(function(n){function t(q,tt){var pt=q.length;q.push(tt);t:for(;0<pt;){var Dt=pt-1>>>1,At=q[Dt];if(0<r(At,tt))q[Dt]=tt,q[pt]=At,pt=Dt;else break t}}function e(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var tt=q[0],pt=q.pop();if(pt!==tt){q[0]=pt;t:for(var Dt=0,At=q.length,z=At>>>1;Dt<z;){var X=2*(Dt+1)-1,ut=q[X],ht=X+1,Tt=q[ht];if(0>r(ut,pt))ht<At&&0>r(Tt,ut)?(q[Dt]=Tt,q[ht]=pt,Dt=ht):(q[Dt]=ut,q[X]=pt,Dt=X);else if(ht<At&&0>r(Tt,pt))q[Dt]=Tt,q[ht]=pt,Dt=ht;else break t}}return tt}function r(q,tt){var pt=q.sortIndex-tt.sortIndex;return pt!==0?pt:q.id-tt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],g=[],y=1,_=null,x=3,w=!1,k=!1,R=!1,D=!1,U=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function at(q){for(var tt=e(g);tt!==null;){if(tt.callback===null)i(g);else if(tt.startTime<=q)i(g),tt.sortIndex=tt.expirationTime,t(f,tt);else break;tt=e(g)}}function st(q){if(R=!1,at(q),!k)if(e(f)!==null)k=!0,ot||(ot=!0,L());else{var tt=e(g);tt!==null&&Nt(st,tt.startTime-q)}}var ot=!1,I=-1,A=5,N=-1;function V(){return D?!0:!(n.unstable_now()-N<A)}function M(){if(D=!1,ot){var q=n.unstable_now();N=q;var tt=!0;try{t:{k=!1,R&&(R=!1,W(I),I=-1),w=!0;var pt=x;try{e:{for(at(q),_=e(f);_!==null&&!(_.expirationTime>q&&V());){var Dt=_.callback;if(typeof Dt=="function"){_.callback=null,x=_.priorityLevel;var At=Dt(_.expirationTime<=q);if(q=n.unstable_now(),typeof At=="function"){_.callback=At,at(q),tt=!0;break e}_===e(f)&&i(f),at(q)}else i(f);_=e(f)}if(_!==null)tt=!0;else{var z=e(g);z!==null&&Nt(st,z.startTime-q),tt=!1}}break t}finally{_=null,x=pt,w=!1}tt=void 0}}finally{tt?L():ot=!1}}}var L;if(typeof J=="function")L=function(){J(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,kt=O.port2;O.port1.onmessage=M,L=function(){kt.postMessage(null)}}else L=function(){U(M,0)};function Nt(q,tt){I=U(function(){q(n.unstable_now())},tt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(q){switch(x){case 1:case 2:case 3:var tt=3;break;default:tt=x}var pt=x;x=tt;try{return q()}finally{x=pt}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(q,tt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var pt=x;x=q;try{return tt()}finally{x=pt}},n.unstable_scheduleCallback=function(q,tt,pt){var Dt=n.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?Dt+pt:Dt):pt=Dt,q){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=pt+At,q={id:y++,callback:tt,priorityLevel:q,startTime:pt,expirationTime:At,sortIndex:-1},pt>Dt?(q.sortIndex=pt,t(g,q),e(f)===null&&q===e(g)&&(R?(W(I),I=-1):R=!0,Nt(st,pt-Dt))):(q.sortIndex=At,t(f,q),k||w||(k=!0,ot||(ot=!0,L()))),q},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(q){var tt=x;return function(){var pt=x;x=tt;try{return q.apply(this,arguments)}finally{x=pt}}}})(Um)),Um}var zv;function eC(){return zv||(zv=1,jm.exports=tC()),jm.exports}var Bm={exports:{}},pn={};var Vv;function nC(){if(Vv)return pn;Vv=1;var n=Zp();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,g,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pn.createPortal=function(f,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(f,g,null,y)},pn.flushSync=function(f){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=g,i.p=y,i.d.f()}},pn.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},pn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},pn.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:w}):y==="script"&&i.d.X(f,{crossOrigin:_,integrity:x,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},pn.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},pn.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin);i.d.L(f,y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},pn.preloadModule=function(f,g){if(typeof f=="string")if(g){var y=h(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},pn.requestFormReset=function(f){i.d.r(f)},pn.unstable_batchedUpdates=function(f,g){return f(g)},pn.useFormState=function(f,g,y){return c.H.useFormState(f,g,y)},pn.useFormStatus=function(){return c.H.useHostTransitionStatus()},pn.version="19.2.1",pn}var Pv;function iC(){if(Pv)return Bm.exports;Pv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Bm.exports=nC(),Bm.exports}var Lv;function sC(){if(Lv)return Ac;Lv=1;var n=eC(),t=Zp(),e=iC();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function g(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,u=a;;){var m=l.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===l)return f(m),s;if(p===u)return f(m),a;p=p.sibling}throw Error(i(188))}if(l.return!==u.return)l=m,u=p;else{for(var v=!1,S=m.child;S;){if(S===l){v=!0,l=m,u=p;break}if(S===u){v=!0,u=m,l=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===l){v=!0,l=p,u=m;break}if(S===u){v=!0,u=p,l=m;break}S=S.sibling}if(!v)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function y(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=y(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),J=Symbol.for("react.context"),at=Symbol.for("react.forward_ref"),st=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function kt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case U:return"Profiler";case D:return"StrictMode";case st:return"Suspense";case ot:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case J:return s.displayName||"Context";case W:return(s._context.displayName||"Context")+".Consumer";case at:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return a=s.displayName||null,a!==null?a:kt(s.type)||"Memo";case A:a=s._payload,s=s._init;try{return kt(s(a))}catch{}}return null}var Nt=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt={pending:!1,data:null,method:null,action:null},Dt=[],At=-1;function z(s){return{current:s}}function X(s){0>At||(s.current=Dt[At],Dt[At]=null,At--)}function ut(s,a){At++,Dt[At]=s.current,s.current=a}var ht=z(null),Tt=z(null),Y=z(null),bt=z(null);function Ft(s,a){switch(ut(Y,a),ut(Tt,s),ut(ht,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Jb(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Jb(a),s=tv(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(ht),ut(ht,s)}function Ut(){X(ht),X(Tt),X(Y)}function xt(s){s.memoizedState!==null&&ut(bt,s);var a=ht.current,l=tv(a,s.type);a!==l&&(ut(Tt,s),ut(ht,l))}function Re(s){Tt.current===s&&(X(ht),X(Tt)),bt.current===s&&(X(bt),xc._currentValue=pt)}var wn,Ie;function In(s){if(wn===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);wn=a&&a[1]||"",Ie=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wn+s+Ie}var Ui=!1;function Bi(s,a){if(!s||Ui)return"";Ui=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Q){var $=Q}Reflect.construct(s,[],it)}else{try{it.call()}catch(Q){$=Q}s.call(it.prototype)}}else{try{throw Error()}catch(Q){$=Q}(it=s())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],S=p[1];if(v&&S){var P=v.split(`
`),G=S.split(`
`);for(m=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;if(u===P.length||m===G.length)for(u=P.length-1,m=G.length-1;1<=u&&0<=m&&P[u]!==G[m];)m--;for(;1<=u&&0<=m;u--,m--)if(P[u]!==G[m]){if(u!==1||m!==1)do if(u--,m--,0>m||P[u]!==G[m]){var Z=`
`+P[u].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=u&&0<=m);break}}}finally{Ui=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?In(l):""}function aa(s,a){switch(s.tag){case 26:case 27:case 5:return In(s.type);case 16:return In("Lazy");case 13:return s.child!==a&&a!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return Bi(s.type,!1);case 11:return Bi(s.type.render,!1);case 1:return Bi(s.type,!0);case 31:return In("Activity");default:return""}}function ft(s){try{var a="",l=null;do a+=aa(s,l),l=s,s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var dt=Object.prototype.hasOwnProperty,ct=n.unstable_scheduleCallback,Et=n.unstable_cancelCallback,Mt=n.unstable_shouldYield,qt=n.unstable_requestPaint,Zt=n.unstable_now,ke=n.unstable_getCurrentPriorityLevel,mn=n.unstable_ImmediatePriority,Sn=n.unstable_UserBlockingPriority,qn=n.unstable_NormalPriority,kn=n.unstable_LowPriority,ii=n.unstable_IdlePriority,Iu=n.log,ku=n.unstable_setDisableYieldValue,Ti=null,an=null;function si(s){if(typeof Iu=="function"&&ku(s),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Ti,s)}catch{}}var Ne=Math.clz32?Math.clz32:Du,Nu=Math.log,so=Math.LN2;function Du(s){return s>>>=0,s===0?32:31-(Nu(s)/so|0)|0}var Hi=256,oa=262144,Le=4194304;function Fi(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function qi(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var m=0,p=s.suspendedLanes,v=s.pingedLanes;s=s.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?m=Fi(u):(v&=S,v!==0?m=Fi(v):l||(l=S&~s,l!==0&&(m=Fi(l))))):(S=u&~p,S!==0?m=Fi(S):v!==0?m=Fi(v):l||(l=u&~s,l!==0&&(m=Fi(l)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,l=a&-a,p>=l||p===32&&(l&4194048)!==0)?a:m}function Ei(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Ud(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mu(){var s=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),s}function Gi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function la(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bd(s,a,l,u,m,p){var v=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var S=s.entanglements,P=s.expirationTimes,G=s.hiddenUpdates;for(l=v&~l;0<l;){var Z=31-Ne(l),it=1<<Z;S[Z]=0,P[Z]=-1;var $=G[Z];if($!==null)for(G[Z]=null,Z=0;Z<$.length;Z++){var Q=$[Z];Q!==null&&(Q.lane&=-536870913)}l&=~it}u!==0&&ca(s,u,0),p!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=p&~(v&~a))}function ca(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-Ne(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&261930}function Al(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-Ne(l),m=1<<u;m&a|s[u]&a&&(s[u]|=a),l&=~m}}function Cl(s,a){var l=a&-a;return l=(l&42)!==0?1:ua(l),(l&(s.suspendedLanes|a))!==0?0:l}function ua(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Es(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ou(){var s=tt.p;return s!==0?s:(s=window.event,s===void 0?32:Ev(s.type))}function wi(s,a){var l=tt.p;try{return tt.p=s,a()}finally{tt.p=l}}var Si=Math.random().toString(36).slice(2),je="__reactFiber$"+Si,Je="__reactProps$"+Si,$i="__reactContainer$"+Si,ro="__reactEvents$"+Si,Hd="__reactListeners$"+Si,zu="__reactHandles$"+Si,Vu="__reactResources$"+Si,Yi="__reactMarker$"+Si;function ao(s){delete s[je],delete s[Je],delete s[ro],delete s[Hd],delete s[zu]}function Ki(s){var a=s[je];if(a)return a;for(var l=s.parentNode;l;){if(a=l[$i]||l[je]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=ov(s);s!==null;){if(l=s[je])return l;s=ov(s)}return a}s=l,l=s.parentNode}return null}function ri(s){if(s=s[je]||s[$i]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Gn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Qi(s){var a=s[Vu];return a||(a=s[Vu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ue(s){s[Yi]=!0}var Rl=new Set,Il={};function Xi(s,a){Wi(s,a),Wi(s+"Capture",a)}function Wi(s,a){for(Il[s]=a,s=0;s<a.length;s++)Rl.add(a[s])}var kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nl={},Dl={};function Pu(s){return dt.call(Dl,s)?!0:dt.call(Nl,s)?!1:kl.test(s)?Dl[s]=!0:(Nl[s]=!0,!1)}function oo(s,a,l){if(Pu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function $n(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Be(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}function tn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ir(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ml(s,a,l){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(v){l=""+v,p.call(this,v)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function oe(s){if(!s._valueTracker){var a=ir(s)?"checked":"value";s._valueTracker=Ml(s,a,""+s[a])}}function ha(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=ir(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function Zi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var fa=/[\n"\\]/g;function Nn(s){return s.replace(fa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function lo(s,a,l,u,m,p,v,S){s.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?s.type=v:s.removeAttribute("type"),a!=null?v==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+tn(a)):s.value!==""+tn(a)&&(s.value=""+tn(a)):v!=="submit"&&v!=="reset"||s.removeAttribute("value"),a!=null?Ol(s,v,tn(a)):l!=null?Ol(s,v,tn(l)):u!=null&&s.removeAttribute("value"),m==null&&p!=null&&(s.defaultChecked=!!p),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+tn(S):s.removeAttribute("name")}function Lu(s,a,l,u,m,p,v,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){oe(s);return}l=l!=null?""+tn(l):"",a=a!=null?""+tn(a):l,S||a===s.value||(s.value=a),s.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=S?s.checked:!!u,s.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.name=v),oe(s)}function Ol(s,a,l){a==="number"&&Zi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function sr(s,a,l,u){if(s=s.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=a.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&u&&(s[l].defaultSelected=!0)}else{for(l=""+tn(l),a=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,u&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function ju(s,a,l){if(a!=null&&(a=""+tn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+tn(l):""}function rr(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(Nt(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=tn(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u),oe(s)}function Dn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Uu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zl(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||Uu.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Vl(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&l[m]!==u&&zl(s,m,u)}else for(var p in a)a.hasOwnProperty(p)&&zl(s,p,a[p])}function co(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uo(s){return ar.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ai(){}var Pl=null;function ai(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var or=null,Ji=null;function da(s){var a=ri(s);if(a&&(s=a.stateNode)){var l=s[Je]||null;t:switch(s=a.stateNode,a.type){case"input":if(lo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Nn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var m=u[Je]||null;if(!m)throw Error(i(90));lo(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&ha(u)}break t;case"textarea":ju(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&sr(s,!!l.multiple,a,!1)}}}var ho=!1;function lr(s,a,l){if(ho)return s(a,l);ho=!0;try{var u=s(a);return u}finally{if(ho=!1,(or!==null||Ji!==null)&&(Oh(),or&&(a=or,s=Ji,Ji=or=null,da(a),s)))for(a=0;a<s.length;a++)da(s[a])}}function Ci(s,a){var l=s.stateNode;if(l===null)return null;var u=l[Je]||null;if(u===null)return null;l=u[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ga=!1;if(oi)try{var he={};Object.defineProperty(he,"passive",{get:function(){ga=!0}}),window.addEventListener("test",he,he),window.removeEventListener("test",he,he)}catch{ga=!1}var ts=null,Ll=null,ma=null;function jl(){if(ma)return ma;var s,a=Ll,l=a.length,u,m="value"in ts?ts.value:ts.textContent,p=m.length;for(s=0;s<l&&a[s]===m[s];s++);var v=l-s;for(u=1;u<=v&&a[l-u]===m[p-u];u++);return ma=m.slice(s,1<u?1-u:void 0)}function pa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ws(){return!0}function Ri(){return!1}function on(s){function a(l,u,m,p,v){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(l=s[S],this[S]=l?l(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ws:Ri,this.isPropagationStopped=Ri,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),a}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},es=on(Ss),cr=_({},Ss,{view:0,detail:0}),Ul=on(cr),ur,fo,ns,go=_({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ns&&(ns&&s.type==="mousemove"?(ur=s.screenX-ns.screenX,fo=s.screenY-ns.screenY):fo=ur=0,ns=s),ur)},movementY:function(s){return"movementY"in s?s.movementY:fo}}),Bl=on(go),ya=_({},go,{dataTransfer:0}),Hu=on(ya),Fu=_({},cr,{relatedTarget:0}),_a=on(Fu),Hl=_({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=on(Hl),mo=_({},Ss,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Gu=on(mo),$u=_({},Ss,{data:0}),is=on($u),Yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Qu[s])?!!a[s]:!1}function hr(){return Xu}var An=_({},cr,{key:function(s){if(s.key){var a=Yu[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=pa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ku[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(s){return s.type==="keypress"?pa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?pa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wu=on(An),Zu=_({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),As=on(Zu),d=_({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr}),b=on(d),T=_({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=on(T),H=_({},go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),K=on(H),gt=_({},Ss,{newState:0,oldState:0}),Pt=on(gt),De=[9,13,27,32],se=oi&&"CompositionEvent"in window,Te=null;oi&&"documentMode"in document&&(Te=document.documentMode);var li=oi&&"TextEvent"in window&&!Te,ss=oi&&(!se||Te&&8<Te&&11>=Te),Ii=" ",ki=!1;function ba(s,a){switch(s){case"keyup":return De.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function po(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var yo=!1;function xA(s,a){switch(s){case"compositionend":return po(a);case"keypress":return a.which!==32?null:(ki=!0,Ii);case"textInput":return s=a.data,s===Ii&&ki?null:s;default:return null}}function TA(s,a){if(yo)return s==="compositionend"||!se&&ba(s,a)?(s=jl(),ma=Ll=ts=null,yo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ss&&a.locale!=="ko"?null:a.data;default:return null}}var EA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!EA[s.type]:a==="textarea"}function hy(s,a,l,u){or?Ji?Ji.push(u):Ji=[u]:or=u,a=Bh(a,"onChange"),0<a.length&&(l=new es("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var Fl=null,ql=null;function wA(s){Yb(s,0)}function Ju(s){var a=Gn(s);if(ha(a))return s}function fy(s,a){if(s==="change")return a}var dy=!1;if(oi){var Fd;if(oi){var qd="oninput"in document;if(!qd){var gy=document.createElement("div");gy.setAttribute("oninput","return;"),qd=typeof gy.oninput=="function"}Fd=qd}else Fd=!1;dy=Fd&&(!document.documentMode||9<document.documentMode)}function my(){Fl&&(Fl.detachEvent("onpropertychange",py),ql=Fl=null)}function py(s){if(s.propertyName==="value"&&Ju(ql)){var a=[];hy(a,ql,s,ai(s)),lr(wA,a)}}function SA(s,a,l){s==="focusin"?(my(),Fl=a,ql=l,Fl.attachEvent("onpropertychange",py)):s==="focusout"&&my()}function AA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ju(ql)}function CA(s,a){if(s==="click")return Ju(a)}function RA(s,a){if(s==="input"||s==="change")return Ju(a)}function IA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Yn=typeof Object.is=="function"?Object.is:IA;function Gl(s,a){if(Yn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!dt.call(a,m)||!Yn(s[m],a[m]))return!1}return!0}function yy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function _y(s,a){var l=yy(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=yy(l)}}function by(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?by(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function vy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Zi(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=Zi(s.document)}return a}function Gd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var kA=oi&&"documentMode"in document&&11>=document.documentMode,_o=null,$d=null,$l=null,Yd=!1;function xy(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Yd||_o==null||_o!==Zi(u)||(u=_o,"selectionStart"in u&&Gd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$l&&Gl($l,u)||($l=u,u=Bh($d,"onSelect"),0<u.length&&(a=new es("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=_o)))}function va(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var bo={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},Kd={},Ty={};oi&&(Ty=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function xa(s){if(Kd[s])return Kd[s];if(!bo[s])return s;var a=bo[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in Ty)return Kd[s]=a[l];return s}var Ey=xa("animationend"),wy=xa("animationiteration"),Sy=xa("animationstart"),NA=xa("transitionrun"),DA=xa("transitionstart"),MA=xa("transitioncancel"),Ay=xa("transitionend"),Cy=new Map,Qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qd.push("scrollEnd");function Ni(s,a){Cy.set(s,a),Xi(a,[s])}var th=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ci=[],vo=0,Xd=0;function eh(){for(var s=vo,a=Xd=vo=0;a<s;){var l=ci[a];ci[a++]=null;var u=ci[a];ci[a++]=null;var m=ci[a];ci[a++]=null;var p=ci[a];if(ci[a++]=null,u!==null&&m!==null){var v=u.pending;v===null?m.next=m:(m.next=v.next,v.next=m),u.pending=m}p!==0&&Ry(l,m,p)}}function nh(s,a,l,u){ci[vo++]=s,ci[vo++]=a,ci[vo++]=l,ci[vo++]=u,Xd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Wd(s,a,l,u){return nh(s,a,l,u),ih(s)}function Ta(s,a){return nh(s,null,null,a),ih(s)}function Ry(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var m=!1,p=s.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(m=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,m&&a!==null&&(m=31-Ne(l),s=p.hiddenUpdates,u=s[m],u===null?s[m]=[a]:u.push(a),a.lane=l|536870912),p):null}function ih(s){if(50<gc)throw gc=0,am=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var xo={};function OA(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(s,a,l,u){return new OA(s,a,l,u)}function Zd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Cs(s,a){var l=s.alternate;return l===null?(l=Kn(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Iy(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function sh(s,a,l,u,m,p){var v=0;if(u=s,typeof s=="function")Zd(s)&&(v=1);else if(typeof s=="string")v=j2(s,l,ht.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case N:return s=Kn(31,l,a,m),s.elementType=N,s.lanes=p,s;case R:return Ea(l.children,m,p,a);case D:v=8,m|=24;break;case U:return s=Kn(12,l,a,m|2),s.elementType=U,s.lanes=p,s;case st:return s=Kn(13,l,a,m),s.elementType=st,s.lanes=p,s;case ot:return s=Kn(19,l,a,m),s.elementType=ot,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case J:v=10;break t;case W:v=9;break t;case at:v=11;break t;case I:v=14;break t;case A:v=16,u=null;break t}v=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return a=Kn(v,l,a,m),a.elementType=s,a.type=u,a.lanes=p,a}function Ea(s,a,l,u){return s=Kn(7,s,u,a),s.lanes=l,s}function Jd(s,a,l){return s=Kn(6,s,null,a),s.lanes=l,s}function ky(s){var a=Kn(18,null,null,0);return a.stateNode=s,a}function tg(s,a,l){return a=Kn(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Ny=new WeakMap;function ui(s,a){if(typeof s=="object"&&s!==null){var l=Ny.get(s);return l!==void 0?l:(a={value:s,source:a,stack:ft(a)},Ny.set(s,a),a)}return{value:s,source:a,stack:ft(a)}}var To=[],Eo=0,rh=null,Yl=0,hi=[],fi=0,fr=null,rs=1,as="";function Rs(s,a){To[Eo++]=Yl,To[Eo++]=rh,rh=s,Yl=a}function Dy(s,a,l){hi[fi++]=rs,hi[fi++]=as,hi[fi++]=fr,fr=s;var u=rs;s=as;var m=32-Ne(u)-1;u&=~(1<<m),l+=1;var p=32-Ne(a)+m;if(30<p){var v=m-m%5;p=(u&(1<<v)-1).toString(32),u>>=v,m-=v,rs=1<<32-Ne(a)+m|l<<m|u,as=p+s}else rs=1<<p|l<<m|u,as=s}function eg(s){s.return!==null&&(Rs(s,1),Dy(s,1,0))}function ng(s){for(;s===rh;)rh=To[--Eo],To[Eo]=null,Yl=To[--Eo],To[Eo]=null;for(;s===fr;)fr=hi[--fi],hi[fi]=null,as=hi[--fi],hi[fi]=null,rs=hi[--fi],hi[fi]=null}function My(s,a){hi[fi++]=rs,hi[fi++]=as,hi[fi++]=fr,rs=a.id,as=a.overflow,fr=s}var ln=null,_e=null,Xt=!1,dr=null,di=!1,ig=Error(i(519));function gr(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(ui(a,s)),ig}function Oy(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[je]=s,a[Je]=u,l){case"dialog":Ht("cancel",a),Ht("close",a);break;case"iframe":case"object":case"embed":Ht("load",a);break;case"video":case"audio":for(l=0;l<pc.length;l++)Ht(pc[l],a);break;case"source":Ht("error",a);break;case"img":case"image":case"link":Ht("error",a),Ht("load",a);break;case"details":Ht("toggle",a);break;case"input":Ht("invalid",a),Lu(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ht("invalid",a);break;case"textarea":Ht("invalid",a),rr(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||Wb(a.textContent,l)?(u.popover!=null&&(Ht("beforetoggle",a),Ht("toggle",a)),u.onScroll!=null&&Ht("scroll",a),u.onScrollEnd!=null&&Ht("scrollend",a),u.onClick!=null&&(a.onclick=Ai),a=!0):a=!1,a||gr(s,!0)}function zy(s){for(ln=s.return;ln;)switch(ln.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:ln=ln.return}}function wo(s){if(s!==ln)return!1;if(!Xt)return zy(s),Xt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||xm(s.type,s.memoizedProps)),l=!l),l&&_e&&gr(s),zy(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));_e=av(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));_e=av(s)}else a===27?(a=_e,Rr(s.type)?(s=Am,Am=null,_e=s):_e=a):_e=ln?mi(s.stateNode.nextSibling):null;return!0}function wa(){_e=ln=null,Xt=!1}function sg(){var s=dr;return s!==null&&(Vn===null?Vn=s:Vn.push.apply(Vn,s),dr=null),s}function Kl(s){dr===null?dr=[s]:dr.push(s)}var rg=z(null),Sa=null,Is=null;function mr(s,a,l){ut(rg,a._currentValue),a._currentValue=l}function ks(s){s._currentValue=rg.current,X(rg)}function ag(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function og(s,a,l,u){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var p=m.dependencies;if(p!==null){var v=m.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=m;for(var P=0;P<a.length;P++)if(S.context===a[P]){p.lanes|=l,S=p.alternate,S!==null&&(S.lanes|=l),ag(p.return,l,s),u||(v=null);break t}p=S.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(i(341));v.lanes|=l,p=v.alternate,p!==null&&(p.lanes|=l),ag(v,l,s),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===s){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function So(s,a,l,u){s=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var S=m.type;Yn(m.pendingProps.value,v.value)||(s!==null?s.push(S):s=[S])}}else if(m===bt.current){if(v=m.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(xc):s=[xc])}m=m.return}s!==null&&og(a,s,l,u),a.flags|=262144}function ah(s){for(s=s.firstContext;s!==null;){if(!Yn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Aa(s){Sa=s,Is=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function cn(s){return Vy(Sa,s)}function oh(s,a){return Sa===null&&Aa(s),Vy(s,a)}function Vy(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Is===null){if(s===null)throw Error(i(308));Is=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Is=Is.next=a;return l}var zA=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},VA=n.unstable_scheduleCallback,PA=n.unstable_NormalPriority,He={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lg(){return{controller:new zA,data:new Map,refCount:0}}function Ql(s){s.refCount--,s.refCount===0&&VA(PA,function(){s.controller.abort()})}var Xl=null,cg=0,Ao=0,Co=null;function LA(s,a){if(Xl===null){var l=Xl=[];cg=0,Ao=fm(),Co={status:"pending",value:void 0,then:function(u){l.push(u)}}}return cg++,a.then(Py,Py),a}function Py(){if(--cg===0&&Xl!==null){Co!==null&&(Co.status="fulfilled");var s=Xl;Xl=null,Ao=0,Co=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function jA(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var Ly=q.S;q.S=function(s,a){xb=Zt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&LA(s,a),Ly!==null&&Ly(s,a)};var Ca=z(null);function ug(){var s=Ca.current;return s!==null?s:me.pooledCache}function lh(s,a){a===null?ut(Ca,Ca.current):ut(Ca,a.pool)}function jy(){var s=ug();return s===null?null:{parent:He._currentValue,pool:s}}var Ro=Error(i(460)),hg=Error(i(474)),ch=Error(i(542)),uh={then:function(){}};function Uy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function By(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Ai,Ai),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Fy(s),s;default:if(typeof a.status=="string")a.then(Ai,Ai);else{if(s=me,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Fy(s),s}throw Ia=a,Ro}}function Ra(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ia=l,Ro):l}}var Ia=null;function Hy(){if(Ia===null)throw Error(i(459));var s=Ia;return Ia=null,s}function Fy(s){if(s===Ro||s===ch)throw Error(i(483))}var Io=null,Wl=0;function hh(s){var a=Wl;return Wl+=1,Io===null&&(Io=[]),By(Io,s,a)}function Zl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function fh(s,a){throw a.$$typeof===x?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function qy(s){function a(B,j){if(s){var F=B.deletions;F===null?(B.deletions=[j],B.flags|=16):F.push(j)}}function l(B,j){if(!s)return null;for(;j!==null;)a(B,j),j=j.sibling;return null}function u(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function m(B,j){return B=Cs(B,j),B.index=0,B.sibling=null,B}function p(B,j,F){return B.index=F,s?(F=B.alternate,F!==null?(F=F.index,F<j?(B.flags|=67108866,j):F):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function v(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function S(B,j,F,et){return j===null||j.tag!==6?(j=Jd(F,B.mode,et),j.return=B,j):(j=m(j,F),j.return=B,j)}function P(B,j,F,et){var wt=F.type;return wt===R?Z(B,j,F.props.children,et,F.key):j!==null&&(j.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===A&&Ra(wt)===j.type)?(j=m(j,F.props),Zl(j,F),j.return=B,j):(j=sh(F.type,F.key,F.props,null,B.mode,et),Zl(j,F),j.return=B,j)}function G(B,j,F,et){return j===null||j.tag!==4||j.stateNode.containerInfo!==F.containerInfo||j.stateNode.implementation!==F.implementation?(j=tg(F,B.mode,et),j.return=B,j):(j=m(j,F.children||[]),j.return=B,j)}function Z(B,j,F,et,wt){return j===null||j.tag!==7?(j=Ea(F,B.mode,et,wt),j.return=B,j):(j=m(j,F),j.return=B,j)}function it(B,j,F){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Jd(""+j,B.mode,F),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return F=sh(j.type,j.key,j.props,null,B.mode,F),Zl(F,j),F.return=B,F;case k:return j=tg(j,B.mode,F),j.return=B,j;case A:return j=Ra(j),it(B,j,F)}if(Nt(j)||L(j))return j=Ea(j,B.mode,F,null),j.return=B,j;if(typeof j.then=="function")return it(B,hh(j),F);if(j.$$typeof===J)return it(B,oh(B,j),F);fh(B,j)}return null}function $(B,j,F,et){var wt=j!==null?j.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return wt!==null?null:S(B,j,""+F,et);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===wt?P(B,j,F,et):null;case k:return F.key===wt?G(B,j,F,et):null;case A:return F=Ra(F),$(B,j,F,et)}if(Nt(F)||L(F))return wt!==null?null:Z(B,j,F,et,null);if(typeof F.then=="function")return $(B,j,hh(F),et);if(F.$$typeof===J)return $(B,j,oh(B,F),et);fh(B,F)}return null}function Q(B,j,F,et,wt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return B=B.get(F)||null,S(j,B,""+et,wt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case w:return B=B.get(et.key===null?F:et.key)||null,P(j,B,et,wt);case k:return B=B.get(et.key===null?F:et.key)||null,G(j,B,et,wt);case A:return et=Ra(et),Q(B,j,F,et,wt)}if(Nt(et)||L(et))return B=B.get(F)||null,Z(j,B,et,wt,null);if(typeof et.then=="function")return Q(B,j,F,hh(et),wt);if(et.$$typeof===J)return Q(B,j,F,oh(j,et),wt);fh(j,et)}return null}function _t(B,j,F,et){for(var wt=null,ee=null,vt=j,jt=j=0,$t=null;vt!==null&&jt<F.length;jt++){vt.index>jt?($t=vt,vt=null):$t=vt.sibling;var ne=$(B,vt,F[jt],et);if(ne===null){vt===null&&(vt=$t);break}s&&vt&&ne.alternate===null&&a(B,vt),j=p(ne,j,jt),ee===null?wt=ne:ee.sibling=ne,ee=ne,vt=$t}if(jt===F.length)return l(B,vt),Xt&&Rs(B,jt),wt;if(vt===null){for(;jt<F.length;jt++)vt=it(B,F[jt],et),vt!==null&&(j=p(vt,j,jt),ee===null?wt=vt:ee.sibling=vt,ee=vt);return Xt&&Rs(B,jt),wt}for(vt=u(vt);jt<F.length;jt++)$t=Q(vt,B,jt,F[jt],et),$t!==null&&(s&&$t.alternate!==null&&vt.delete($t.key===null?jt:$t.key),j=p($t,j,jt),ee===null?wt=$t:ee.sibling=$t,ee=$t);return s&&vt.forEach(function(Mr){return a(B,Mr)}),Xt&&Rs(B,jt),wt}function Ct(B,j,F,et){if(F==null)throw Error(i(151));for(var wt=null,ee=null,vt=j,jt=j=0,$t=null,ne=F.next();vt!==null&&!ne.done;jt++,ne=F.next()){vt.index>jt?($t=vt,vt=null):$t=vt.sibling;var Mr=$(B,vt,ne.value,et);if(Mr===null){vt===null&&(vt=$t);break}s&&vt&&Mr.alternate===null&&a(B,vt),j=p(Mr,j,jt),ee===null?wt=Mr:ee.sibling=Mr,ee=Mr,vt=$t}if(ne.done)return l(B,vt),Xt&&Rs(B,jt),wt;if(vt===null){for(;!ne.done;jt++,ne=F.next())ne=it(B,ne.value,et),ne!==null&&(j=p(ne,j,jt),ee===null?wt=ne:ee.sibling=ne,ee=ne);return Xt&&Rs(B,jt),wt}for(vt=u(vt);!ne.done;jt++,ne=F.next())ne=Q(vt,B,jt,ne.value,et),ne!==null&&(s&&ne.alternate!==null&&vt.delete(ne.key===null?jt:ne.key),j=p(ne,j,jt),ee===null?wt=ne:ee.sibling=ne,ee=ne);return s&&vt.forEach(function(X2){return a(B,X2)}),Xt&&Rs(B,jt),wt}function ge(B,j,F,et){if(typeof F=="object"&&F!==null&&F.type===R&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:t:{for(var wt=F.key;j!==null;){if(j.key===wt){if(wt=F.type,wt===R){if(j.tag===7){l(B,j.sibling),et=m(j,F.props.children),et.return=B,B=et;break t}}else if(j.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===A&&Ra(wt)===j.type){l(B,j.sibling),et=m(j,F.props),Zl(et,F),et.return=B,B=et;break t}l(B,j);break}else a(B,j);j=j.sibling}F.type===R?(et=Ea(F.props.children,B.mode,et,F.key),et.return=B,B=et):(et=sh(F.type,F.key,F.props,null,B.mode,et),Zl(et,F),et.return=B,B=et)}return v(B);case k:t:{for(wt=F.key;j!==null;){if(j.key===wt)if(j.tag===4&&j.stateNode.containerInfo===F.containerInfo&&j.stateNode.implementation===F.implementation){l(B,j.sibling),et=m(j,F.children||[]),et.return=B,B=et;break t}else{l(B,j);break}else a(B,j);j=j.sibling}et=tg(F,B.mode,et),et.return=B,B=et}return v(B);case A:return F=Ra(F),ge(B,j,F,et)}if(Nt(F))return _t(B,j,F,et);if(L(F)){if(wt=L(F),typeof wt!="function")throw Error(i(150));return F=wt.call(F),Ct(B,j,F,et)}if(typeof F.then=="function")return ge(B,j,hh(F),et);if(F.$$typeof===J)return ge(B,j,oh(B,F),et);fh(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,j!==null&&j.tag===6?(l(B,j.sibling),et=m(j,F),et.return=B,B=et):(l(B,j),et=Jd(F,B.mode,et),et.return=B,B=et),v(B)):l(B,j)}return function(B,j,F,et){try{Wl=0;var wt=ge(B,j,F,et);return Io=null,wt}catch(vt){if(vt===Ro||vt===ch)throw vt;var ee=Kn(29,vt,null,B.mode);return ee.lanes=et,ee.return=B,ee}finally{}}}var ka=qy(!0),Gy=qy(!1),pr=!1;function fg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function yr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function _r(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(re&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=ih(s),Ry(s,null,l),a}return nh(s,u,a,l),ih(s)}function Jl(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,Al(s,l)}}function gg(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?m=p=v:p=p.next=v,l=l.next}while(l!==null);p===null?m=p=a:p=p.next=a}else m=p=a;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var mg=!1;function tc(){if(mg){var s=Co;if(s!==null)throw s}}function ec(s,a,l,u){mg=!1;var m=s.updateQueue;pr=!1;var p=m.firstBaseUpdate,v=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var P=S,G=P.next;P.next=null,v===null?p=G:v.next=G,v=P;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,S=Z.lastBaseUpdate,S!==v&&(S===null?Z.firstBaseUpdate=G:S.next=G,Z.lastBaseUpdate=P))}if(p!==null){var it=m.baseState;v=0,Z=G=P=null,S=p;do{var $=S.lane&-536870913,Q=$!==S.lane;if(Q?(Gt&$)===$:(u&$)===$){$!==0&&$===Ao&&(mg=!0),Z!==null&&(Z=Z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var _t=s,Ct=S;$=a;var ge=l;switch(Ct.tag){case 1:if(_t=Ct.payload,typeof _t=="function"){it=_t.call(ge,it,$);break t}it=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=Ct.payload,$=typeof _t=="function"?_t.call(ge,it,$):_t,$==null)break t;it=_({},it,$);break t;case 2:pr=!0}}$=S.callback,$!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=m.callbacks,Q===null?m.callbacks=[$]:Q.push($))}else Q={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Z===null?(G=Z=Q,P=it):Z=Z.next=Q,v|=$;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,m.lastBaseUpdate=Q,m.shared.pending=null}}while(!0);Z===null&&(P=it),m.baseState=P,m.firstBaseUpdate=G,m.lastBaseUpdate=Z,p===null&&(m.shared.lanes=0),Er|=v,s.lanes=v,s.memoizedState=it}}function $y(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Yy(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)$y(l[s],a)}var ko=z(null),dh=z(0);function Ky(s,a){s=js,ut(dh,s),ut(ko,a),js=s|a.baseLanes}function pg(){ut(dh,js),ut(ko,ko.current)}function yg(){js=dh.current,X(ko),X(dh)}var Qn=z(null),gi=null;function br(s){var a=s.alternate;ut(Me,Me.current&1),ut(Qn,s),gi===null&&(a===null||ko.current!==null||a.memoizedState!==null)&&(gi=s)}function _g(s){ut(Me,Me.current),ut(Qn,s),gi===null&&(gi=s)}function Qy(s){s.tag===22?(ut(Me,Me.current),ut(Qn,s),gi===null&&(gi=s)):vr()}function vr(){ut(Me,Me.current),ut(Qn,Qn.current)}function Xn(s){X(Qn),gi===s&&(gi=null),X(Me)}var Me=z(0);function gh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||wm(l)||Sm(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ns=0,Lt=null,fe=null,Fe=null,mh=!1,No=!1,Na=!1,ph=0,nc=0,Do=null,UA=0;function Se(){throw Error(i(321))}function bg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Yn(s[l],a[l]))return!1;return!0}function vg(s,a,l,u,m,p){return Ns=p,Lt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,q.H=s===null||s.memoizedState===null?D_:zg,Na=!1,p=l(u,m),Na=!1,No&&(p=Wy(a,l,u,m)),Xy(s),p}function Xy(s){q.H=rc;var a=fe!==null&&fe.next!==null;if(Ns=0,Fe=fe=Lt=null,mh=!1,nc=0,Do=null,a)throw Error(i(300));s===null||qe||(s=s.dependencies,s!==null&&ah(s)&&(qe=!0))}function Wy(s,a,l,u){Lt=s;var m=0;do{if(No&&(Do=null),nc=0,No=!1,25<=m)throw Error(i(301));if(m+=1,Fe=fe=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}q.H=M_,p=a(l,u)}while(No);return p}function BA(){var s=q.H,a=s.useState()[0];return a=typeof a.then=="function"?ic(a):a,s=s.useState()[0],(fe!==null?fe.memoizedState:null)!==s&&(Lt.flags|=1024),a}function xg(){var s=ph!==0;return ph=0,s}function Tg(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Eg(s){if(mh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}mh=!1}Ns=0,Fe=fe=Lt=null,No=!1,nc=ph=0,Do=null}function Cn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Lt.memoizedState=Fe=s:Fe=Fe.next=s,Fe}function Oe(){if(fe===null){var s=Lt.alternate;s=s!==null?s.memoizedState:null}else s=fe.next;var a=Fe===null?Lt.memoizedState:Fe.next;if(a!==null)Fe=a,fe=s;else{if(s===null)throw Lt.alternate===null?Error(i(467)):Error(i(310));fe=s,s={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},Fe===null?Lt.memoizedState=Fe=s:Fe=Fe.next=s}return Fe}function yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ic(s){var a=nc;return nc+=1,Do===null&&(Do=[]),s=By(Do,s,a),a=Lt,(Fe===null?a.memoizedState:Fe.next)===null&&(a=a.alternate,q.H=a===null||a.memoizedState===null?D_:zg),s}function _h(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ic(s);if(s.$$typeof===J)return cn(s)}throw Error(i(438,String(s)))}function wg(s){var a=null,l=Lt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Lt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=yh(),Lt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=V;return a.index++,l}function Ds(s,a){return typeof a=="function"?a(s):a}function bh(s){var a=Oe();return Sg(a,fe,s)}function Sg(s,a,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var m=s.baseQueue,p=u.pending;if(p!==null){if(m!==null){var v=m.next;m.next=p.next,p.next=v}a.baseQueue=m=p,u.pending=null}if(p=s.baseState,m===null)s.memoizedState=p;else{a=m.next;var S=v=null,P=null,G=a,Z=!1;do{var it=G.lane&-536870913;if(it!==G.lane?(Gt&it)===it:(Ns&it)===it){var $=G.revertLane;if($===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),it===Ao&&(Z=!0);else if((Ns&$)===$){G=G.next,$===Ao&&(Z=!0);continue}else it={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(S=P=it,v=p):P=P.next=it,Lt.lanes|=$,Er|=$;it=G.action,Na&&l(p,it),p=G.hasEagerState?G.eagerState:l(p,it)}else $={lane:it,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(S=P=$,v=p):P=P.next=$,Lt.lanes|=it,Er|=it;G=G.next}while(G!==null&&G!==a);if(P===null?v=p:P.next=S,!Yn(p,s.memoizedState)&&(qe=!0,Z&&(l=Co,l!==null)))throw l;s.memoizedState=p,s.baseState=v,s.baseQueue=P,u.lastRenderedState=p}return m===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Ag(s){var a=Oe(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,m=l.pending,p=a.memoizedState;if(m!==null){l.pending=null;var v=m=m.next;do p=s(p,v.action),v=v.next;while(v!==m);Yn(p,a.memoizedState)||(qe=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),l.lastRenderedState=p}return[p,u]}function Zy(s,a,l){var u=Lt,m=Oe(),p=Xt;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=a();var v=!Yn((fe||m).memoizedState,l);if(v&&(m.memoizedState=l,qe=!0),m=m.queue,Ig(e_.bind(null,u,m,s),[s]),m.getSnapshot!==a||v||Fe!==null&&Fe.memoizedState.tag&1){if(u.flags|=2048,Mo(9,{destroy:void 0},t_.bind(null,u,m,l,a),null),me===null)throw Error(i(349));p||(Ns&127)!==0||Jy(u,a,l)}return l}function Jy(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Lt.updateQueue,a===null?(a=yh(),Lt.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function t_(s,a,l,u){a.value=l,a.getSnapshot=u,n_(a)&&i_(s)}function e_(s,a,l){return l(function(){n_(a)&&i_(s)})}function n_(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Yn(s,l)}catch{return!0}}function i_(s){var a=Ta(s,2);a!==null&&Pn(a,s,2)}function Cg(s){var a=Cn();if(typeof s=="function"){var l=s;if(s=l(),Na){si(!0);try{l()}finally{si(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:s},a}function s_(s,a,l,u){return s.baseState=l,Sg(s,fe,typeof u=="function"?u:Ds)}function HA(s,a,l,u,m){if(Th(s))throw Error(i(485));if(s=a.action,s!==null){var p={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};q.T!==null?l(!0):p.isTransition=!1,u(p),l=a.pending,l===null?(p.next=a.pending=p,r_(a,p)):(p.next=l.next,a.pending=l.next=p)}}function r_(s,a){var l=a.action,u=a.payload,m=s.state;if(a.isTransition){var p=q.T,v={};q.T=v;try{var S=l(m,u),P=q.S;P!==null&&P(v,S),a_(s,a,S)}catch(G){Rg(s,a,G)}finally{p!==null&&v.types!==null&&(p.types=v.types),q.T=p}}else try{p=l(m,u),a_(s,a,p)}catch(G){Rg(s,a,G)}}function a_(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){o_(s,a,u)},function(u){return Rg(s,a,u)}):o_(s,a,l)}function o_(s,a,l){a.status="fulfilled",a.value=l,l_(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,r_(s,l)))}function Rg(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,l_(a),a=a.next;while(a!==u)}s.action=null}function l_(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function c_(s,a){return a}function u_(s,a){if(Xt){var l=me.formState;if(l!==null){t:{var u=Lt;if(Xt){if(_e){e:{for(var m=_e,p=di;m.nodeType!==8;){if(!p){m=null;break e}if(m=mi(m.nextSibling),m===null){m=null;break e}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){_e=mi(m.nextSibling),u=m.data==="F!";break t}}gr(u)}u=!1}u&&(a=l[0])}}return l=Cn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c_,lastRenderedState:a},l.queue=u,l=I_.bind(null,Lt,u),u.dispatch=l,u=Cg(!1),p=Og.bind(null,Lt,!1,u.queue),u=Cn(),m={state:a,dispatch:null,action:s,pending:null},u.queue=m,l=HA.bind(null,Lt,m,p,l),m.dispatch=l,u.memoizedState=s,[a,l,!1]}function h_(s){var a=Oe();return f_(a,fe,s)}function f_(s,a,l){if(a=Sg(s,a,c_)[0],s=bh(Ds)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=ic(a)}catch(v){throw v===Ro?ch:v}else u=a;a=Oe();var m=a.queue,p=m.dispatch;return l!==a.memoizedState&&(Lt.flags|=2048,Mo(9,{destroy:void 0},FA.bind(null,m,l),null)),[u,p,s]}function FA(s,a){s.action=a}function d_(s){var a=Oe(),l=fe;if(l!==null)return f_(a,l,s);Oe(),a=a.memoizedState,l=Oe();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function Mo(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=Lt.updateQueue,a===null&&(a=yh(),Lt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function g_(){return Oe().memoizedState}function vh(s,a,l,u){var m=Cn();Lt.flags|=s,m.memoizedState=Mo(1|a,{destroy:void 0},l,u===void 0?null:u)}function xh(s,a,l,u){var m=Oe();u=u===void 0?null:u;var p=m.memoizedState.inst;fe!==null&&u!==null&&bg(u,fe.memoizedState.deps)?m.memoizedState=Mo(a,p,l,u):(Lt.flags|=s,m.memoizedState=Mo(1|a,p,l,u))}function m_(s,a){vh(8390656,8,s,a)}function Ig(s,a){xh(2048,8,s,a)}function qA(s){Lt.flags|=4;var a=Lt.updateQueue;if(a===null)a=yh(),Lt.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function p_(s){var a=Oe().memoizedState;return qA({ref:a,nextImpl:s}),function(){if((re&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function y_(s,a){return xh(4,2,s,a)}function __(s,a){return xh(4,4,s,a)}function b_(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function v_(s,a,l){l=l!=null?l.concat([s]):null,xh(4,4,b_.bind(null,a,s),l)}function kg(){}function x_(s,a){var l=Oe();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&bg(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function T_(s,a){var l=Oe();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&bg(a,u[1]))return u[0];if(u=s(),Na){si(!0);try{s()}finally{si(!1)}}return l.memoizedState=[u,a],u}function Ng(s,a,l){return l===void 0||(Ns&1073741824)!==0&&(Gt&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=Eb(),Lt.lanes|=s,Er|=s,l)}function E_(s,a,l,u){return Yn(l,a)?l:ko.current!==null?(s=Ng(s,l,u),Yn(s,a)||(qe=!0),s):(Ns&42)===0||(Ns&1073741824)!==0&&(Gt&261930)===0?(qe=!0,s.memoizedState=l):(s=Eb(),Lt.lanes|=s,Er|=s,a)}function w_(s,a,l,u,m){var p=tt.p;tt.p=p!==0&&8>p?p:8;var v=q.T,S={};q.T=S,Og(s,!1,a,l);try{var P=m(),G=q.S;if(G!==null&&G(S,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Z=jA(P,u);sc(s,a,Z,Jn(s))}else sc(s,a,u,Jn(s))}catch(it){sc(s,a,{then:function(){},status:"rejected",reason:it},Jn())}finally{tt.p=p,v!==null&&S.types!==null&&(v.types=S.types),q.T=v}}function GA(){}function Dg(s,a,l,u){if(s.tag!==5)throw Error(i(476));var m=S_(s).queue;w_(s,m,a,pt,l===null?GA:function(){return A_(s),l(u)})}function S_(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:pt,baseState:pt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:pt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function A_(s){var a=S_(s);a.next===null&&(a=s.alternate.memoizedState),sc(s,a.next.queue,{},Jn())}function Mg(){return cn(xc)}function C_(){return Oe().memoizedState}function R_(){return Oe().memoizedState}function $A(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Jn();s=yr(l);var u=_r(a,s,l);u!==null&&(Pn(u,a,l),Jl(u,a,l)),a={cache:lg()},s.payload=a;return}a=a.return}}function YA(s,a,l){var u=Jn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Th(s)?k_(a,l):(l=Wd(s,a,l,u),l!==null&&(Pn(l,s,u),N_(l,a,u)))}function I_(s,a,l){var u=Jn();sc(s,a,l,u)}function sc(s,a,l,u){var m={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Th(s))k_(a,m);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var v=a.lastRenderedState,S=p(v,l);if(m.hasEagerState=!0,m.eagerState=S,Yn(S,v))return nh(s,a,m,0),me===null&&eh(),!1}catch{}finally{}if(l=Wd(s,a,m,u),l!==null)return Pn(l,s,u),N_(l,a,u),!0}return!1}function Og(s,a,l,u){if(u={lane:2,revertLane:fm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Th(s)){if(a)throw Error(i(479))}else a=Wd(s,l,u,2),a!==null&&Pn(a,s,2)}function Th(s){var a=s.alternate;return s===Lt||a!==null&&a===Lt}function k_(s,a){No=mh=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function N_(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,Al(s,l)}}var rc={readContext:cn,use:_h,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se,useHostTransitionStatus:Se,useFormState:Se,useActionState:Se,useOptimistic:Se,useMemoCache:Se,useCacheRefresh:Se};rc.useEffectEvent=Se;var D_={readContext:cn,use:_h,useCallback:function(s,a){return Cn().memoizedState=[s,a===void 0?null:a],s},useContext:cn,useEffect:m_,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,vh(4194308,4,b_.bind(null,a,s),l)},useLayoutEffect:function(s,a){return vh(4194308,4,s,a)},useInsertionEffect:function(s,a){vh(4,2,s,a)},useMemo:function(s,a){var l=Cn();a=a===void 0?null:a;var u=s();if(Na){si(!0);try{s()}finally{si(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=Cn();if(l!==void 0){var m=l(a);if(Na){si(!0);try{l(a)}finally{si(!1)}}}else m=a;return u.memoizedState=u.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},u.queue=s,s=s.dispatch=YA.bind(null,Lt,s),[u.memoizedState,s]},useRef:function(s){var a=Cn();return s={current:s},a.memoizedState=s},useState:function(s){s=Cg(s);var a=s.queue,l=I_.bind(null,Lt,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:kg,useDeferredValue:function(s,a){var l=Cn();return Ng(l,s,a)},useTransition:function(){var s=Cg(!1);return s=w_.bind(null,Lt,s.queue,!0,!1),Cn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=Lt,m=Cn();if(Xt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),me===null)throw Error(i(349));(Gt&127)!==0||Jy(u,a,l)}m.memoizedState=l;var p={value:l,getSnapshot:a};return m.queue=p,m_(e_.bind(null,u,p,s),[s]),u.flags|=2048,Mo(9,{destroy:void 0},t_.bind(null,u,p,l,a),null),l},useId:function(){var s=Cn(),a=me.identifierPrefix;if(Xt){var l=as,u=rs;l=(u&~(1<<32-Ne(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=ph++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=UA++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Mg,useFormState:u_,useActionState:u_,useOptimistic:function(s){var a=Cn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Og.bind(null,Lt,!0,l),l.dispatch=a,[s,a]},useMemoCache:wg,useCacheRefresh:function(){return Cn().memoizedState=$A.bind(null,Lt)},useEffectEvent:function(s){var a=Cn(),l={impl:s};return a.memoizedState=l,function(){if((re&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},zg={readContext:cn,use:_h,useCallback:x_,useContext:cn,useEffect:Ig,useImperativeHandle:v_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:T_,useReducer:bh,useRef:g_,useState:function(){return bh(Ds)},useDebugValue:kg,useDeferredValue:function(s,a){var l=Oe();return E_(l,fe.memoizedState,s,a)},useTransition:function(){var s=bh(Ds)[0],a=Oe().memoizedState;return[typeof s=="boolean"?s:ic(s),a]},useSyncExternalStore:Zy,useId:C_,useHostTransitionStatus:Mg,useFormState:h_,useActionState:h_,useOptimistic:function(s,a){var l=Oe();return s_(l,fe,s,a)},useMemoCache:wg,useCacheRefresh:R_};zg.useEffectEvent=p_;var M_={readContext:cn,use:_h,useCallback:x_,useContext:cn,useEffect:Ig,useImperativeHandle:v_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:T_,useReducer:Ag,useRef:g_,useState:function(){return Ag(Ds)},useDebugValue:kg,useDeferredValue:function(s,a){var l=Oe();return fe===null?Ng(l,s,a):E_(l,fe.memoizedState,s,a)},useTransition:function(){var s=Ag(Ds)[0],a=Oe().memoizedState;return[typeof s=="boolean"?s:ic(s),a]},useSyncExternalStore:Zy,useId:C_,useHostTransitionStatus:Mg,useFormState:d_,useActionState:d_,useOptimistic:function(s,a){var l=Oe();return fe!==null?s_(l,fe,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:wg,useCacheRefresh:R_};M_.useEffectEvent=p_;function Vg(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Pg={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=Jn(),m=yr(u);m.payload=a,l!=null&&(m.callback=l),a=_r(s,m,u),a!==null&&(Pn(a,s,u),Jl(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=Jn(),m=yr(u);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=_r(s,m,u),a!==null&&(Pn(a,s,u),Jl(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Jn(),u=yr(l);u.tag=2,a!=null&&(u.callback=a),a=_r(s,u,l),a!==null&&(Pn(a,s,l),Jl(a,s,l))}};function O_(s,a,l,u,m,p,v){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,v):a.prototype&&a.prototype.isPureReactComponent?!Gl(l,u)||!Gl(m,p):!0}function z_(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&Pg.enqueueReplaceState(a,a.state,null)}function Da(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}function V_(s){th(s)}function P_(s){console.error(s)}function L_(s){th(s)}function Eh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function j_(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Lg(s,a,l){return l=yr(l),l.tag=3,l.payload={element:null},l.callback=function(){Eh(s,a)},l}function U_(s){return s=yr(s),s.tag=3,s}function B_(s,a,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;s.payload=function(){return m(p)},s.callback=function(){j_(a,l,u)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){j_(a,l,u),typeof m!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function KA(s,a,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&So(a,l,m,!0),l=Qn.current,l!==null){switch(l.tag){case 31:case 13:return gi===null?zh():l.alternate===null&&Ae===0&&(Ae=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===uh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),cm(s,u,m)),!1;case 22:return l.flags|=65536,u===uh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),cm(s,u,m)),!1}throw Error(i(435,l.tag))}return cm(s,u,m),zh(),!1}if(Xt)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==ig&&(s=Error(i(422),{cause:u}),Kl(ui(s,l)))):(u!==ig&&(a=Error(i(423),{cause:u}),Kl(ui(a,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,u=ui(u,l),m=Lg(s.stateNode,u,m),gg(s,m),Ae!==4&&(Ae=2)),!1;var p=Error(i(520),{cause:u});if(p=ui(p,l),dc===null?dc=[p]:dc.push(p),Ae!==4&&(Ae=2),a===null)return!0;u=ui(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=Lg(l.stateNode,u,s),gg(l,s),!1;case 1:if(a=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(wr===null||!wr.has(p))))return l.flags|=65536,m&=-m,l.lanes|=m,m=U_(m),B_(m,s,l,u),gg(l,m),!1}l=l.return}while(l!==null);return!1}var jg=Error(i(461)),qe=!1;function un(s,a,l,u){a.child=s===null?Gy(a,null,l,u):ka(a,s.child,l,u)}function H_(s,a,l,u,m){l=l.render;var p=a.ref;if("ref"in u){var v={};for(var S in u)S!=="ref"&&(v[S]=u[S])}else v=u;return Aa(a),u=vg(s,a,l,v,p,m),S=xg(),s!==null&&!qe?(Tg(s,a,m),Ms(s,a,m)):(Xt&&S&&eg(a),a.flags|=1,un(s,a,u,m),a.child)}function F_(s,a,l,u,m){if(s===null){var p=l.type;return typeof p=="function"&&!Zd(p)&&p.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=p,q_(s,a,p,u,m)):(s=sh(l.type,null,u,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!Yg(s,m)){var v=p.memoizedProps;if(l=l.compare,l=l!==null?l:Gl,l(v,u)&&s.ref===a.ref)return Ms(s,a,m)}return a.flags|=1,s=Cs(p,u),s.ref=a.ref,s.return=a,a.child=s}function q_(s,a,l,u,m){if(s!==null){var p=s.memoizedProps;if(Gl(p,u)&&s.ref===a.ref)if(qe=!1,a.pendingProps=u=p,Yg(s,m))(s.flags&131072)!==0&&(qe=!0);else return a.lanes=s.lanes,Ms(s,a,m)}return Ug(s,a,l,u,m)}function G_(s,a,l,u){var m=u.children,p=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|l:l,s!==null){for(u=a.child=s.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return $_(s,a,p,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&lh(a,p!==null?p.cachePool:null),p!==null?Ky(a,p):pg(),Qy(a);else return u=a.lanes=536870912,$_(s,a,p!==null?p.baseLanes|l:l,l,u)}else p!==null?(lh(a,p.cachePool),Ky(a,p),vr(),a.memoizedState=null):(s!==null&&lh(a,null),pg(),vr());return un(s,a,m,l),a.child}function ac(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function $_(s,a,l,u,m){var p=ug();return p=p===null?null:{parent:He._currentValue,pool:p},a.memoizedState={baseLanes:l,cachePool:p},s!==null&&lh(a,null),pg(),Qy(a),s!==null&&So(s,a,u,!0),a.childLanes=m,null}function wh(s,a){return a=Ah({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Y_(s,a,l){return ka(a,s.child,null,l),s=wh(a,a.pendingProps),s.flags|=2,Xn(a),a.memoizedState=null,s}function QA(s,a,l){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Xt){if(u.mode==="hidden")return s=wh(a,u),a.lanes=536870912,ac(null,s);if(_g(a),(s=_e)?(s=rv(s,di),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:fr!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},l=ky(s),l.return=a,a.child=l,ln=a,_e=null)):s=null,s===null)throw gr(a);return a.lanes=536870912,null}return wh(a,u)}var p=s.memoizedState;if(p!==null){var v=p.dehydrated;if(_g(a),m)if(a.flags&256)a.flags&=-257,a=Y_(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(qe||So(s,a,l,!1),m=(l&s.childLanes)!==0,qe||m){if(u=me,u!==null&&(v=Cl(u,l),v!==0&&v!==p.retryLane))throw p.retryLane=v,Ta(s,v),Pn(u,s,v),jg;zh(),a=Y_(s,a,l)}else s=p.treeContext,_e=mi(v.nextSibling),ln=a,Xt=!0,dr=null,di=!1,s!==null&&My(a,s),a=wh(a,u),a.flags|=4096;return a}return s=Cs(s.child,{mode:u.mode,children:u.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Sh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function Ug(s,a,l,u,m){return Aa(a),l=vg(s,a,l,u,void 0,m),u=xg(),s!==null&&!qe?(Tg(s,a,m),Ms(s,a,m)):(Xt&&u&&eg(a),a.flags|=1,un(s,a,l,m),a.child)}function K_(s,a,l,u,m,p){return Aa(a),a.updateQueue=null,l=Wy(a,u,l,m),Xy(s),u=xg(),s!==null&&!qe?(Tg(s,a,p),Ms(s,a,p)):(Xt&&u&&eg(a),a.flags|=1,un(s,a,l,p),a.child)}function Q_(s,a,l,u,m){if(Aa(a),a.stateNode===null){var p=xo,v=l.contextType;typeof v=="object"&&v!==null&&(p=cn(v)),p=new l(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Pg,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},fg(a),v=l.contextType,p.context=typeof v=="object"&&v!==null?cn(v):xo,p.state=a.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(Vg(a,l,v,u),p.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&Pg.enqueueReplaceState(p,p.state,null),ec(a,u,p,m),tc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){p=a.stateNode;var S=a.memoizedProps,P=Da(l,S);p.props=P;var G=p.context,Z=l.contextType;v=xo,typeof Z=="object"&&Z!==null&&(v=cn(Z));var it=l.getDerivedStateFromProps;Z=typeof it=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||G!==v)&&z_(a,p,u,v),pr=!1;var $=a.memoizedState;p.state=$,ec(a,u,p,m),tc(),G=a.memoizedState,S||$!==G||pr?(typeof it=="function"&&(Vg(a,l,it,u),G=a.memoizedState),(P=pr||O_(a,l,P,u,$,G,v))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=G),p.props=u,p.state=G,p.context=v,u=P):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,dg(s,a),v=a.memoizedProps,Z=Da(l,v),p.props=Z,it=a.pendingProps,$=p.context,G=l.contextType,P=xo,typeof G=="object"&&G!==null&&(P=cn(G)),S=l.getDerivedStateFromProps,(G=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==it||$!==P)&&z_(a,p,u,P),pr=!1,$=a.memoizedState,p.state=$,ec(a,u,p,m),tc();var Q=a.memoizedState;v!==it||$!==Q||pr||s!==null&&s.dependencies!==null&&ah(s.dependencies)?(typeof S=="function"&&(Vg(a,l,S,u),Q=a.memoizedState),(Z=pr||O_(a,l,Z,u,$,Q,P)||s!==null&&s.dependencies!==null&&ah(s.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Q,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Q,P)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===s.memoizedProps&&$===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===s.memoizedProps&&$===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=Q),p.props=u,p.state=Q,p.context=P,u=Z):(typeof p.componentDidUpdate!="function"||v===s.memoizedProps&&$===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===s.memoizedProps&&$===s.memoizedState||(a.flags|=1024),u=!1)}return p=u,Sh(s,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&u?(a.child=ka(a,s.child,null,m),a.child=ka(a,null,l,m)):un(s,a,l,m),a.memoizedState=p.state,s=a.child):s=Ms(s,a,m),s}function X_(s,a,l,u){return wa(),a.flags|=256,un(s,a,l,u),a.child}var Bg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hg(s){return{baseLanes:s,cachePool:jy()}}function Fg(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Zn),s}function W_(s,a,l){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,v;if((v=p)||(v=s!==null&&s.memoizedState===null?!1:(Me.current&2)!==0),v&&(m=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,s===null){if(Xt){if(m?br(a):vr(),(s=_e)?(s=rv(s,di),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:fr!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},l=ky(s),l.return=a,a.child=l,ln=a,_e=null)):s=null,s===null)throw gr(a);return Sm(s)?a.lanes=32:a.lanes=536870912,null}var S=u.children;return u=u.fallback,m?(vr(),m=a.mode,S=Ah({mode:"hidden",children:S},m),u=Ea(u,m,l,null),S.return=a,u.return=a,S.sibling=u,a.child=S,u=a.child,u.memoizedState=Hg(l),u.childLanes=Fg(s,v,l),a.memoizedState=Bg,ac(null,u)):(br(a),qg(a,S))}var P=s.memoizedState;if(P!==null&&(S=P.dehydrated,S!==null)){if(p)a.flags&256?(br(a),a.flags&=-257,a=Gg(s,a,l)):a.memoizedState!==null?(vr(),a.child=s.child,a.flags|=128,a=null):(vr(),S=u.fallback,m=a.mode,u=Ah({mode:"visible",children:u.children},m),S=Ea(S,m,l,null),S.flags|=2,u.return=a,S.return=a,u.sibling=S,a.child=u,ka(a,s.child,null,l),u=a.child,u.memoizedState=Hg(l),u.childLanes=Fg(s,v,l),a.memoizedState=Bg,a=ac(null,u));else if(br(a),Sm(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var G=v.dgst;v=G,u=Error(i(419)),u.stack="",u.digest=v,Kl({value:u,source:null,stack:null}),a=Gg(s,a,l)}else if(qe||So(s,a,l,!1),v=(l&s.childLanes)!==0,qe||v){if(v=me,v!==null&&(u=Cl(v,l),u!==0&&u!==P.retryLane))throw P.retryLane=u,Ta(s,u),Pn(v,s,u),jg;wm(S)||zh(),a=Gg(s,a,l)}else wm(S)?(a.flags|=192,a.child=s.child,a=null):(s=P.treeContext,_e=mi(S.nextSibling),ln=a,Xt=!0,dr=null,di=!1,s!==null&&My(a,s),a=qg(a,u.children),a.flags|=4096);return a}return m?(vr(),S=u.fallback,m=a.mode,P=s.child,G=P.sibling,u=Cs(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,G!==null?S=Cs(G,S):(S=Ea(S,m,l,null),S.flags|=2),S.return=a,u.return=a,u.sibling=S,a.child=u,ac(null,u),u=a.child,S=s.child.memoizedState,S===null?S=Hg(l):(m=S.cachePool,m!==null?(P=He._currentValue,m=m.parent!==P?{parent:P,pool:P}:m):m=jy(),S={baseLanes:S.baseLanes|l,cachePool:m}),u.memoizedState=S,u.childLanes=Fg(s,v,l),a.memoizedState=Bg,ac(s.child,u)):(br(a),l=s.child,s=l.sibling,l=Cs(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(v=a.deletions,v===null?(a.deletions=[s],a.flags|=16):v.push(s)),a.child=l,a.memoizedState=null,l)}function qg(s,a){return a=Ah({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Ah(s,a){return s=Kn(22,s,null,a),s.lanes=0,s}function Gg(s,a,l){return ka(a,s.child,null,l),s=qg(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Z_(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),ag(s.return,a,l)}function $g(s,a,l,u,m,p){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m,treeForkCount:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=l,v.tailMode=m,v.treeForkCount=p)}function J_(s,a,l){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var v=Me.current,S=(v&2)!==0;if(S?(v=v&1|2,a.flags|=128):v&=1,ut(Me,v),un(s,a,u,l),u=Xt?Yl:0,!S&&s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Z_(s,l,a);else if(s.tag===19)Z_(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(l=a.child,m=null;l!==null;)s=l.alternate,s!==null&&gh(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),$g(a,!1,m,l,p,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&gh(s)===null){a.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}$g(a,!0,l,null,p,u);break;case"together":$g(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Ms(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Er|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(So(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=Cs(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Cs(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Yg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&ah(s)))}function XA(s,a,l){switch(a.tag){case 3:Ft(a,a.stateNode.containerInfo),mr(a,He,s.memoizedState.cache),wa();break;case 27:case 5:xt(a);break;case 4:Ft(a,a.stateNode.containerInfo);break;case 10:mr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,_g(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(br(a),a.flags|=128,null):(l&a.child.childLanes)!==0?W_(s,a,l):(br(a),s=Ms(s,a,l),s!==null?s.sibling:null);br(a);break;case 19:var m=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(So(s,a,l,!1),u=(l&a.childLanes)!==0),m){if(u)return J_(s,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ut(Me,Me.current),u)break;return null;case 22:return a.lanes=0,G_(s,a,l,a.pendingProps);case 24:mr(a,He,s.memoizedState.cache)}return Ms(s,a,l)}function tb(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)qe=!0;else{if(!Yg(s,l)&&(a.flags&128)===0)return qe=!1,XA(s,a,l);qe=(s.flags&131072)!==0}else qe=!1,Xt&&(a.flags&1048576)!==0&&Dy(a,Yl,a.index);switch(a.lanes=0,a.tag){case 16:t:{var u=a.pendingProps;if(s=Ra(a.elementType),a.type=s,typeof s=="function")Zd(s)?(u=Da(s,u),a.tag=1,a=Q_(null,a,s,u,l)):(a.tag=0,a=Ug(null,a,s,u,l));else{if(s!=null){var m=s.$$typeof;if(m===at){a.tag=11,a=H_(null,a,s,u,l);break t}else if(m===I){a.tag=14,a=F_(null,a,s,u,l);break t}}throw a=kt(s)||s,Error(i(306,a,""))}}return a;case 0:return Ug(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,m=Da(u,a.pendingProps),Q_(s,a,u,m,l);case 3:t:{if(Ft(a,a.stateNode.containerInfo),s===null)throw Error(i(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,dg(s,a),ec(a,u,null,l);var v=a.memoizedState;if(u=v.cache,mr(a,He,u),u!==p.cache&&og(a,[He],l,!0),tc(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=X_(s,a,u,l);break t}else if(u!==m){m=ui(Error(i(424)),a),Kl(m),a=X_(s,a,u,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(_e=mi(s.firstChild),ln=a,Xt=!0,dr=null,di=!0,l=Gy(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(wa(),u===m){a=Ms(s,a,l);break t}un(s,a,u,l)}a=a.child}return a;case 26:return Sh(s,a),s===null?(l=hv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Xt||(l=a.type,s=a.pendingProps,u=Hh(Y.current).createElement(l),u[je]=a,u[Je]=s,hn(u,l,s),Ue(u),a.stateNode=u):a.memoizedState=hv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return xt(a),s===null&&Xt&&(u=a.stateNode=lv(a.type,a.pendingProps,Y.current),ln=a,di=!0,m=_e,Rr(a.type)?(Am=m,_e=mi(u.firstChild)):_e=m),un(s,a,a.pendingProps.children,l),Sh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Xt&&((m=u=_e)&&(u=A2(u,a.type,a.pendingProps,di),u!==null?(a.stateNode=u,ln=a,_e=mi(u.firstChild),di=!1,m=!0):m=!1),m||gr(a)),xt(a),m=a.type,p=a.pendingProps,v=s!==null?s.memoizedProps:null,u=p.children,xm(m,p)?u=null:v!==null&&xm(m,v)&&(a.flags|=32),a.memoizedState!==null&&(m=vg(s,a,BA,null,null,l),xc._currentValue=m),Sh(s,a),un(s,a,u,l),a.child;case 6:return s===null&&Xt&&((s=l=_e)&&(l=C2(l,a.pendingProps,di),l!==null?(a.stateNode=l,ln=a,_e=null,s=!0):s=!1),s||gr(a)),null;case 13:return W_(s,a,l);case 4:return Ft(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=ka(a,null,u,l):un(s,a,u,l),a.child;case 11:return H_(s,a,a.type,a.pendingProps,l);case 7:return un(s,a,a.pendingProps,l),a.child;case 8:return un(s,a,a.pendingProps.children,l),a.child;case 12:return un(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,mr(a,a.type,u.value),un(s,a,u.children,l),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Aa(a),m=cn(m),u=u(m),a.flags|=1,un(s,a,u,l),a.child;case 14:return F_(s,a,a.type,a.pendingProps,l);case 15:return q_(s,a,a.type,a.pendingProps,l);case 19:return J_(s,a,l);case 31:return QA(s,a,l);case 22:return G_(s,a,l,a.pendingProps);case 24:return Aa(a),u=cn(He),s===null?(m=ug(),m===null&&(m=me,p=lg(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=l),m=p),a.memoizedState={parent:u,cache:m},fg(a),mr(a,He,m)):((s.lanes&l)!==0&&(dg(s,a),ec(a,null,null,l),tc()),m=s.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),mr(a,He,u)):(u=p.cache,mr(a,He,u),u!==m.cache&&og(a,[He],l,!0))),un(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Os(s){s.flags|=4}function Kg(s,a,l,u,m){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(Cb())s.flags|=8192;else throw Ia=uh,hg}else s.flags&=-16777217}function eb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!pv(a))if(Cb())s.flags|=8192;else throw Ia=uh,hg}function Ch(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Mu():536870912,s.lanes|=a,Po|=a)}function oc(s,a){if(!Xt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function be(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function WA(s,a,l){var u=a.pendingProps;switch(ng(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(a),null;case 1:return be(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ks(He),Ut(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(wo(a)?Os(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,sg())),be(a),null;case 26:var m=a.type,p=a.memoizedState;return s===null?(Os(a),p!==null?(be(a),eb(a,p)):(be(a),Kg(a,m,null,u,l))):p?p!==s.memoizedState?(Os(a),be(a),eb(a,p)):(be(a),a.flags&=-16777217):(s=s.memoizedProps,s!==u&&Os(a),be(a),Kg(a,m,s,u,l)),null;case 27:if(Re(a),l=Y.current,m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Os(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return be(a),null}s=ht.current,wo(a)?Oy(a):(s=lv(m,u,l),a.stateNode=s,Os(a))}return be(a),null;case 5:if(Re(a),m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Os(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return be(a),null}if(p=ht.current,wo(a))Oy(a);else{var v=Hh(Y.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(m,{is:u.is}):v.createElement(m)}}p[je]=a,p[Je]=u;t:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break t;for(;v.sibling===null;){if(v.return===null||v.return===a)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=p;t:switch(hn(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Os(a)}}return be(a),Kg(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&Os(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(s=Y.current,wo(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,m=ln,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}s[je]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Wb(s.nodeValue,l)),s||gr(a,!0)}else s=Hh(s).createTextNode(u),s[je]=a,a.stateNode=s}return be(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(u=wo(a),l!==null){if(s===null){if(!u)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[je]=a}else wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;be(a),s=!1}else l=sg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(Xn(a),a):(Xn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return be(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=wo(a),u!==null&&u.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[je]=a}else wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;be(a),m=!1}else m=sg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(Xn(a),a):(Xn(a),null)}return Xn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,s=s!==null&&s.memoizedState!==null,l&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Ch(a,a.updateQueue),be(a),null);case 4:return Ut(),s===null&&pm(a.stateNode.containerInfo),be(a),null;case 10:return ks(a.type),be(a),null;case 19:if(X(Me),u=a.memoizedState,u===null)return be(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)oc(u,!1);else{if(Ae!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=gh(s),p!==null){for(a.flags|=128,oc(u,!1),s=p.updateQueue,a.updateQueue=s,Ch(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Iy(l,s),l=l.sibling;return ut(Me,Me.current&1|2),Xt&&Rs(a,u.treeForkCount),a.child}s=s.sibling}u.tail!==null&&Zt()>Dh&&(a.flags|=128,m=!0,oc(u,!1),a.lanes=4194304)}else{if(!m)if(s=gh(p),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,Ch(a,s),oc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Xt)return be(a),null}else 2*Zt()-u.renderingStartTime>Dh&&l!==536870912&&(a.flags|=128,m=!0,oc(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(s=u.last,s!==null?s.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Zt(),s.sibling=null,l=Me.current,ut(Me,m?l&1|2:l&1),Xt&&Rs(a,u.treeForkCount),s):(be(a),null);case 22:case 23:return Xn(a),yg(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(be(a),a.subtreeFlags&6&&(a.flags|=8192)):be(a),l=a.updateQueue,l!==null&&Ch(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&X(Ca),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ks(He),be(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function ZA(s,a){switch(ng(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ks(He),Ut(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Re(a),null;case 31:if(a.memoizedState!==null){if(Xn(a),a.alternate===null)throw Error(i(340));wa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Xn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));wa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return X(Me),null;case 4:return Ut(),null;case 10:return ks(a.type),null;case 22:case 23:return Xn(a),yg(),s!==null&&X(Ca),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ks(He),null;case 25:return null;default:return null}}function nb(s,a){switch(ng(a),a.tag){case 3:ks(He),Ut();break;case 26:case 27:case 5:Re(a);break;case 4:Ut();break;case 31:a.memoizedState!==null&&Xn(a);break;case 13:Xn(a);break;case 19:X(Me);break;case 10:ks(a.type);break;case 22:case 23:Xn(a),yg(),s!==null&&X(Ca);break;case 24:ks(He)}}function lc(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&s)===s){u=void 0;var p=l.create,v=l.inst;u=p(),v.destroy=u}l=l.next}while(l!==m)}}catch(S){ce(a,a.return,S)}}function xr(s,a,l){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&s)===s){var v=u.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,m=a;var P=l,G=S;try{G()}catch(Z){ce(m,P,Z)}}}u=u.next}while(u!==p)}}catch(Z){ce(a,a.return,Z)}}function ib(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{Yy(a,l)}catch(u){ce(s,s.return,u)}}}function sb(s,a,l){l.props=Da(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ce(s,a,u)}}function cc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(m){ce(s,a,m)}}function os(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){ce(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){ce(s,a,m)}else l.current=null}function rb(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){ce(s,s.return,m)}}function Qg(s,a,l){try{var u=s.stateNode;v2(u,s.type,l,a),u[Je]=a}catch(m){ce(s,s.return,m)}}function ab(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Rr(s.type)||s.tag===4}function Xg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||ab(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Rr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Wg(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Ai));else if(u!==4&&(u===27&&Rr(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Wg(s,a,l),s=s.sibling;s!==null;)Wg(s,a,l),s=s.sibling}function Rh(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&Rr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Rh(s,a,l),s=s.sibling;s!==null;)Rh(s,a,l),s=s.sibling}function ob(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);hn(a,u,l),a[je]=s,a[Je]=l}catch(p){ce(s,s.return,p)}}var zs=!1,Ge=!1,Zg=!1,lb=typeof WeakSet=="function"?WeakSet:Set,en=null;function JA(s,a){if(s=s.containerInfo,bm=Qh,s=vy(s),Gd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var v=0,S=-1,P=-1,G=0,Z=0,it=s,$=null;e:for(;;){for(var Q;it!==l||m!==0&&it.nodeType!==3||(S=v+m),it!==p||u!==0&&it.nodeType!==3||(P=v+u),it.nodeType===3&&(v+=it.nodeValue.length),(Q=it.firstChild)!==null;)$=it,it=Q;for(;;){if(it===s)break e;if($===l&&++G===m&&(S=v),$===p&&++Z===u&&(P=v),(Q=it.nextSibling)!==null)break;it=$,$=it.parentNode}it=Q}l=S===-1||P===-1?null:{start:S,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(vm={focusedElem:s,selectionRange:l},Qh=!1,en=a;en!==null;)if(a=en,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,en=s;else for(;en!==null;){switch(a=en,p=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)m=s[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=a,m=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var _t=Da(l.type,m);s=u.getSnapshotBeforeUpdate(_t,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ct){ce(l,l.return,Ct)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Em(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Em(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,en=s;break}en=a.return}}function cb(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Ps(s,l),u&4&&lc(5,l);break;case 1:if(Ps(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(v){ce(l,l.return,v)}else{var m=Da(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(v){ce(l,l.return,v)}}u&64&&ib(l),u&512&&cc(l,l.return);break;case 3:if(Ps(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Yy(s,a)}catch(v){ce(l,l.return,v)}}break;case 27:a===null&&u&4&&ob(l);case 26:case 5:Ps(s,l),a===null&&u&4&&rb(l),u&512&&cc(l,l.return);break;case 12:Ps(s,l);break;case 31:Ps(s,l),u&4&&fb(s,l);break;case 13:Ps(s,l),u&4&&db(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=l2.bind(null,l),R2(s,l))));break;case 22:if(u=l.memoizedState!==null||zs,!u){a=a!==null&&a.memoizedState!==null||Ge,m=zs;var p=Ge;zs=u,(Ge=a)&&!p?Ls(s,l,(l.subtreeFlags&8772)!==0):Ps(s,l),zs=m,Ge=p}break;case 30:break;default:Ps(s,l)}}function ub(s){var a=s.alternate;a!==null&&(s.alternate=null,ub(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ao(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ee=null,Mn=!1;function Vs(s,a,l){for(l=l.child;l!==null;)hb(s,a,l),l=l.sibling}function hb(s,a,l){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ti,l)}catch{}switch(l.tag){case 26:Ge||os(l,a),Vs(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ge||os(l,a);var u=Ee,m=Mn;Rr(l.type)&&(Ee=l.stateNode,Mn=!1),Vs(s,a,l),_c(l.stateNode),Ee=u,Mn=m;break;case 5:Ge||os(l,a);case 6:if(u=Ee,m=Mn,Ee=null,Vs(s,a,l),Ee=u,Mn=m,Ee!==null)if(Mn)try{(Ee.nodeType===9?Ee.body:Ee.nodeName==="HTML"?Ee.ownerDocument.body:Ee).removeChild(l.stateNode)}catch(p){ce(l,a,p)}else try{Ee.removeChild(l.stateNode)}catch(p){ce(l,a,p)}break;case 18:Ee!==null&&(Mn?(s=Ee,iv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Go(s)):iv(Ee,l.stateNode));break;case 4:u=Ee,m=Mn,Ee=l.stateNode.containerInfo,Mn=!0,Vs(s,a,l),Ee=u,Mn=m;break;case 0:case 11:case 14:case 15:xr(2,l,a),Ge||xr(4,l,a),Vs(s,a,l);break;case 1:Ge||(os(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&sb(l,a,u)),Vs(s,a,l);break;case 21:Vs(s,a,l);break;case 22:Ge=(u=Ge)||l.memoizedState!==null,Vs(s,a,l),Ge=u;break;default:Vs(s,a,l)}}function fb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Go(s)}catch(l){ce(a,a.return,l)}}}function db(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Go(s)}catch(l){ce(a,a.return,l)}}function t2(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new lb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new lb),a;default:throw Error(i(435,s.tag))}}function Ih(s,a){var l=t2(s);a.forEach(function(u){if(!l.has(u)){l.add(u);var m=c2.bind(null,s,u);u.then(m,m)}})}function On(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],p=s,v=a,S=v;t:for(;S!==null;){switch(S.tag){case 27:if(Rr(S.type)){Ee=S.stateNode,Mn=!1;break t}break;case 5:Ee=S.stateNode,Mn=!1;break t;case 3:case 4:Ee=S.stateNode.containerInfo,Mn=!0;break t}S=S.return}if(Ee===null)throw Error(i(160));hb(p,v,m),Ee=null,Mn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)gb(a,s),a=a.sibling}var Di=null;function gb(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:On(a,s),zn(s),u&4&&(xr(3,s,s.return),lc(3,s),xr(5,s,s.return));break;case 1:On(a,s),zn(s),u&512&&(Ge||l===null||os(l,l.return)),u&64&&zs&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=Di;if(On(a,s),zn(s),u&512&&(Ge||l===null||os(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Yi]||p[je]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),hn(p,u,l),p[je]=s,Ue(p),u=p;break t;case"link":var v=gv("link","href",m).get(u+(l.href||""));if(v){for(var S=0;S<v.length;S++)if(p=v[S],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(S,1);break e}}p=m.createElement(u),hn(p,u,l),m.head.appendChild(p);break;case"meta":if(v=gv("meta","content",m).get(u+(l.content||""))){for(S=0;S<v.length;S++)if(p=v[S],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(S,1);break e}}p=m.createElement(u),hn(p,u,l),m.head.appendChild(p);break;default:throw Error(i(468,u))}p[je]=s,Ue(p),u=p}s.stateNode=u}else mv(m,s.type,s.stateNode);else s.stateNode=dv(m,u,s.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?mv(m,s.type,s.stateNode):dv(m,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Qg(s,s.memoizedProps,l.memoizedProps)}break;case 27:On(a,s),zn(s),u&512&&(Ge||l===null||os(l,l.return)),l!==null&&u&4&&Qg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(On(a,s),zn(s),u&512&&(Ge||l===null||os(l,l.return)),s.flags&32){m=s.stateNode;try{Dn(m,"")}catch(_t){ce(s,s.return,_t)}}u&4&&s.stateNode!=null&&(m=s.memoizedProps,Qg(s,m,l!==null?l.memoizedProps:m)),u&1024&&(Zg=!0);break;case 6:if(On(a,s),zn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(_t){ce(s,s.return,_t)}}break;case 3:if(Gh=null,m=Di,Di=Fh(a.containerInfo),On(a,s),Di=m,zn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Go(a.containerInfo)}catch(_t){ce(s,s.return,_t)}Zg&&(Zg=!1,mb(s));break;case 4:u=Di,Di=Fh(s.stateNode.containerInfo),On(a,s),zn(s),Di=u;break;case 12:On(a,s),zn(s);break;case 31:On(a,s),zn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ih(s,u)));break;case 13:On(a,s),zn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Nh=Zt()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ih(s,u)));break;case 22:m=s.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,G=zs,Z=Ge;if(zs=G||m,Ge=Z||P,On(a,s),Ge=Z,zs=G,zn(s),u&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||P||zs||Ge||Ma(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){P=l=a;try{if(p=P.stateNode,m)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=P.stateNode;var it=P.memoizedProps.style,$=it!=null&&it.hasOwnProperty("display")?it.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(_t){ce(P,P.return,_t)}}}else if(a.tag===6){if(l===null){P=a;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch(_t){ce(P,P.return,_t)}}}else if(a.tag===18){if(l===null){P=a;try{var Q=P.stateNode;m?sv(Q,!0):sv(P.stateNode,!1)}catch(_t){ce(P,P.return,_t)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Ih(s,l))));break;case 19:On(a,s),zn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ih(s,u)));break;case 30:break;case 21:break;default:On(a,s),zn(s)}}function zn(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(ab(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,p=Xg(s);Rh(s,p,m);break;case 5:var v=l.stateNode;l.flags&32&&(Dn(v,""),l.flags&=-33);var S=Xg(s);Rh(s,S,v);break;case 3:case 4:var P=l.stateNode.containerInfo,G=Xg(s);Wg(s,G,P);break;default:throw Error(i(161))}}catch(Z){ce(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function mb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;mb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Ps(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)cb(s,a.alternate,a),a=a.sibling}function Ma(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:xr(4,a,a.return),Ma(a);break;case 1:os(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&sb(a,a.return,l),Ma(a);break;case 27:_c(a.stateNode);case 26:case 5:os(a,a.return),Ma(a);break;case 22:a.memoizedState===null&&Ma(a);break;case 30:Ma(a);break;default:Ma(a)}s=s.sibling}}function Ls(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=s,p=a,v=p.flags;switch(p.tag){case 0:case 11:case 15:Ls(m,p,l),lc(4,p);break;case 1:if(Ls(m,p,l),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(G){ce(u,u.return,G)}if(u=p,m=u.updateQueue,m!==null){var S=u.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)$y(P[m],S)}catch(G){ce(u,u.return,G)}}l&&v&64&&ib(p),cc(p,p.return);break;case 27:ob(p);case 26:case 5:Ls(m,p,l),l&&u===null&&v&4&&rb(p),cc(p,p.return);break;case 12:Ls(m,p,l);break;case 31:Ls(m,p,l),l&&v&4&&fb(m,p);break;case 13:Ls(m,p,l),l&&v&4&&db(m,p);break;case 22:p.memoizedState===null&&Ls(m,p,l),cc(p,p.return);break;case 30:break;default:Ls(m,p,l)}a=a.sibling}}function Jg(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Ql(l))}function tm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ql(s))}function Mi(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)pb(s,a,l,u),a=a.sibling}function pb(s,a,l,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(s,a,l,u),m&2048&&lc(9,a);break;case 1:Mi(s,a,l,u);break;case 3:Mi(s,a,l,u),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ql(s)));break;case 12:if(m&2048){Mi(s,a,l,u),s=a.stateNode;try{var p=a.memoizedProps,v=p.id,S=p.onPostCommit;typeof S=="function"&&S(v,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){ce(a,a.return,P)}}else Mi(s,a,l,u);break;case 31:Mi(s,a,l,u);break;case 13:Mi(s,a,l,u);break;case 23:break;case 22:p=a.stateNode,v=a.alternate,a.memoizedState!==null?p._visibility&2?Mi(s,a,l,u):uc(s,a):p._visibility&2?Mi(s,a,l,u):(p._visibility|=2,Oo(s,a,l,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&Jg(v,a);break;case 24:Mi(s,a,l,u),m&2048&&tm(a.alternate,a);break;default:Mi(s,a,l,u)}}function Oo(s,a,l,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=s,v=a,S=l,P=u,G=v.flags;switch(v.tag){case 0:case 11:case 15:Oo(p,v,S,P,m),lc(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?Oo(p,v,S,P,m):uc(p,v):(Z._visibility|=2,Oo(p,v,S,P,m)),m&&G&2048&&Jg(v.alternate,v);break;case 24:Oo(p,v,S,P,m),m&&G&2048&&tm(v.alternate,v);break;default:Oo(p,v,S,P,m)}a=a.sibling}}function uc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,m=u.flags;switch(u.tag){case 22:uc(l,u),m&2048&&Jg(u.alternate,u);break;case 24:uc(l,u),m&2048&&tm(u.alternate,u);break;default:uc(l,u)}a=a.sibling}}var hc=8192;function zo(s,a,l){if(s.subtreeFlags&hc)for(s=s.child;s!==null;)yb(s,a,l),s=s.sibling}function yb(s,a,l){switch(s.tag){case 26:zo(s,a,l),s.flags&hc&&s.memoizedState!==null&&U2(l,Di,s.memoizedState,s.memoizedProps);break;case 5:zo(s,a,l);break;case 3:case 4:var u=Di;Di=Fh(s.stateNode.containerInfo),zo(s,a,l),Di=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=hc,hc=16777216,zo(s,a,l),hc=u):zo(s,a,l));break;default:zo(s,a,l)}}function _b(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function fc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];en=u,vb(u,s)}_b(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)bb(s),s=s.sibling}function bb(s){switch(s.tag){case 0:case 11:case 15:fc(s),s.flags&2048&&xr(9,s,s.return);break;case 3:fc(s);break;case 12:fc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,kh(s)):fc(s);break;default:fc(s)}}function kh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];en=u,vb(u,s)}_b(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:xr(8,a,a.return),kh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,kh(a));break;default:kh(a)}s=s.sibling}}function vb(s,a){for(;en!==null;){var l=en;switch(l.tag){case 0:case 11:case 15:xr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ql(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,en=u;else t:for(l=s;en!==null;){u=en;var m=u.sibling,p=u.return;if(ub(u),u===l){en=null;break t}if(m!==null){m.return=p,en=m;break t}en=p}}}var e2={getCacheForType:function(s){var a=cn(He),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return cn(He).controller.signal}},n2=typeof WeakMap=="function"?WeakMap:Map,re=0,me=null,Bt=null,Gt=0,le=0,Wn=null,Tr=!1,Vo=!1,em=!1,js=0,Ae=0,Er=0,Oa=0,nm=0,Zn=0,Po=0,dc=null,Vn=null,im=!1,Nh=0,xb=0,Dh=1/0,Mh=null,wr=null,Qe=0,Sr=null,Lo=null,Us=0,sm=0,rm=null,Tb=null,gc=0,am=null;function Jn(){return(re&2)!==0&&Gt!==0?Gt&-Gt:q.T!==null?fm():Ou()}function Eb(){if(Zn===0)if((Gt&536870912)===0||Xt){var s=oa;oa<<=1,(oa&3932160)===0&&(oa=262144),Zn=s}else Zn=536870912;return s=Qn.current,s!==null&&(s.flags|=32),Zn}function Pn(s,a,l){(s===me&&(le===2||le===9)||s.cancelPendingCommit!==null)&&(jo(s,0),Ar(s,Gt,Zn,!1)),la(s,l),((re&2)===0||s!==me)&&(s===me&&((re&2)===0&&(Oa|=l),Ae===4&&Ar(s,Gt,Zn,!1)),ls(s))}function wb(s,a,l){if((re&6)!==0)throw Error(i(327));var u=!l&&(a&127)===0&&(a&s.expiredLanes)===0||Ei(s,a),m=u?r2(s,a):lm(s,a,!0),p=u;do{if(m===0){Vo&&!u&&Ar(s,a,0,!1);break}else{if(l=s.current.alternate,p&&!i2(l)){m=lm(s,a,!1),p=!1;continue}if(m===2){if(p=a,s.errorRecoveryDisabledLanes&p)var v=0;else v=s.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;t:{var S=s;m=dc;var P=S.current.memoizedState.isDehydrated;if(P&&(jo(S,v).flags|=256),v=lm(S,v,!1),v!==2){if(em&&!P){S.errorRecoveryDisabledLanes|=p,Oa|=p,m=4;break t}p=Vn,Vn=m,p!==null&&(Vn===null?Vn=p:Vn.push.apply(Vn,p))}m=v}if(p=!1,m!==2)continue}}if(m===1){jo(s,0),Ar(s,a,0,!0);break}t:{switch(u=s,p=m,p){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ar(u,a,Zn,!Tr);break t;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=Nh+300-Zt(),10<m)){if(Ar(u,a,Zn,!Tr),qi(u,0,!0)!==0)break t;Us=a,u.timeoutHandle=ev(Sb.bind(null,u,l,Vn,Mh,im,a,Zn,Oa,Po,Tr,p,"Throttled",-0,0),m);break t}Sb(u,l,Vn,Mh,im,a,Zn,Oa,Po,Tr,p,null,-0,0)}}break}while(!0);ls(s)}function Sb(s,a,l,u,m,p,v,S,P,G,Z,it,$,Q){if(s.timeoutHandle=-1,it=a.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ai},yb(a,p,it);var _t=(p&62914560)===p?Nh-Zt():(p&4194048)===p?xb-Zt():0;if(_t=B2(it,_t),_t!==null){Us=p,s.cancelPendingCommit=_t(Mb.bind(null,s,a,p,l,u,m,v,S,P,Z,it,null,$,Q)),Ar(s,p,v,!G);return}}Mb(s,a,p,l,u,m,v,S,P)}function i2(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],p=m.getSnapshot;m=m.value;try{if(!Yn(p(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ar(s,a,l,u){a&=~nm,a&=~Oa,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var m=a;0<m;){var p=31-Ne(m),v=1<<p;u[p]=-1,m&=~v}l!==0&&ca(s,l,a)}function Oh(){return(re&6)===0?(mc(0),!1):!0}function om(){if(Bt!==null){if(le===0)var s=Bt.return;else s=Bt,Is=Sa=null,Eg(s),Io=null,Wl=0,s=Bt;for(;s!==null;)nb(s.alternate,s),s=s.return;Bt=null}}function jo(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,E2(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Us=0,om(),me=s,Bt=l=Cs(s.current,null),Gt=a,le=0,Wn=null,Tr=!1,Vo=Ei(s,a),em=!1,Po=Zn=nm=Oa=Er=Ae=0,Vn=dc=null,im=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var m=31-Ne(u),p=1<<m;a|=s[m],u&=~p}return js=a,eh(),l}function Ab(s,a){Lt=null,q.H=rc,a===Ro||a===ch?(a=Hy(),le=3):a===hg?(a=Hy(),le=4):le=a===jg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wn=a,Bt===null&&(Ae=1,Eh(s,ui(a,s.current)))}function Cb(){var s=Qn.current;return s===null?!0:(Gt&4194048)===Gt?gi===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?s===gi:!1}function Rb(){var s=q.H;return q.H=rc,s===null?rc:s}function Ib(){var s=q.A;return q.A=e2,s}function zh(){Ae=4,Tr||(Gt&4194048)!==Gt&&Qn.current!==null||(Vo=!0),(Er&134217727)===0&&(Oa&134217727)===0||me===null||Ar(me,Gt,Zn,!1)}function lm(s,a,l){var u=re;re|=2;var m=Rb(),p=Ib();(me!==s||Gt!==a)&&(Mh=null,jo(s,a)),a=!1;var v=Ae;t:do try{if(le!==0&&Bt!==null){var S=Bt,P=Wn;switch(le){case 8:om(),v=6;break t;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var G=le;if(le=0,Wn=null,Uo(s,S,P,G),l&&Vo){v=0;break t}break;default:G=le,le=0,Wn=null,Uo(s,S,P,G)}}s2(),v=Ae;break}catch(Z){Ab(s,Z)}while(!0);return a&&s.shellSuspendCounter++,Is=Sa=null,re=u,q.H=m,q.A=p,Bt===null&&(me=null,Gt=0,eh()),v}function s2(){for(;Bt!==null;)kb(Bt)}function r2(s,a){var l=re;re|=2;var u=Rb(),m=Ib();me!==s||Gt!==a?(Mh=null,Dh=Zt()+500,jo(s,a)):Vo=Ei(s,a);t:do try{if(le!==0&&Bt!==null){a=Bt;var p=Wn;e:switch(le){case 1:le=0,Wn=null,Uo(s,a,p,1);break;case 2:case 9:if(Uy(p)){le=0,Wn=null,Nb(a);break}a=function(){le!==2&&le!==9||me!==s||(le=7),ls(s)},p.then(a,a);break t;case 3:le=7;break t;case 4:le=5;break t;case 7:Uy(p)?(le=0,Wn=null,Nb(a)):(le=0,Wn=null,Uo(s,a,p,7));break;case 5:var v=null;switch(Bt.tag){case 26:v=Bt.memoizedState;case 5:case 27:var S=Bt;if(v?pv(v):S.stateNode.complete){le=0,Wn=null;var P=S.sibling;if(P!==null)Bt=P;else{var G=S.return;G!==null?(Bt=G,Vh(G)):Bt=null}break e}}le=0,Wn=null,Uo(s,a,p,5);break;case 6:le=0,Wn=null,Uo(s,a,p,6);break;case 8:om(),Ae=6;break t;default:throw Error(i(462))}}a2();break}catch(Z){Ab(s,Z)}while(!0);return Is=Sa=null,q.H=u,q.A=m,re=l,Bt!==null?0:(me=null,Gt=0,eh(),Ae)}function a2(){for(;Bt!==null&&!Mt();)kb(Bt)}function kb(s){var a=tb(s.alternate,s,js);s.memoizedProps=s.pendingProps,a===null?Vh(s):Bt=a}function Nb(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=K_(l,a,a.pendingProps,a.type,void 0,Gt);break;case 11:a=K_(l,a,a.pendingProps,a.type.render,a.ref,Gt);break;case 5:Eg(a);default:nb(l,a),a=Bt=Iy(a,js),a=tb(l,a,js)}s.memoizedProps=s.pendingProps,a===null?Vh(s):Bt=a}function Uo(s,a,l,u){Is=Sa=null,Eg(a),Io=null,Wl=0;var m=a.return;try{if(KA(s,m,a,l,Gt)){Ae=1,Eh(s,ui(l,s.current)),Bt=null;return}}catch(p){if(m!==null)throw Bt=m,p;Ae=1,Eh(s,ui(l,s.current)),Bt=null;return}a.flags&32768?(Xt||u===1?s=!0:Vo||(Gt&536870912)!==0?s=!1:(Tr=s=!0,(u===2||u===9||u===3||u===6)&&(u=Qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Db(a,s)):Vh(a)}function Vh(s){var a=s;do{if((a.flags&32768)!==0){Db(a,Tr);return}s=a.return;var l=WA(a.alternate,a,js);if(l!==null){Bt=l;return}if(a=a.sibling,a!==null){Bt=a;return}Bt=a=s}while(a!==null);Ae===0&&(Ae=5)}function Db(s,a){do{var l=ZA(s.alternate,s);if(l!==null){l.flags&=32767,Bt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Bt=s;return}Bt=s=l}while(s!==null);Ae=6,Bt=null}function Mb(s,a,l,u,m,p,v,S,P){s.cancelPendingCommit=null;do Ph();while(Qe!==0);if((re&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(p=a.lanes|a.childLanes,p|=Xd,Bd(s,l,p,v,S,P),s===me&&(Bt=me=null,Gt=0),Lo=a,Sr=s,Us=l,sm=p,rm=m,Tb=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,u2(qn,function(){return Lb(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=q.T,q.T=null,m=tt.p,tt.p=2,v=re,re|=4;try{JA(s,a,l)}finally{re=v,tt.p=m,q.T=u}}Qe=1,Ob(),zb(),Vb()}}function Ob(){if(Qe===1){Qe=0;var s=Sr,a=Lo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=q.T,q.T=null;var u=tt.p;tt.p=2;var m=re;re|=4;try{gb(a,s);var p=vm,v=vy(s.containerInfo),S=p.focusedElem,P=p.selectionRange;if(v!==S&&S&&S.ownerDocument&&by(S.ownerDocument.documentElement,S)){if(P!==null&&Gd(S)){var G=P.start,Z=P.end;if(Z===void 0&&(Z=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(Z,S.value.length);else{var it=S.ownerDocument||document,$=it&&it.defaultView||window;if($.getSelection){var Q=$.getSelection(),_t=S.textContent.length,Ct=Math.min(P.start,_t),ge=P.end===void 0?Ct:Math.min(P.end,_t);!Q.extend&&Ct>ge&&(v=ge,ge=Ct,Ct=v);var B=_y(S,Ct),j=_y(S,ge);if(B&&j&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==j.node||Q.focusOffset!==j.offset)){var F=it.createRange();F.setStart(B.node,B.offset),Q.removeAllRanges(),Ct>ge?(Q.addRange(F),Q.extend(j.node,j.offset)):(F.setEnd(j.node,j.offset),Q.addRange(F))}}}}for(it=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&it.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<it.length;S++){var et=it[S];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Qh=!!bm,vm=bm=null}finally{re=m,tt.p=u,q.T=l}}s.current=a,Qe=2}}function zb(){if(Qe===2){Qe=0;var s=Sr,a=Lo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=q.T,q.T=null;var u=tt.p;tt.p=2;var m=re;re|=4;try{cb(s,a.alternate,a)}finally{re=m,tt.p=u,q.T=l}}Qe=3}}function Vb(){if(Qe===4||Qe===3){Qe=0,qt();var s=Sr,a=Lo,l=Us,u=Tb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Qe=5:(Qe=0,Lo=Sr=null,Pb(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(wr=null),Es(l),a=a.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ti,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=q.T,m=tt.p,tt.p=2,q.T=null;try{for(var p=s.onRecoverableError,v=0;v<u.length;v++){var S=u[v];p(S.value,{componentStack:S.stack})}}finally{q.T=a,tt.p=m}}(Us&3)!==0&&Ph(),ls(s),m=s.pendingLanes,(l&261930)!==0&&(m&42)!==0?s===am?gc++:(gc=0,am=s):gc=0,mc(0)}}function Pb(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Ql(a)))}function Ph(){return Ob(),zb(),Vb(),Lb()}function Lb(){if(Qe!==5)return!1;var s=Sr,a=sm;sm=0;var l=Es(Us),u=q.T,m=tt.p;try{tt.p=32>l?32:l,q.T=null,l=rm,rm=null;var p=Sr,v=Us;if(Qe=0,Lo=Sr=null,Us=0,(re&6)!==0)throw Error(i(331));var S=re;if(re|=4,bb(p.current),pb(p,p.current,v,l),re=S,mc(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ti,p)}catch{}return!0}finally{tt.p=m,q.T=u,Pb(s,a)}}function jb(s,a,l){a=ui(l,a),a=Lg(s.stateNode,a,2),s=_r(s,a,2),s!==null&&(la(s,2),ls(s))}function ce(s,a,l){if(s.tag===3)jb(s,s,l);else for(;a!==null;){if(a.tag===3){jb(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(wr===null||!wr.has(u))){s=ui(l,s),l=U_(2),u=_r(a,l,2),u!==null&&(B_(l,u,a,s),la(u,2),ls(u));break}}a=a.return}}function cm(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new n2;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(l)||(em=!0,m.add(l),s=o2.bind(null,s,a,l),a.then(s,s))}function o2(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,me===s&&(Gt&l)===l&&(Ae===4||Ae===3&&(Gt&62914560)===Gt&&300>Zt()-Nh?(re&2)===0&&jo(s,0):nm|=l,Po===Gt&&(Po=0)),ls(s)}function Ub(s,a){a===0&&(a=Mu()),s=Ta(s,a),s!==null&&(la(s,a),ls(s))}function l2(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),Ub(s,l)}function c2(s,a){var l=0;switch(s.tag){case 31:case 13:var u=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),Ub(s,l)}function u2(s,a){return ct(s,a)}var Lh=null,Bo=null,um=!1,jh=!1,hm=!1,Cr=0;function ls(s){s!==Bo&&s.next===null&&(Bo===null?Lh=Bo=s:Bo=Bo.next=s),jh=!0,um||(um=!0,f2())}function mc(s,a){if(!hm&&jh){hm=!0;do for(var l=!1,u=Lh;u!==null;){if(s!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var v=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-Ne(42|s)+1)-1,p&=m&~(v&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,qb(u,p))}else p=Gt,p=qi(u,u===me?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ei(u,p)||(l=!0,qb(u,p));u=u.next}while(l);hm=!1}}function h2(){Bb()}function Bb(){jh=um=!1;var s=0;Cr!==0&&T2()&&(s=Cr);for(var a=Zt(),l=null,u=Lh;u!==null;){var m=u.next,p=Hb(u,a);p===0?(u.next=null,l===null?Lh=m:l.next=m,m===null&&(Bo=l)):(l=u,(s!==0||(p&3)!==0)&&(jh=!0)),u=m}Qe!==0&&Qe!==5||mc(s),Cr!==0&&(Cr=0)}function Hb(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,m=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var v=31-Ne(p),S=1<<v,P=m[v];P===-1?((S&l)===0||(S&u)!==0)&&(m[v]=Ud(S,a)):P<=a&&(s.expiredLanes|=S),p&=~S}if(a=me,l=Gt,l=qi(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(le===2||le===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Et(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Ei(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&Et(u),Es(l)){case 2:case 8:l=Sn;break;case 32:l=qn;break;case 268435456:l=ii;break;default:l=qn}return u=Fb.bind(null,s),l=ct(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&Et(u),s.callbackPriority=2,s.callbackNode=null,2}function Fb(s,a){if(Qe!==0&&Qe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Ph()&&s.callbackNode!==l)return null;var u=Gt;return u=qi(s,s===me?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(wb(s,u,a),Hb(s,Zt()),s.callbackNode!=null&&s.callbackNode===l?Fb.bind(null,s):null)}function qb(s,a){if(Ph())return null;wb(s,a,!0)}function f2(){w2(function(){(re&6)!==0?ct(mn,h2):Bb()})}function fm(){if(Cr===0){var s=Ao;s===0&&(s=Hi,Hi<<=1,(Hi&261888)===0&&(Hi=256)),Cr=s}return Cr}function Gb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:uo(""+s)}function $b(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function d2(s,a,l,u,m){if(a==="submit"&&l&&l.stateNode===m){var p=Gb((m[Je]||null).action),v=u.submitter;v&&(a=(a=v[Je]||null)?Gb(a.formAction):v.getAttribute("formAction"),a!==null&&(p=a,v=null));var S=new es("action","action",null,u,m);s.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Cr!==0){var P=v?$b(m,v):new FormData(m);Dg(l,{pending:!0,data:P,method:m.method,action:p},null,P)}}else typeof p=="function"&&(S.preventDefault(),P=v?$b(m,v):new FormData(m),Dg(l,{pending:!0,data:P,method:m.method,action:p},p,P))},currentTarget:m}]})}}for(var dm=0;dm<Qd.length;dm++){var gm=Qd[dm],g2=gm.toLowerCase(),m2=gm[0].toUpperCase()+gm.slice(1);Ni(g2,"on"+m2)}Ni(Ey,"onAnimationEnd"),Ni(wy,"onAnimationIteration"),Ni(Sy,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(NA,"onTransitionRun"),Ni(DA,"onTransitionStart"),Ni(MA,"onTransitionCancel"),Ni(Ay,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function Yb(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],m=u.event;u=u.listeners;t:{var p=void 0;if(a)for(var v=u.length-1;0<=v;v--){var S=u[v],P=S.instance,G=S.currentTarget;if(S=S.listener,P!==p&&m.isPropagationStopped())break t;p=S,m.currentTarget=G;try{p(m)}catch(Z){th(Z)}m.currentTarget=null,p=P}else for(v=0;v<u.length;v++){if(S=u[v],P=S.instance,G=S.currentTarget,S=S.listener,P!==p&&m.isPropagationStopped())break t;p=S,m.currentTarget=G;try{p(m)}catch(Z){th(Z)}m.currentTarget=null,p=P}}}}function Ht(s,a){var l=a[ro];l===void 0&&(l=a[ro]=new Set);var u=s+"__bubble";l.has(u)||(Kb(a,s,2,!1),l.add(u))}function mm(s,a,l){var u=0;a&&(u|=4),Kb(l,s,u,a)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function pm(s){if(!s[Uh]){s[Uh]=!0,Rl.forEach(function(l){l!=="selectionchange"&&(p2.has(l)||mm(l,!1,s),mm(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Uh]||(a[Uh]=!0,mm("selectionchange",!1,a))}}function Kb(s,a,l,u){switch(Ev(a)){case 2:var m=q2;break;case 8:m=G2;break;default:m=Nm}l=m.bind(null,a,l,s),m=void 0,!ga||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?s.addEventListener(a,l,{capture:!0,passive:m}):s.addEventListener(a,l,!0):m!==void 0?s.addEventListener(a,l,{passive:m}):s.addEventListener(a,l,!1)}function ym(s,a,l,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)t:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===m)break;if(v===4)for(v=u.return;v!==null;){var P=v.tag;if((P===3||P===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;S!==null;){if(v=Ki(S),v===null)return;if(P=v.tag,P===5||P===6||P===26||P===27){u=p=v;continue t}S=S.parentNode}}u=u.return}lr(function(){var G=p,Z=ai(l),it=[];t:{var $=Cy.get(s);if($!==void 0){var Q=es,_t=s;switch(s){case"keypress":if(pa(l)===0)break t;case"keydown":case"keyup":Q=Wu;break;case"focusin":_t="focus",Q=_a;break;case"focusout":_t="blur",Q=_a;break;case"beforeblur":case"afterblur":Q=_a;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=b;break;case Ey:case wy:case Sy:Q=qu;break;case Ay:Q=C;break;case"scroll":case"scrollend":Q=Ul;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=As;break;case"toggle":case"beforetoggle":Q=Pt}var Ct=(a&4)!==0,ge=!Ct&&(s==="scroll"||s==="scrollend"),B=Ct?$!==null?$+"Capture":null:$;Ct=[];for(var j=G,F;j!==null;){var et=j;if(F=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||F===null||B===null||(et=Ci(j,B),et!=null&&Ct.push(yc(j,et,F))),ge)break;j=j.return}0<Ct.length&&($=new Q($,_t,null,l,Z),it.push({event:$,listeners:Ct}))}}if((a&7)===0){t:{if($=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",$&&l!==Pl&&(_t=l.relatedTarget||l.fromElement)&&(Ki(_t)||_t[$i]))break t;if((Q||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(_t=l.relatedTarget||l.toElement,Q=G,_t=_t?Ki(_t):null,_t!==null&&(ge=o(_t),Ct=_t.tag,_t!==ge||Ct!==5&&Ct!==27&&Ct!==6)&&(_t=null)):(Q=null,_t=G),Q!==_t)){if(Ct=Bl,et="onMouseLeave",B="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(Ct=As,et="onPointerLeave",B="onPointerEnter",j="pointer"),ge=Q==null?$:Gn(Q),F=_t==null?$:Gn(_t),$=new Ct(et,j+"leave",Q,l,Z),$.target=ge,$.relatedTarget=F,et=null,Ki(Z)===G&&(Ct=new Ct(B,j+"enter",_t,l,Z),Ct.target=F,Ct.relatedTarget=ge,et=Ct),ge=et,Q&&_t)e:{for(Ct=y2,B=Q,j=_t,F=0,et=B;et;et=Ct(et))F++;et=0;for(var wt=j;wt;wt=Ct(wt))et++;for(;0<F-et;)B=Ct(B),F--;for(;0<et-F;)j=Ct(j),et--;for(;F--;){if(B===j||j!==null&&B===j.alternate){Ct=B;break e}B=Ct(B),j=Ct(j)}Ct=null}else Ct=null;Q!==null&&Qb(it,$,Q,Ct,!1),_t!==null&&ge!==null&&Qb(it,ge,_t,Ct,!0)}}t:{if($=G?Gn(G):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var ee=fy;else if(uy($))if(dy)ee=RA;else{ee=AA;var vt=SA}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&co(G.elementType)&&(ee=fy):ee=CA;if(ee&&(ee=ee(s,G))){hy(it,ee,l,Z);break t}vt&&vt(s,$,G),s==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&Ol($,"number",$.value)}switch(vt=G?Gn(G):window,s){case"focusin":(uy(vt)||vt.contentEditable==="true")&&(_o=vt,$d=G,$l=null);break;case"focusout":$l=$d=_o=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,xy(it,l,Z);break;case"selectionchange":if(kA)break;case"keydown":case"keyup":xy(it,l,Z)}var jt;if(se)t:{switch(s){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else yo?ba(s,l)&&($t="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&($t="onCompositionStart");$t&&(ss&&l.locale!=="ko"&&(yo||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&yo&&(jt=jl()):(ts=Z,Ll="value"in ts?ts.value:ts.textContent,yo=!0)),vt=Bh(G,$t),0<vt.length&&($t=new is($t,s,null,l,Z),it.push({event:$t,listeners:vt}),jt?$t.data=jt:(jt=po(l),jt!==null&&($t.data=jt)))),(jt=li?xA(s,l):TA(s,l))&&($t=Bh(G,"onBeforeInput"),0<$t.length&&(vt=new is("onBeforeInput","beforeinput",null,l,Z),it.push({event:vt,listeners:$t}),vt.data=jt)),d2(it,s,G,l,Z)}Yb(it,a)})}function yc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Bh(s,a){for(var l=a+"Capture",u=[];s!==null;){var m=s,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Ci(s,l),m!=null&&u.unshift(yc(s,m,p)),m=Ci(s,a),m!=null&&u.push(yc(s,m,p))),s.tag===3)return u;s=s.return}return[]}function y2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Qb(s,a,l,u,m){for(var p=a._reactName,v=[];l!==null&&l!==u;){var S=l,P=S.alternate,G=S.stateNode;if(S=S.tag,P!==null&&P===u)break;S!==5&&S!==26&&S!==27||G===null||(P=G,m?(G=Ci(l,p),G!=null&&v.unshift(yc(l,G,P))):m||(G=Ci(l,p),G!=null&&v.push(yc(l,G,P)))),l=l.return}v.length!==0&&s.push({event:a,listeners:v})}var _2=/\r\n?/g,b2=/\u0000|\uFFFD/g;function Xb(s){return(typeof s=="string"?s:""+s).replace(_2,`
`).replace(b2,"")}function Wb(s,a){return a=Xb(a),Xb(s)===a}function de(s,a,l,u,m,p){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Dn(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Dn(s,""+u);break;case"className":$n(s,"class",u);break;case"tabIndex":$n(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(s,l,u);break;case"style":Vl(s,u,p);break;case"data":if(a!=="object"){$n(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=uo(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(a!=="input"&&de(s,a,"name",m.name,m,null),de(s,a,"formEncType",m.formEncType,m,null),de(s,a,"formMethod",m.formMethod,m,null),de(s,a,"formTarget",m.formTarget,m,null)):(de(s,a,"encType",m.encType,m,null),de(s,a,"method",m.method,m,null),de(s,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=uo(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Ai);break;case"onScroll":u!=null&&Ht("scroll",s);break;case"onScrollEnd":u!=null&&Ht("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=uo(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Ht("beforetoggle",s),Ht("toggle",s),oo(s,"popover",u);break;case"xlinkActuate":Be(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Be(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Be(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Be(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Be(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Be(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Be(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Be(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Be(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":oo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Bu.get(l)||l,oo(s,l,u))}}function _m(s,a,l,u,m,p){switch(l){case"style":Vl(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Dn(s,u):(typeof u=="number"||typeof u=="bigint")&&Dn(s,""+u);break;case"onScroll":u!=null&&Ht("scroll",s);break;case"onScrollEnd":u!=null&&Ht("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),p=s[Je]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,m);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):oo(s,l,u)}}}function hn(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",s),Ht("load",s);var u=!1,m=!1,p;for(p in l)if(l.hasOwnProperty(p)){var v=l[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:de(s,a,p,v,l,null)}}m&&de(s,a,"srcSet",l.srcSet,l,null),u&&de(s,a,"src",l.src,l,null);return;case"input":Ht("invalid",s);var S=p=v=m=null,P=null,G=null;for(u in l)if(l.hasOwnProperty(u)){var Z=l[u];if(Z!=null)switch(u){case"name":m=Z;break;case"type":v=Z;break;case"checked":P=Z;break;case"defaultChecked":G=Z;break;case"value":p=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:de(s,a,u,Z,l,null)}}Lu(s,p,S,P,G,v,m,!1);return;case"select":Ht("invalid",s),u=v=p=null;for(m in l)if(l.hasOwnProperty(m)&&(S=l[m],S!=null))switch(m){case"value":p=S;break;case"defaultValue":v=S;break;case"multiple":u=S;default:de(s,a,m,S,l,null)}a=p,l=v,s.multiple=!!u,a!=null?sr(s,!!u,a,!1):l!=null&&sr(s,!!u,l,!0);return;case"textarea":Ht("invalid",s),p=m=u=null;for(v in l)if(l.hasOwnProperty(v)&&(S=l[v],S!=null))switch(v){case"value":u=S;break;case"defaultValue":m=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:de(s,a,v,S,l,null)}rr(s,u,m,p);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(u=l[P],u!=null))switch(P){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:de(s,a,P,u,l,null)}return;case"dialog":Ht("beforetoggle",s),Ht("toggle",s),Ht("cancel",s),Ht("close",s);break;case"iframe":case"object":Ht("load",s);break;case"video":case"audio":for(u=0;u<pc.length;u++)Ht(pc[u],s);break;case"image":Ht("error",s),Ht("load",s);break;case"details":Ht("toggle",s);break;case"embed":case"source":case"link":Ht("error",s),Ht("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(u=l[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:de(s,a,G,u,l,null)}return;default:if(co(a)){for(Z in l)l.hasOwnProperty(Z)&&(u=l[Z],u!==void 0&&_m(s,a,Z,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&de(s,a,S,u,l,null))}function v2(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,v=null,S=null,P=null,G=null,Z=null;for(Q in l){var it=l[Q];if(l.hasOwnProperty(Q)&&it!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=it;default:u.hasOwnProperty(Q)||de(s,a,Q,null,u,it)}}for(var $ in u){var Q=u[$];if(it=l[$],u.hasOwnProperty($)&&(Q!=null||it!=null))switch($){case"type":p=Q;break;case"name":m=Q;break;case"checked":G=Q;break;case"defaultChecked":Z=Q;break;case"value":v=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:Q!==it&&de(s,a,$,Q,u,it)}}lo(s,v,S,P,G,Z,p,m);return;case"select":Q=v=S=$=null;for(p in l)if(P=l[p],l.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":Q=P;default:u.hasOwnProperty(p)||de(s,a,p,null,u,P)}for(m in u)if(p=u[m],P=l[m],u.hasOwnProperty(m)&&(p!=null||P!=null))switch(m){case"value":$=p;break;case"defaultValue":S=p;break;case"multiple":v=p;default:p!==P&&de(s,a,m,p,u,P)}a=S,l=v,u=Q,$!=null?sr(s,!!l,$,!1):!!u!=!!l&&(a!=null?sr(s,!!l,a,!0):sr(s,!!l,l?[]:"",!1));return;case"textarea":Q=$=null;for(S in l)if(m=l[S],l.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:de(s,a,S,null,u,m)}for(v in u)if(m=u[v],p=l[v],u.hasOwnProperty(v)&&(m!=null||p!=null))switch(v){case"value":$=m;break;case"defaultValue":Q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==p&&de(s,a,v,m,u,p)}ju(s,$,Q);return;case"option":for(var _t in l)if($=l[_t],l.hasOwnProperty(_t)&&$!=null&&!u.hasOwnProperty(_t))switch(_t){case"selected":s.selected=!1;break;default:de(s,a,_t,null,u,$)}for(P in u)if($=u[P],Q=l[P],u.hasOwnProperty(P)&&$!==Q&&($!=null||Q!=null))switch(P){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:de(s,a,P,$,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in l)$=l[Ct],l.hasOwnProperty(Ct)&&$!=null&&!u.hasOwnProperty(Ct)&&de(s,a,Ct,null,u,$);for(G in u)if($=u[G],Q=l[G],u.hasOwnProperty(G)&&$!==Q&&($!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,a));break;default:de(s,a,G,$,u,Q)}return;default:if(co(a)){for(var ge in l)$=l[ge],l.hasOwnProperty(ge)&&$!==void 0&&!u.hasOwnProperty(ge)&&_m(s,a,ge,void 0,u,$);for(Z in u)$=u[Z],Q=l[Z],!u.hasOwnProperty(Z)||$===Q||$===void 0&&Q===void 0||_m(s,a,Z,$,u,Q);return}}for(var B in l)$=l[B],l.hasOwnProperty(B)&&$!=null&&!u.hasOwnProperty(B)&&de(s,a,B,null,u,$);for(it in u)$=u[it],Q=l[it],!u.hasOwnProperty(it)||$===Q||$==null&&Q==null||de(s,a,it,$,u,Q)}function Zb(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var m=l[u],p=m.transferSize,v=m.initiatorType,S=m.duration;if(p&&S&&Zb(v)){for(v=0,S=m.responseEnd,u+=1;u<l.length;u++){var P=l[u],G=P.startTime;if(G>S)break;var Z=P.transferSize,it=P.initiatorType;Z&&Zb(it)&&(P=P.responseEnd,v+=Z*(P<S?1:(S-G)/(P-G)))}if(--u,a+=8*(p+v)/(m.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var bm=null,vm=null;function Hh(s){return s.nodeType===9?s:s.ownerDocument}function Jb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function xm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Tm=null;function T2(){var s=window.event;return s&&s.type==="popstate"?s===Tm?!1:(Tm=s,!0):(Tm=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,E2=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,w2=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(s){return nv.resolve(null).then(s).catch(S2)}:ev;function S2(s){setTimeout(function(){throw s})}function Rr(s){return s==="head"}function iv(s,a){var l=a,u=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(u===0){s.removeChild(m),Go(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")_c(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,_c(l);for(var p=l.firstChild;p;){var v=p.nextSibling,S=p.nodeName;p[Yi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||l.removeChild(p),p=v}}else l==="body"&&_c(s.ownerDocument.body);l=m}while(l);Go(a)}function sv(s,a){var l=s;s=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=u}while(l)}function Em(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Em(l),ao(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function A2(s,a,l,u){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Yi])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=mi(s.nextSibling),s===null)break}return null}function C2(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=mi(s.nextSibling),s===null))return null;return s}function rv(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=mi(s.nextSibling),s===null))return null;return s}function wm(s){return s.data==="$?"||s.data==="$~"}function Sm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function R2(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function mi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Am=null;function av(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return mi(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function ov(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function lv(s,a,l){switch(a=Hh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function _c(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ao(s)}var pi=new Map,cv=new Set;function Fh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Bs=tt.d;tt.d={f:I2,r:k2,D:N2,C:D2,L:M2,m:O2,X:V2,S:z2,M:P2};function I2(){var s=Bs.f(),a=Oh();return s||a}function k2(s){var a=ri(s);a!==null&&a.tag===5&&a.type==="form"?A_(a):Bs.r(s)}var Ho=typeof document>"u"?null:document;function uv(s,a,l){var u=Ho;if(u&&typeof a=="string"&&a){var m=Nn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),cv.has(m)||(cv.add(m),s={rel:s,crossOrigin:l,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),hn(a,"link",s),Ue(a),u.head.appendChild(a)))}}function N2(s){Bs.D(s),uv("dns-prefetch",s,null)}function D2(s,a){Bs.C(s,a),uv("preconnect",s,a)}function M2(s,a,l){Bs.L(s,a,l);var u=Ho;if(u&&s&&a){var m='link[rel="preload"][as="'+Nn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Nn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Nn(l.imageSizes)+'"]')):m+='[href="'+Nn(s)+'"]';var p=m;switch(a){case"style":p=Fo(s);break;case"script":p=qo(s)}pi.has(p)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),pi.set(p,s),u.querySelector(m)!==null||a==="style"&&u.querySelector(bc(p))||a==="script"&&u.querySelector(vc(p))||(a=u.createElement("link"),hn(a,"link",s),Ue(a),u.head.appendChild(a)))}}function O2(s,a){Bs.m(s,a);var l=Ho;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Nn(u)+'"][href="'+Nn(s)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=qo(s)}if(!pi.has(p)&&(s=_({rel:"modulepreload",href:s},a),pi.set(p,s),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vc(p)))return}u=l.createElement("link"),hn(u,"link",s),Ue(u),l.head.appendChild(u)}}}function z2(s,a,l){Bs.S(s,a,l);var u=Ho;if(u&&s){var m=Qi(u).hoistableStyles,p=Fo(s);a=a||"default";var v=m.get(p);if(!v){var S={loading:0,preload:null};if(v=u.querySelector(bc(p)))S.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=pi.get(p))&&Cm(s,l);var P=v=u.createElement("link");Ue(P),hn(P,"link",s),P._p=new Promise(function(G,Z){P.onload=G,P.onerror=Z}),P.addEventListener("load",function(){S.loading|=1}),P.addEventListener("error",function(){S.loading|=2}),S.loading|=4,qh(v,a,u)}v={type:"stylesheet",instance:v,count:1,state:S},m.set(p,v)}}}function V2(s,a){Bs.X(s,a);var l=Ho;if(l&&s){var u=Qi(l).hoistableScripts,m=qo(s),p=u.get(m);p||(p=l.querySelector(vc(m)),p||(s=_({src:s,async:!0},a),(a=pi.get(m))&&Rm(s,a),p=l.createElement("script"),Ue(p),hn(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function P2(s,a){Bs.M(s,a);var l=Ho;if(l&&s){var u=Qi(l).hoistableScripts,m=qo(s),p=u.get(m);p||(p=l.querySelector(vc(m)),p||(s=_({src:s,async:!0,type:"module"},a),(a=pi.get(m))&&Rm(s,a),p=l.createElement("script"),Ue(p),hn(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function hv(s,a,l,u){var m=(m=Y.current)?Fh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Fo(l.href),l=Qi(m).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Fo(l.href);var p=Qi(m).hoistableStyles,v=p.get(s);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,v),(p=m.querySelector(bc(s)))&&!p._p&&(v.instance=p,v.state.loading=5),pi.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},pi.set(s,l),p||L2(m,s,l,v.state))),a&&u===null)throw Error(i(528,""));return v}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=qo(l),l=Qi(m).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Fo(s){return'href="'+Nn(s)+'"'}function bc(s){return'link[rel="stylesheet"]['+s+"]"}function fv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function L2(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),hn(a,"link",l),Ue(a),s.head.appendChild(a))}function qo(s){return'[src="'+Nn(s)+'"]'}function vc(s){return"script[async]"+s}function dv(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Nn(l.href)+'"]');if(u)return a.instance=u,Ue(u),u;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Ue(u),hn(u,"style",m),qh(u,l.precedence,s),a.instance=u;case"stylesheet":m=Fo(l.href);var p=s.querySelector(bc(m));if(p)return a.state.loading|=4,a.instance=p,Ue(p),p;u=fv(l),(m=pi.get(m))&&Cm(u,m),p=(s.ownerDocument||s).createElement("link"),Ue(p);var v=p;return v._p=new Promise(function(S,P){v.onload=S,v.onerror=P}),hn(p,"link",u),a.state.loading|=4,qh(p,l.precedence,s),a.instance=p;case"script":return p=qo(l.src),(m=s.querySelector(vc(p)))?(a.instance=m,Ue(m),m):(u=l,(m=pi.get(p))&&(u=_({},l),Rm(u,m)),s=s.ownerDocument||s,m=s.createElement("script"),Ue(m),hn(m,"link",u),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,qh(u,l.precedence,s));return a.instance}function qh(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,v=0;v<u.length;v++){var S=u[v];if(S.dataset.precedence===a)p=S;else if(p!==m)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Cm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Rm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Gh=null;function gv(s,a,l){if(Gh===null){var u=new Map,m=Gh=new Map;m.set(l,u)}else m=Gh,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var p=l[m];if(!(p[Yi]||p[je]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(a)||"";v=s+v;var S=u.get(v);S?S.push(p):u.set(v,[p])}}return u}function mv(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function j2(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function pv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function U2(s,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Fo(u.href),p=a.querySelector(bc(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=$h.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=p,Ue(p);return}p=a.ownerDocument||a,u=fv(u),(m=pi.get(m))&&Cm(u,m),p=p.createElement("link"),Ue(p);var v=p;v._p=new Promise(function(S,P){v.onload=S,v.onerror=P}),hn(p,"link",u),l.instance=p}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=$h.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Im=0;function B2(s,a){return s.stylesheets&&s.count===0&&Kh(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var u=setTimeout(function(){if(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4+a);0<s.imgBytes&&Im===0&&(Im=62500*x2());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend)){var p=s.unsuspend;s.unsuspend=null,p()}},(s.imgBytes>Im?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function $h(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yh=null;function Kh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yh=new Map,a.forEach(H2,s),Yh=null,$h.call(s))}function H2(s,a){if(!(a.state.loading&4)){var l=Yh.get(s);if(l)var u=l.get(null);else{l=new Map,Yh.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var v=m[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),u=v)}u&&l.set(null,u)}m=a.instance,v=m.getAttribute("data-precedence"),p=l.get(v)||u,p===u&&l.set(null,m),l.set(v,m),this.count++,u=$h.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var xc={$$typeof:J,Provider:null,Consumer:null,_currentValue:pt,_currentValue2:pt,_threadCount:0};function F2(s,a,l,u,m,p,v,S,P){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function yv(s,a,l,u,m,p,v,S,P,G,Z,it){return s=new F2(s,a,l,v,P,G,Z,it,S),a=1,p===!0&&(a|=24),p=Kn(3,null,null,a),s.current=p,p.stateNode=s,a=lg(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:a},fg(p),s}function _v(s){return s?(s=xo,s):xo}function bv(s,a,l,u,m,p){m=_v(m),u.context===null?u.context=m:u.pendingContext=m,u=yr(a),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=_r(s,u,a),l!==null&&(Pn(l,s,a),Jl(l,s,a))}function vv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function km(s,a){vv(s,a),(s=s.alternate)&&vv(s,a)}function xv(s){if(s.tag===13||s.tag===31){var a=Ta(s,67108864);a!==null&&Pn(a,s,67108864),km(s,67108864)}}function Tv(s){if(s.tag===13||s.tag===31){var a=Jn();a=ua(a);var l=Ta(s,a);l!==null&&Pn(l,s,a),km(s,a)}}var Qh=!0;function q2(s,a,l,u){var m=q.T;q.T=null;var p=tt.p;try{tt.p=2,Nm(s,a,l,u)}finally{tt.p=p,q.T=m}}function G2(s,a,l,u){var m=q.T;q.T=null;var p=tt.p;try{tt.p=8,Nm(s,a,l,u)}finally{tt.p=p,q.T=m}}function Nm(s,a,l,u){if(Qh){var m=Dm(u);if(m===null)ym(s,a,u,Xh,l),wv(s,u);else if(Y2(m,s,a,l,u))u.stopPropagation();else if(wv(s,u),a&4&&-1<$2.indexOf(s)){for(;m!==null;){var p=ri(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Fi(p.pendingLanes);if(v!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var P=1<<31-Ne(v);S.entanglements[1]|=P,v&=~P}ls(p),(re&6)===0&&(Dh=Zt()+500,mc(0))}}break;case 31:case 13:S=Ta(p,2),S!==null&&Pn(S,p,2),Oh(),km(p,2)}if(p=Dm(u),p===null&&ym(s,a,u,Xh,l),p===m)break;m=p}m!==null&&u.stopPropagation()}else ym(s,a,u,null,l)}}function Dm(s){return s=ai(s),Mm(s)}var Xh=null;function Mm(s){if(Xh=null,s=Ki(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===31){if(s=h(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Xh=s,null}function Ev(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ke()){case mn:return 2;case Sn:return 8;case qn:case kn:return 32;case ii:return 268435456;default:return 32}default:return 32}}var Om=!1,Ir=null,kr=null,Nr=null,Tc=new Map,Ec=new Map,Dr=[],$2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(s,a){switch(s){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Tc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(a.pointerId)}}function wc(s,a,l,u,m,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=ri(a),a!==null&&xv(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function Y2(s,a,l,u,m){switch(a){case"focusin":return Ir=wc(Ir,s,a,l,u,m),!0;case"dragenter":return kr=wc(kr,s,a,l,u,m),!0;case"mouseover":return Nr=wc(Nr,s,a,l,u,m),!0;case"pointerover":var p=m.pointerId;return Tc.set(p,wc(Tc.get(p)||null,s,a,l,u,m)),!0;case"gotpointercapture":return p=m.pointerId,Ec.set(p,wc(Ec.get(p)||null,s,a,l,u,m)),!0}return!1}function Sv(s){var a=Ki(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,wi(s.priority,function(){Tv(l)});return}}else if(a===31){if(a=h(l),a!==null){s.blockedOn=a,wi(s.priority,function(){Tv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Dm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Pl=u,l.target.dispatchEvent(u),Pl=null}else return a=ri(l),a!==null&&xv(a),s.blockedOn=l,!1;a.shift()}return!0}function Av(s,a,l){Wh(s)&&l.delete(a)}function K2(){Om=!1,Ir!==null&&Wh(Ir)&&(Ir=null),kr!==null&&Wh(kr)&&(kr=null),Nr!==null&&Wh(Nr)&&(Nr=null),Tc.forEach(Av),Ec.forEach(Av)}function Zh(s,a){s.blockedOn===a&&(s.blockedOn=null,Om||(Om=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,K2)))}var Jh=null;function Cv(s){Jh!==s&&(Jh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jh===s&&(Jh=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],m=s[a+2];if(typeof u!="function"){if(Mm(u||l)===null)continue;break}var p=ri(l);p!==null&&(s.splice(a,3),a-=3,Dg(p,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function Go(s){function a(P){return Zh(P,s)}Ir!==null&&Zh(Ir,s),kr!==null&&Zh(kr,s),Nr!==null&&Zh(Nr,s),Tc.forEach(a),Ec.forEach(a);for(var l=0;l<Dr.length;l++){var u=Dr[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Dr.length&&(l=Dr[0],l.blockedOn===null);)Sv(l),l.blockedOn===null&&Dr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],p=l[u+1],v=m[Je]||null;if(typeof p=="function")v||Cv(l);else if(v){var S=null;if(p&&p.hasAttribute("formAction")){if(m=p,v=p[Je]||null)S=v.formAction;else if(Mm(m)!==null)continue}else S=v.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),Cv(l)}}}function Rv(){function s(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function zm(s){this._internalRoot=s}tf.prototype.render=zm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=Jn();bv(l,u,s,a,null,null)},tf.prototype.unmount=zm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;bv(s.current,2,null,s,null,null),Oh(),a[$i]=null}};function tf(s){this._internalRoot=s}tf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ou();s={blockedOn:null,target:s,priority:a};for(var l=0;l<Dr.length&&a!==0&&a<Dr[l].priority;l++);Dr.splice(l,0,s),l===0&&Sv(s)}};var Iv=t.version;if(Iv!=="19.2.1")throw Error(i(527,Iv,"19.2.1"));tt.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=g(a),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var Q2={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{Ti=ef.inject(Q2),an=ef}catch{}}return Ac.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,u="",m=V_,p=P_,v=L_;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=yv(s,1,!1,null,null,l,u,null,m,p,v,Rv),s[$i]=a.current,pm(s),new zm(a)},Ac.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var u=!1,m="",p=V_,v=P_,S=L_,P=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),a=yv(s,1,!0,a,l??null,u,m,P,p,v,S,Rv),a.context=_v(null),l=a.current,u=Jn(),u=ua(u),m=yr(u),m.callback=null,_r(l,m,u),l=u,a.current.lanes=l,la(a,l),ls(a),s[$i]=a.current,pm(s),new tf(a)},Ac.version="19.2.1",Ac}var jv;function rC(){if(jv)return Lm.exports;jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Lm.exports=sC(),Lm.exports}var aC=rC();const oC=()=>{};var Uv={};const jT=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},lC=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],c=n[e++],h=n[e++],f=((r&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return t.join("")},UT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,h=c?n[r+1]:0,f=r+2<n.length,g=f?n[r+2]:0,y=o>>2,_=(o&3)<<4|h>>4;let x=(h&15)<<2|g>>6,w=g&63;f||(w=64,c||(x=64)),i.push(e[y],e[_],e[x],e[w])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(jT(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):lC(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],h=r<n.length?e[n.charAt(r)]:0;++r;const g=r<n.length?e[n.charAt(r)]:64;++r;const _=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||h==null||g==null||_==null)throw new cC;const x=o<<2|h>>4;if(i.push(x),g!==64){const w=h<<4&240|g>>2;if(i.push(w),_!==64){const k=g<<6&192|_;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class cC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uC=function(n){const t=jT(n);return UT.encodeByteArray(t,!0)},Pf=function(n){return uC(n).replace(/\./g,"")},BT=function(n){try{return UT.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function hC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const fC=()=>hC().__FIREBASE_DEFAULTS__,dC=()=>{if(typeof process>"u"||typeof Uv>"u")return;const n=Uv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&BT(n[1]);return t&&JSON.parse(t)},hd=()=>{try{return oC()||fC()||dC()||gC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HT=n=>hd()?.emulatorHosts?.[n],mC=n=>{const t=HT(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},FT=()=>hd()?.config,qT=n=>hd()?.[`_${n}`];class pC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function pl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function GT(n){return(await fetch(n,{credentials:"include"})).ok}function yC(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Pf(JSON.stringify(e)),Pf(JSON.stringify(c)),""].join(".")}const Bc={};function _C(){const n={prod:[],emulator:[]};for(const t of Object.keys(Bc))Bc[t]?n.emulator.push(t):n.prod.push(t);return n}function bC(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Bv=!1;function $T(n,t){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||Bc[n]===t||Bc[n]||Bv)return;Bc[n]=t;function e(x){return`__firebase__banner__${x}`}const i="__firebase__banner",o=_C().prod.length>0;function c(){const x=document.getElementById(i);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function f(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Bv=!0,c()},x}function y(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function _(){const x=bC(i),w=e("text"),k=document.getElementById(w)||document.createElement("span"),R=e("learnmore"),D=document.getElementById(R)||document.createElement("a"),U=e("preprendIcon"),W=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const J=x.element;h(J),y(D,R);const at=g();f(W,U),J.append(W,k,D,at),document.body.appendChild(J)}o?(k.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function xC(){const n=hd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SC(){const n=Tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function AC(){return!xC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CC(){try{return typeof indexedDB=="object"}catch{return!1}}function RC(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(e){t(e)}})}const IC="FirebaseError";class Js extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=IC,Object.setPrototypeOf(this,Js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],c=o?kC(o,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new Js(r,h,i)}}function kC(n,t){return n.replace(NC,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const NC=/\{\$([^}]+)}/g;function DC(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ka(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],c=t[r];if(Hv(o)&&Hv(c)){if(!Ka(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function Hv(n){return n!==null&&typeof n=="object"}function mu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Dc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function Mc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function MC(n,t){const e=new OC(n,t);return e.subscribe.bind(e)}class OC{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");zC(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Hm),r.error===void 0&&(r.error=Hm),r.complete===void 0&&(r.complete=Hm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zC(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Hm(){}function Ce(n){return n&&n._delegate?n._delegate:n}class Qa{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const La="[DEFAULT]";class VC{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new pC;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LC(t))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=La){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=La){return this.instances.has(t)}getOptions(t=La){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(r)}return r}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:PC(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=La){return this.component?this.component.multipleInstances?t:La:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PC(n){return n===La?void 0:n}function LC(n){return n.instantiationMode==="EAGER"}class jC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new VC(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Yt||(Yt={}));const UC={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},BC=Yt.INFO,HC={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},FC=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=HC[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jp{constructor(t){this.name=t,this._logLevel=BC,this._logHandler=FC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?UC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...t),this._logHandler(this,Yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...t),this._logHandler(this,Yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...t),this._logHandler(this,Yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...t),this._logHandler(this,Yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...t),this._logHandler(this,Yt.ERROR,...t)}}const qC=(n,t)=>t.some(e=>n instanceof e);let Fv,qv;function GC(){return Fv||(Fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $C(){return qv||(qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YT=new WeakMap,fp=new WeakMap,KT=new WeakMap,Fm=new WeakMap,t0=new WeakMap;function YC(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(Fr(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&YT.set(e,n)}).catch(()=>{}),t0.set(t,n),t}function KC(n){if(fp.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});fp.set(n,t)}let dp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return fp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||KT.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function QC(n){dp=n(dp)}function XC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(qm(this),t,...e);return KT.set(i,t.sort?t.sort():[t]),Fr(i)}:$C().includes(n)?function(...t){return n.apply(qm(this),t),Fr(YT.get(this))}:function(...t){return Fr(n.apply(qm(this),t))}}function WC(n){return typeof n=="function"?XC(n):(n instanceof IDBTransaction&&KC(n),qC(n,GC())?new Proxy(n,dp):n)}function Fr(n){if(n instanceof IDBRequest)return YC(n);if(Fm.has(n))return Fm.get(n);const t=WC(n);return t!==n&&(Fm.set(n,t),t0.set(t,n)),t}const qm=n=>t0.get(n);function ZC(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,t),h=Fr(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Fr(c.result),f.oldVersion,f.newVersion,Fr(c.transaction),f)}),e&&c.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const JC=["get","getKey","getAll","getAllKeys","count"],tR=["put","add","delete","clear"],Gm=new Map;function Gv(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Gm.get(t))return Gm.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=tR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||JC.includes(e)))return;const o=async function(c,...h){const f=this.transaction(c,r?"readwrite":"readonly");let g=f.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),r&&f.done]))[0]};return Gm.set(t,o),o}QC(n=>({...n,get:(t,e,i)=>Gv(t,e)||n.get(t,e,i),has:(t,e)=>!!Gv(t,e)||n.has(t,e)}));class eR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(nR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function nR(n){return n.getComponent()?.type==="VERSION"}const gp="@firebase/app",$v="0.14.6";const Ks=new Jp("@firebase/app"),iR="@firebase/app-compat",sR="@firebase/analytics-compat",rR="@firebase/analytics",aR="@firebase/app-check-compat",oR="@firebase/app-check",lR="@firebase/auth",cR="@firebase/auth-compat",uR="@firebase/database",hR="@firebase/data-connect",fR="@firebase/database-compat",dR="@firebase/functions",gR="@firebase/functions-compat",mR="@firebase/installations",pR="@firebase/installations-compat",yR="@firebase/messaging",_R="@firebase/messaging-compat",bR="@firebase/performance",vR="@firebase/performance-compat",xR="@firebase/remote-config",TR="@firebase/remote-config-compat",ER="@firebase/storage",wR="@firebase/storage-compat",SR="@firebase/firestore",AR="@firebase/ai",CR="@firebase/firestore-compat",RR="firebase",IR="12.6.0";const mp="[DEFAULT]",kR={[gp]:"fire-core",[iR]:"fire-core-compat",[rR]:"fire-analytics",[sR]:"fire-analytics-compat",[oR]:"fire-app-check",[aR]:"fire-app-check-compat",[lR]:"fire-auth",[cR]:"fire-auth-compat",[uR]:"fire-rtdb",[hR]:"fire-data-connect",[fR]:"fire-rtdb-compat",[dR]:"fire-fn",[gR]:"fire-fn-compat",[mR]:"fire-iid",[pR]:"fire-iid-compat",[yR]:"fire-fcm",[_R]:"fire-fcm-compat",[bR]:"fire-perf",[vR]:"fire-perf-compat",[xR]:"fire-rc",[TR]:"fire-rc-compat",[ER]:"fire-gcs",[wR]:"fire-gcs-compat",[SR]:"fire-fst",[CR]:"fire-fst-compat",[AR]:"fire-vertex","fire-js":"fire-js",[RR]:"fire-js-all"};const Lf=new Map,NR=new Map,pp=new Map;function Yv(n,t){try{n.container.addComponent(t)}catch(e){Ks.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function sl(n){const t=n.name;if(pp.has(t))return Ks.debug(`There were multiple attempts to register component ${t}.`),!1;pp.set(t,n);for(const e of Lf.values())Yv(e,n);for(const e of NR.values())Yv(e,n);return!0}function e0(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Un(n){return n==null?!1:n.settings!==void 0}const DR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new gu("app","Firebase",DR);class MR{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}const yl=IR;function QT(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:mp,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw qr.create("bad-app-name",{appName:String(r)});if(e||(e=FT()),!e)throw qr.create("no-options");const o=Lf.get(r);if(o){if(Ka(e,o.options)&&Ka(i,o.config))return o;throw qr.create("duplicate-app",{appName:r})}const c=new jC(r);for(const f of pp.values())c.addComponent(f);const h=new MR(e,i,c);return Lf.set(r,h),h}function XT(n=mp){const t=Lf.get(n);if(!t&&n===mp&&FT())return QT();if(!t)throw qr.create("no-app",{appName:n});return t}function Gr(n,t,e){let i=kR[n]??n;e&&(i+=`-${e}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const c=[`Unable to register library "${i}" with version "${t}":`];r&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ks.warn(c.join(" "));return}sl(new Qa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const OR="firebase-heartbeat-database",zR=1,Zc="firebase-heartbeat-store";let $m=null;function WT(){return $m||($m=ZC(OR,zR,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Zc)}catch(e){console.warn(e)}}}}).catch(n=>{throw qr.create("idb-open",{originalErrorMessage:n.message})})),$m}async function VR(n){try{const e=(await WT()).transaction(Zc),i=await e.objectStore(Zc).get(ZT(n));return await e.done,i}catch(t){if(t instanceof Js)Ks.warn(t.message);else{const e=qr.create("idb-get",{originalErrorMessage:t?.message});Ks.warn(e.message)}}}async function Kv(n,t){try{const i=(await WT()).transaction(Zc,"readwrite");await i.objectStore(Zc).put(t,ZT(n)),await i.done}catch(e){if(e instanceof Js)Ks.warn(e.message);else{const i=qr.create("idb-set",{originalErrorMessage:e?.message});Ks.warn(i.message)}}}function ZT(n){return`${n.name}!${n.options.appId}`}const PR=1024,LR=30;class jR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new BR(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>LR){const r=HR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ks.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qv(),{heartbeatsToSend:e,unsentEntries:i}=UR(this._heartbeatsCache.heartbeats),r=Pf(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Ks.warn(t),""}}}function Qv(){return new Date().toISOString().substring(0,10)}function UR(n,t=PR){const e=[];let i=n.slice();for(const r of n){const o=e.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),Xv(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Xv(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class BR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CC()?RC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await VR(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Kv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Kv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Xv(n){return Pf(JSON.stringify({version:2,heartbeats:n})).length}function HR(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function FR(n){sl(new Qa("platform-logger",t=>new eR(t),"PRIVATE")),sl(new Qa("heartbeat",t=>new jR(t),"PRIVATE")),Gr(gp,$v,n),Gr(gp,$v,"esm2020"),Gr("fire-js","")}FR("");var qR="firebase",GR="12.6.0";Gr(qR,GR,"app");function JT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $R=JT,tE=new gu("auth","Firebase",JT());const jf=new Jp("@firebase/auth");function YR(n,...t){jf.logLevel<=Yt.WARN&&jf.warn(`Auth (${yl}): ${n}`,...t)}function Ef(n,...t){jf.logLevel<=Yt.ERROR&&jf.error(`Auth (${yl}): ${n}`,...t)}function Li(n,...t){throw n0(n,...t)}function ms(n,...t){return n0(n,...t)}function eE(n,t,e){const i={...$R(),[t]:e};return new gu("auth","Firebase",i).create(t,{appName:n.name})}function Vi(n){return eE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function n0(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return tE.create(n,...t)}function Rt(n,t,...e){if(!n)throw n0(t,...e)}function $s(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Ef(t),new Error(t)}function Qs(n,t){n||$s(t)}function yp(){return typeof self<"u"&&self.location?.href||""}function KR(){return Wv()==="http:"||Wv()==="https:"}function Wv(){return typeof self<"u"&&self.location?.protocol||null}function QR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KR()||EC()||"connection"in navigator)?navigator.onLine:!0}function XR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class pu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Qs(e>t,"Short delay should be less than long delay!"),this.isMobile=vC()||wC()}get(){return QR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function i0(n,t){Qs(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class nE{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const WR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ZR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JR=new pu(3e4,6e4);function tr(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function er(n,t,e,i,r={}){return iE(n,r,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const h=mu({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const g={method:t,headers:f,...o};return TC()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&pl(n.emulatorConfig.host)&&(g.credentials="include"),nE.fetch()(await sE(n,n.config.apiHost,e,h),g)})}async function iE(n,t,e){n._canInitEmulator=!1;const i={...WR,...t};try{const r=new eI(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw nf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[f,g]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw nf(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw nf(n,"user-disabled",c);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw eE(n,y,g);Li(n,y)}}catch(r){if(r instanceof Js)throw r;Li(n,"network-request-failed",{message:String(r)})}}async function _l(n,t,e,i,r={}){const o=await er(n,t,e,i,r);return"mfaPendingCredential"in o&&Li(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function sE(n,t,e,i){const r=`${t}${e}?${i}`,o=n,c=o.config.emulator?i0(n.config,r):`${n.config.apiScheme}://${r}`;return ZR.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function tI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(ms(this.auth,"network-request-failed")),JR.get())})}}function nf(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=ms(n,t,i);return r.customData._tokenResponse=e,r}function Zv(n){return n!==void 0&&n.enterprise!==void 0}class nI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return tI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iI(n,t){return er(n,"GET","/v2/recaptchaConfig",tr(n,t))}async function sI(n,t){return er(n,"POST","/v1/accounts:delete",t)}async function Uf(n,t){return er(n,"POST","/v1/accounts:lookup",t)}function Hc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rI(n,t=!1){const e=Ce(n),i=await e.getIdToken(t),r=s0(i);Rt(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o?.sign_in_provider;return{claims:r,token:i,authTime:Hc(Ym(r.auth_time)),issuedAtTime:Hc(Ym(r.iat)),expirationTime:Hc(Ym(r.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ym(n){return Number(n)*1e3}function s0(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const r=BT(e);return r?JSON.parse(r):(Ef("Failed to decode base64 JWT payload"),null)}catch(r){return Ef("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Jv(n){const t=s0(n);return Rt(t,"internal-error"),Rt(typeof t.exp<"u","internal-error"),Rt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function rl(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Js&&aI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class oI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _p{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bf(n){const t=n.auth,e=await n.getIdToken(),i=await rl(n,Uf(t,{idToken:e}));Rt(i?.users.length,t,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=r.providerUserInfo?.length?rE(r.providerUserInfo):[],c=cI(n.providerData,o),h=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!c?.length,g=h?f:!1,y={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new _p(r.createdAt,r.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function lI(n){const t=Ce(n);await Bf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function cI(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function rE(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function uI(n,t){const e=await iE(n,{},async()=>{const i=mu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await sE(n,r,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:i};return n.emulatorConfig&&pl(n.emulatorConfig.host)&&(f.credentials="include"),nE.fetch()(c,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function hI(n,t){return er(n,"POST","/v2/accounts:revokeToken",tr(n,t))}class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rt(t.idToken,"internal-error"),Rt(typeof t.idToken<"u","internal-error"),Rt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Jv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Rt(t.length!==0,"internal-error");const e=Jv(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Rt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await uI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,c=new Jo;return i&&(Rt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(Rt(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),o&&(Rt(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return $s("not implemented")}}function Or(n,t){Rt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Oi{constructor({uid:t,auth:e,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new oI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new _p(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await rl(this,this.stsTokenManager.getToken(this.auth,t));return Rt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return rI(this,t)}reload(){return lI(this)}_assign(t){this!==t&&(Rt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Oi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Bf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Vi(this.auth));const t=await this.getIdToken();return await rl(this,sI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,r=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,h=e.tenantId??void 0,f=e._redirectEventId??void 0,g=e.createdAt??void 0,y=e.lastLoginAt??void 0,{uid:_,emailVerified:x,isAnonymous:w,providerData:k,stsTokenManager:R}=e;Rt(_&&R,t,"internal-error");const D=Jo.fromJSON(this.name,R);Rt(typeof _=="string",t,"internal-error"),Or(i,t.name),Or(r,t.name),Rt(typeof x=="boolean",t,"internal-error"),Rt(typeof w=="boolean",t,"internal-error"),Or(o,t.name),Or(c,t.name),Or(h,t.name),Or(f,t.name),Or(g,t.name),Or(y,t.name);const U=new Oi({uid:_,auth:t,email:r,emailVerified:x,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:D,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(U.providerData=k.map(W=>({...W}))),f&&(U._redirectEventId=f),U}static async _fromIdTokenResponse(t,e,i=!1){const r=new Jo;r.updateFromServerResponse(e);const o=new Oi({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Bf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];Rt(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?rE(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!o?.length,h=new Jo;h.updateFromIdToken(i);const f=new Oi({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:c}),g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new _p(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(f,g),f}}const t1=new Map;function Ys(n){Qs(n instanceof Function,"Expected a class definition");let t=t1.get(n);return t?(Qs(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,t1.set(n,t),t)}class aE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}aE.type="NONE";const e1=aE;function wf(n,t,e){return`firebase:${n}:${t}:${e}`}class tl{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=wf(this.userKey,r.apiKey,o),this.fullPersistenceKey=wf("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Uf(this.auth,{idToken:t}).catch(()=>{});return e?Oi._fromGetAccountInfoResponse(this.auth,e,t):null}return Oi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new tl(Ys(e1),t,i);const r=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=r[0]||Ys(e1);const c=wf(i,t.config.apiKey,t.name);let h=null;for(const g of e)try{const y=await g._get(c);if(y){let _;if(typeof y=="string"){const x=await Uf(t,{idToken:y}).catch(()=>{});if(!x)break;_=await Oi._fromGetAccountInfoResponse(t,x,y)}else _=Oi._fromJSON(t,y);g!==o&&(h=_),o=g;break}}catch{}const f=r.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new tl(o,t,i):(o=f[0],h&&await o._set(c,h.toJSON()),await Promise.all(e.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new tl(o,t,i))}}function n1(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fE(t))return"Blackberry";if(dE(t))return"Webos";if(lE(t))return"Safari";if((t.includes("chrome/")||cE(t))&&!t.includes("edge/"))return"Chrome";if(hE(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function oE(n=Tn()){return/firefox\//i.test(n)}function lE(n=Tn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function cE(n=Tn()){return/crios\//i.test(n)}function uE(n=Tn()){return/iemobile/i.test(n)}function hE(n=Tn()){return/android/i.test(n)}function fE(n=Tn()){return/blackberry/i.test(n)}function dE(n=Tn()){return/webos/i.test(n)}function r0(n=Tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fI(n=Tn()){return r0(n)&&!!window.navigator?.standalone}function dI(){return SC()&&document.documentMode===10}function gE(n=Tn()){return r0(n)||hE(n)||dE(n)||fE(n)||/windows phone/i.test(n)||uE(n)}function mE(n,t=[]){let e;switch(n){case"Browser":e=n1(Tn());break;case"Worker":e=`${n1(Tn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${yl}/${i}`}class gI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,h)=>{try{const f=t(o);c(f)}catch(f){h(f)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function mI(n,t={}){return er(n,"GET","/v2/passwordPolicy",tr(n,t))}const pI=6;class yI{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??pI,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}class _I{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i1(this),this.idTokenSubscription=new i1(this),this.beforeStateQueue=new gI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ys(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await tl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Uf(this,{idToken:t}),i=await Oi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!o||o===c)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Bf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Un(this.app))return Promise.reject(Vi(this));const e=t?Ce(t):null;return e&&Rt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Rt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Un(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await mI(this),e=new yI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new gu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await hI(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ys(t)||this._popupRedirectResolver;Rt(e,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Ys(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rt(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,i,r);return()=>{c=!0,f()}}else{const f=t.addObserver(e);return()=>{c=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=mE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&YR(`Error while retrieving App Check token: ${t.error}`),t?.token}}function nr(n){return Ce(n)}class i1{constructor(t){this.auth=t,this.observer=null,this.addObserver=MC(e=>this.observer=e)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bI(n){fd=n}function pE(n){return fd.loadJS(n)}function vI(){return fd.recaptchaEnterpriseScript}function xI(){return fd.gapiScript}function TI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class EI{constructor(){this.enterprise=new wI}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class wI{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const SI="recaptcha-enterprise",yE="NO_RECAPTCHA";class AI{constructor(t){this.type=SI,this.auth=nr(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{iI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new nI(f);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(f=>{h(f)})})}function r(o,c,h){const f=window.grecaptcha;Zv(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:t}).then(g=>{c(g)}).catch(()=>{c(yE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EI().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(h=>{if(!e&&Zv(window.grecaptcha))r(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=vI();f.length!==0&&(f+=h),pE(f).then(()=>{r(h,o,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function s1(n,t,e,i=!1,r=!1){const o=new AI(n);let c;if(r)c=yE;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const h={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function bp(n,t,e,i,r){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await s1(n,t,e,e==="getOobCode");return i(n,o)}else return i(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await s1(n,t,e,e==="getOobCode");return i(n,c)}else return Promise.reject(o)})}function CI(n,t){const e=e0(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(Ka(o,t??{}))return r;Li(r,"already-initialized")}return e.initialize({options:t})}function RI(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Ys);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function II(n,t,e){const i=nr(n);Rt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=_E(t),{host:c,port:h}=kI(t),f=h===null?"":`:${h}`,g={url:`${o}//${c}${f}/`},y=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Rt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Rt(Ka(g,i.config.emulator)&&Ka(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,pl(c)?(GT(`${o}//${c}${f}`),$T("Auth",!0)):NI()}function _E(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function kI(n){const t=_E(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:r1(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:r1(c)}}}function r1(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function NI(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class a0{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return $s("not implemented")}_getIdTokenResponse(t){return $s("not implemented")}_linkToIdToken(t,e){return $s("not implemented")}_getReauthenticationResolver(t){return $s("not implemented")}}async function DI(n,t){return er(n,"POST","/v1/accounts:signUp",t)}async function MI(n,t){return _l(n,"POST","/v1/accounts:signInWithPassword",tr(n,t))}async function OI(n,t){return _l(n,"POST","/v1/accounts:signInWithEmailLink",tr(n,t))}async function zI(n,t){return _l(n,"POST","/v1/accounts:signInWithEmailLink",tr(n,t))}class Jc extends a0{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Jc(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Jc(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(t,e,"signInWithPassword",MI);case"emailLink":return OI(t,{email:this._email,oobCode:this._password});default:Li(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(t,i,"signUpPassword",DI);case"emailLink":return zI(t,{idToken:e,email:this._email,oobCode:this._password});default:Li(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function el(n,t){return _l(n,"POST","/v1/accounts:signInWithIdp",tr(n,t))}const VI="http://localhost";class Xa extends a0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Xa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Li("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...o}=e;if(!i||!r)return null;const c=new Xa(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return el(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,el(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,el(t,e)}buildRequest(){const t={requestUri:VI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=mu(e)}return t}}function PI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LI(n){const t=Dc(Mc(n)).link,e=t?Dc(Mc(t)).deep_link_id:null,i=Dc(Mc(n)).deep_link_id;return(i?Dc(Mc(i)).link:null)||i||e||t||n}class o0{constructor(t){const e=Dc(Mc(t)),i=e.apiKey??null,r=e.oobCode??null,o=PI(e.mode??null);Rt(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=LI(t);try{return new o0(e)}catch{return null}}}class bl{constructor(){this.providerId=bl.PROVIDER_ID}static credential(t,e){return Jc._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=o0.parseLink(e);return Rt(i,"argument-error"),Jc._fromEmailAndCode(t,i.code,i.tenantId)}}bl.PROVIDER_ID="password";bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class yu extends bE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class zr extends yu{constructor(){super("facebook.com")}static credential(t){return Xa._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zr.credentialFromTaggedObject(t)}static credentialFromError(t){return zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zr.credential(t.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";class Vr extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Xa._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Vr.credentialFromTaggedObject(t)}static credentialFromError(t){return Vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Vr.credential(e,i)}catch{return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";class Pr extends yu{constructor(){super("github.com")}static credential(t){return Xa._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pr.credential(t.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";class Lr extends yu{constructor(){super("twitter.com")}static credential(t,e){return Xa._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Lr.credentialFromTaggedObject(t)}static credentialFromError(t){return Lr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Lr.credential(e,i)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";async function vE(n,t){return _l(n,"POST","/v1/accounts:signUp",tr(n,t))}class xs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await Oi._fromIdTokenResponse(t,i,r),c=a1(i);return new xs({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=a1(i);return new xs({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function a1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function jI(n){if(Un(n.app))return Promise.reject(Vi(n));const t=nr(n);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new xs({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await vE(t,{returnSecureToken:!0}),i=await xs._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class Hf extends Js{constructor(t,e,i,r){super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new Hf(t,e,i,r)}}function xE(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(n,o,t,i):o})}async function UI(n,t,e=!1){const i=await rl(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return xs._forOperation(n,"link",i)}async function BI(n,t,e=!1){const{auth:i}=n;if(Un(i.app))return Promise.reject(Vi(i));const r="reauthenticate";try{const o=await rl(n,xE(i,r,t,n),e);Rt(o.idToken,i,"internal-error");const c=s0(o.idToken);Rt(c,i,"internal-error");const{sub:h}=c;return Rt(n.uid===h,i,"user-mismatch"),xs._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Li(i,"user-mismatch"),o}}async function TE(n,t,e=!1){if(Un(n.app))return Promise.reject(Vi(n));const i="signIn",r=await xE(n,i,t),o=await xs._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function HI(n,t){return TE(nr(n),t)}async function FI(n,t){return _l(n,"POST","/v1/accounts:signInWithCustomToken",tr(n,t))}async function qI(n,t){if(Un(n.app))return Promise.reject(Vi(n));const e=nr(n),i=await FI(e,{token:t,returnSecureToken:!0}),r=await xs._fromIdTokenResponse(e,"signIn",i);return await e._updateCurrentUser(r.user),r}async function EE(n){const t=nr(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function GI(n,t,e){if(Un(n.app))return Promise.reject(Vi(n));const i=nr(n),c=await bp(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vE).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&EE(n),f}),h=await xs._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function $I(n,t,e){return Un(n.app)?Promise.reject(Vi(n)):HI(Ce(n),bl.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&EE(n),i})}async function YI(n,t){return er(n,"POST","/v1/accounts:update",t)}async function KI(n,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const i=Ce(n),o={idToken:await i.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},c=await rl(i,YI(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const h=i.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function QI(n,t,e,i){return Ce(n).onIdTokenChanged(t,e,i)}function XI(n,t,e){return Ce(n).beforeAuthStateChanged(t,e)}function WI(n,t,e,i){return Ce(n).onAuthStateChanged(t,e,i)}function wE(n){return Ce(n).signOut()}const Ff="__sak";class SE{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const ZI=1e3,JI=10;class AE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);dI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,JI):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},ZI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}AE.type="LOCAL";const tk=AE;class CE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}CE.type="SESSION";const RE=CE;function ek(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class dd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new dd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,c=this.handlersMap[r];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async g=>g(e.origin,o)),f=await ek(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];function l0(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}class nk{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((h,f)=>{const g=l0("",20);r.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(_){const x=_;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function ps(){return window}function ik(n){ps().location.href=n}function IE(){return typeof ps().WorkerGlobalScope<"u"&&typeof ps().importScripts=="function"}async function sk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rk(){return navigator?.serviceWorker?.controller||null}function ak(){return IE()?self:null}const kE="firebaseLocalStorageDb",ok=1,qf="firebaseLocalStorage",NE="fbase_key";class _u{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function gd(n,t){return n.transaction([qf],t?"readwrite":"readonly").objectStore(qf)}function lk(){const n=indexedDB.deleteDatabase(kE);return new _u(n).toPromise()}function vp(){const n=indexedDB.open(kE,ok);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(qf,{keyPath:NE})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(qf)?t(i):(i.close(),await lk(),t(await vp()))})})}async function o1(n,t,e){const i=gd(n,!0).put({[NE]:t,value:e});return new _u(i).toPromise()}async function ck(n,t){const e=gd(n,!1).get(t),i=await new _u(e).toPromise();return i===void 0?null:i.value}function l1(n,t){const e=gd(n,!0).delete(t);return new _u(e).toPromise()}const uk=800,hk=3;class DE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>hk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(ak()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sk(),!this.activeServiceWorker)return;this.sender=new nk(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||rk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await vp();return await o1(t,Ff,"1"),await l1(t,Ff),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>o1(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>ck(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>l1(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=gd(r,!1).getAll();return new _u(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DE.type="LOCAL";const fk=DE;new pu(3e4,6e4);function dk(n,t){return t?Ys(t):(Rt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class c0 extends a0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return el(t,this._buildIdpRequest())}_linkToIdToken(t,e){return el(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return el(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function gk(n){return TE(n.auth,new c0(n),n.bypassAuthState)}function mk(n){const{auth:t,user:e}=n;return Rt(e,t,"internal-error"),BI(e,new c0(n),n.bypassAuthState)}async function pk(n){const{auth:t,user:e}=n;return Rt(e,t,"internal-error"),UI(e,new c0(n),n.bypassAuthState)}class ME{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:c,type:h}=t;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return gk;case"linkViaPopup":case"linkViaRedirect":return pk;case"reauthViaPopup":case"reauthViaRedirect":return mk;default:Li(this.auth,"internal-error")}}resolve(t){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yk=new pu(2e3,1e4);class Wo extends ME{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Wo.currentPopupAction&&Wo.currentPopupAction.cancel(),Wo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rt(t,this.auth,"internal-error"),t}async onExecution(){Qs(this.filter.length===1,"Popup operations only handle one event");const t=l0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yk.get())};t()}}Wo.currentPopupAction=null;const _k="pendingRedirect",Sf=new Map;class bk extends ME{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Sf.get(this.auth._key());if(!t){try{const i=await vk(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Sf.set(this.auth._key(),t)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vk(n,t){const e=Ek(t),i=Tk(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function xk(n,t){Sf.set(n._key(),t)}function Tk(n){return Ys(n._redirectPersistence)}function Ek(n){return wf(_k,n.config.apiKey,n.name)}async function wk(n,t,e=!1){if(Un(n.app))return Promise.reject(Vi(n));const i=nr(n),r=dk(i,t),c=await new bk(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}const Sk=600*1e3;class Ak{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Ck(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!OE(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(ms(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Sk&&this.cachedEventUids.clear(),this.cachedEventUids.has(c1(t))}saveEventToCache(t){this.cachedEventUids.add(c1(t)),this.lastProcessedEventTime=Date.now()}}function c1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function OE({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function Ck(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OE(n);default:return!1}}async function Rk(n,t={}){return er(n,"GET","/v1/projects",t)}const Ik=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kk=/^https?/;async function Nk(n){if(n.config.emulator)return;const{authorizedDomains:t}=await Rk(n);for(const e of t)try{if(Dk(e))return}catch{}Li(n,"unauthorized-domain")}function Dk(n){const t=yp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!kk.test(e))return!1;if(Ik.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Mk=new pu(3e4,6e4);function u1(){const n=ps().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function Ok(n){return new Promise((t,e)=>{function i(){u1(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{u1(),e(ms(n,"network-request-failed"))},timeout:Mk.get()})}if(ps().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ps().gapi?.load)i();else{const r=TI("iframefcb");return ps()[r]=()=>{gapi.load?i():e(ms(n,"network-request-failed"))},pE(`${xI()}?onload=${r}`).catch(o=>e(o))}}).catch(t=>{throw Af=null,t})}let Af=null;function zk(n){return Af=Af||Ok(n),Af}const Vk=new pu(5e3,15e3),Pk="__/auth/iframe",Lk="emulator/auth/iframe",jk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bk(n){const t=n.config;Rt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?i0(t,Lk):`https://${n.config.authDomain}/${Pk}`,i={apiKey:t.apiKey,appName:n.name,v:yl},r=Uk.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${mu(i).slice(1)}`}async function Hk(n){const t=await zk(n),e=ps().gapi;return Rt(e,n,"internal-error"),t.open({where:document.body,url:Bk(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jk,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=ms(n,"network-request-failed"),h=ps().setTimeout(()=>{o(c)},Vk.get());function f(){ps().clearTimeout(h),r(i)}i.ping(f).then(f,()=>{o(c)})}))}const Fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qk=500,Gk=600,$k="_blank",Yk="http://localhost";class h1{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kk(n,t,e,i=qk,r=Gk){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f={...Fk,width:i.toString(),height:r.toString(),top:o,left:c},g=Tn().toLowerCase();e&&(h=cE(g)?$k:e),oE(g)&&(t=t||Yk,f.scrollbars="yes");const y=Object.entries(f).reduce((x,[w,k])=>`${x}${w}=${k},`,"");if(fI(g)&&h!=="_self")return Qk(t||"",h),new h1(null);const _=window.open(t||"",h,y);Rt(_,n,"popup-blocked");try{_.focus()}catch{}return new h1(_)}function Qk(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const Xk="__/auth/handler",Wk="emulator/auth/handler",Zk=encodeURIComponent("fac");async function f1(n,t,e,i,r,o){Rt(n.config.authDomain,n,"auth-domain-config-required"),Rt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:yl,eventId:r};if(t instanceof bE){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",DC(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(t instanceof yu){const y=t.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await n._getAppCheckToken(),g=f?`#${Zk}=${encodeURIComponent(f)}`:"";return`${Jk(n)}?${mu(h).slice(1)}${g}`}function Jk({config:n}){return n.emulator?i0(n,Wk):`https://${n.authDomain}/${Xk}`}const Km="webStorageSupport";class tN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=wk,this._overrideRedirectResult=xk}async _openPopup(t,e,i,r){Qs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await f1(t,e,i,yp(),r);return Kk(t,o,l0())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await f1(t,e,i,yp(),r);return ik(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(Qs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await Hk(t),i=new Ak(t);return e.register("authEvent",r=>(Rt(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Km,{type:Km},r=>{const o=r?.[0]?.[Km];o!==void 0&&e(!!o),Li(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Nk(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return gE()||lE()||r0()}}const eN=tN;var d1="@firebase/auth",g1="1.11.1";class nN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function iN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sN(n){sl(new Qa("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Rt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mE(n)},g=new _I(i,r,o,f);return RI(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),sl(new Qa("auth-internal",t=>{const e=nr(t.getProvider("auth").getImmediate());return(i=>new nN(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gr(d1,g1,iN(n)),Gr(d1,g1,"esm2020")}const rN=300,aN=qT("authIdTokenMaxAge")||rN;let m1=null;const oN=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>aN)return;const r=e?.token;m1!==r&&(m1=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function lN(n=XT()){const t=e0(n,"auth");if(t.isInitialized())return t.getImmediate();const e=CI(n,{popupRedirectResolver:eN,persistence:[fk,tk,RE]}),i=qT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=oN(o.toString());XI(e,c,()=>c(e.currentUser)),QI(e,h=>c(h))}}const r=HT("auth");return r&&II(e,`http://${r}`),e}function cN(){return document.getElementsByTagName("head")?.[0]??document}bI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=ms("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",cN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sN("Browser");var p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $r,zE;(function(){var n;function t(I,A){function N(){}N.prototype=A.prototype,I.F=A.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(V,M,L){for(var O=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)O[kt-2]=arguments[kt];return A.prototype[M].apply(V,O)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,A,N){N||(N=0);const V=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)V[M]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(M=0;M<16;++M)V[M]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=I.g[0],N=I.g[1],M=I.g[2];let L=I.g[3],O;O=A+(L^N&(M^L))+V[0]+3614090360&4294967295,A=N+(O<<7&4294967295|O>>>25),O=L+(M^A&(N^M))+V[1]+3905402710&4294967295,L=A+(O<<12&4294967295|O>>>20),O=M+(N^L&(A^N))+V[2]+606105819&4294967295,M=L+(O<<17&4294967295|O>>>15),O=N+(A^M&(L^A))+V[3]+3250441966&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(L^N&(M^L))+V[4]+4118548399&4294967295,A=N+(O<<7&4294967295|O>>>25),O=L+(M^A&(N^M))+V[5]+1200080426&4294967295,L=A+(O<<12&4294967295|O>>>20),O=M+(N^L&(A^N))+V[6]+2821735955&4294967295,M=L+(O<<17&4294967295|O>>>15),O=N+(A^M&(L^A))+V[7]+4249261313&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(L^N&(M^L))+V[8]+1770035416&4294967295,A=N+(O<<7&4294967295|O>>>25),O=L+(M^A&(N^M))+V[9]+2336552879&4294967295,L=A+(O<<12&4294967295|O>>>20),O=M+(N^L&(A^N))+V[10]+4294925233&4294967295,M=L+(O<<17&4294967295|O>>>15),O=N+(A^M&(L^A))+V[11]+2304563134&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(L^N&(M^L))+V[12]+1804603682&4294967295,A=N+(O<<7&4294967295|O>>>25),O=L+(M^A&(N^M))+V[13]+4254626195&4294967295,L=A+(O<<12&4294967295|O>>>20),O=M+(N^L&(A^N))+V[14]+2792965006&4294967295,M=L+(O<<17&4294967295|O>>>15),O=N+(A^M&(L^A))+V[15]+1236535329&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(M^L&(N^M))+V[1]+4129170786&4294967295,A=N+(O<<5&4294967295|O>>>27),O=L+(N^M&(A^N))+V[6]+3225465664&4294967295,L=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(L^A))+V[11]+643717713&4294967295,M=L+(O<<14&4294967295|O>>>18),O=N+(L^A&(M^L))+V[0]+3921069994&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(M^L&(N^M))+V[5]+3593408605&4294967295,A=N+(O<<5&4294967295|O>>>27),O=L+(N^M&(A^N))+V[10]+38016083&4294967295,L=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(L^A))+V[15]+3634488961&4294967295,M=L+(O<<14&4294967295|O>>>18),O=N+(L^A&(M^L))+V[4]+3889429448&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(M^L&(N^M))+V[9]+568446438&4294967295,A=N+(O<<5&4294967295|O>>>27),O=L+(N^M&(A^N))+V[14]+3275163606&4294967295,L=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(L^A))+V[3]+4107603335&4294967295,M=L+(O<<14&4294967295|O>>>18),O=N+(L^A&(M^L))+V[8]+1163531501&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(M^L&(N^M))+V[13]+2850285829&4294967295,A=N+(O<<5&4294967295|O>>>27),O=L+(N^M&(A^N))+V[2]+4243563512&4294967295,L=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(L^A))+V[7]+1735328473&4294967295,M=L+(O<<14&4294967295|O>>>18),O=N+(L^A&(M^L))+V[12]+2368359562&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(N^M^L)+V[5]+4294588738&4294967295,A=N+(O<<4&4294967295|O>>>28),O=L+(A^N^M)+V[8]+2272392833&4294967295,L=A+(O<<11&4294967295|O>>>21),O=M+(L^A^N)+V[11]+1839030562&4294967295,M=L+(O<<16&4294967295|O>>>16),O=N+(M^L^A)+V[14]+4259657740&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(N^M^L)+V[1]+2763975236&4294967295,A=N+(O<<4&4294967295|O>>>28),O=L+(A^N^M)+V[4]+1272893353&4294967295,L=A+(O<<11&4294967295|O>>>21),O=M+(L^A^N)+V[7]+4139469664&4294967295,M=L+(O<<16&4294967295|O>>>16),O=N+(M^L^A)+V[10]+3200236656&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(N^M^L)+V[13]+681279174&4294967295,A=N+(O<<4&4294967295|O>>>28),O=L+(A^N^M)+V[0]+3936430074&4294967295,L=A+(O<<11&4294967295|O>>>21),O=M+(L^A^N)+V[3]+3572445317&4294967295,M=L+(O<<16&4294967295|O>>>16),O=N+(M^L^A)+V[6]+76029189&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(N^M^L)+V[9]+3654602809&4294967295,A=N+(O<<4&4294967295|O>>>28),O=L+(A^N^M)+V[12]+3873151461&4294967295,L=A+(O<<11&4294967295|O>>>21),O=M+(L^A^N)+V[15]+530742520&4294967295,M=L+(O<<16&4294967295|O>>>16),O=N+(M^L^A)+V[2]+3299628645&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(M^(N|~L))+V[0]+4096336452&4294967295,A=N+(O<<6&4294967295|O>>>26),O=L+(N^(A|~M))+V[7]+1126891415&4294967295,L=A+(O<<10&4294967295|O>>>22),O=M+(A^(L|~N))+V[14]+2878612391&4294967295,M=L+(O<<15&4294967295|O>>>17),O=N+(L^(M|~A))+V[5]+4237533241&4294967295,N=M+(O<<21&4294967295|O>>>11),O=A+(M^(N|~L))+V[12]+1700485571&4294967295,A=N+(O<<6&4294967295|O>>>26),O=L+(N^(A|~M))+V[3]+2399980690&4294967295,L=A+(O<<10&4294967295|O>>>22),O=M+(A^(L|~N))+V[10]+4293915773&4294967295,M=L+(O<<15&4294967295|O>>>17),O=N+(L^(M|~A))+V[1]+2240044497&4294967295,N=M+(O<<21&4294967295|O>>>11),O=A+(M^(N|~L))+V[8]+1873313359&4294967295,A=N+(O<<6&4294967295|O>>>26),O=L+(N^(A|~M))+V[15]+4264355552&4294967295,L=A+(O<<10&4294967295|O>>>22),O=M+(A^(L|~N))+V[6]+2734768916&4294967295,M=L+(O<<15&4294967295|O>>>17),O=N+(L^(M|~A))+V[13]+1309151649&4294967295,N=M+(O<<21&4294967295|O>>>11),O=A+(M^(N|~L))+V[4]+4149444226&4294967295,A=N+(O<<6&4294967295|O>>>26),O=L+(N^(A|~M))+V[11]+3174756917&4294967295,L=A+(O<<10&4294967295|O>>>22),O=M+(A^(L|~N))+V[2]+718787259&4294967295,M=L+(O<<15&4294967295|O>>>17),O=N+(L^(M|~A))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+L&4294967295}i.prototype.v=function(I,A){A===void 0&&(A=I.length);const N=A-this.blockSize,V=this.C;let M=this.h,L=0;for(;L<A;){if(M==0)for(;L<=N;)r(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<A;)if(V[M++]=I.charCodeAt(L++),M==this.blockSize){r(this,V),M=0;break}}else for(;L<A;)if(V[M++]=I[L++],M==this.blockSize){r(this,V),M=0;break}}this.h=M,this.o+=A},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)I[A++]=this.g[N]>>>V&255;return I};function o(I,A){var N=h;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=A(I)}function c(I,A){this.h=A;const N=[];let V=!0;for(let M=I.length-1;M>=0;M--){const L=I[M]|0;V&&L==A||(N[M]=L,V=!1)}this.g=N}var h={};function f(I){return-128<=I&&I<128?o(I,function(A){return new c([A|0],A<0?-1:0)}):new c([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return _;if(I<0)return D(g(-I));const A=[];let N=1;for(let V=0;I>=N;V++)A[V]=I/N|0,N*=4294967296;return new c(A,0)}function y(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return D(y(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(A,8));let V=_;for(let L=0;L<I.length;L+=8){var M=Math.min(8,I.length-L);const O=parseInt(I.substring(L,L+M),A);M<8?(M=g(Math.pow(A,M)),V=V.j(M).add(g(O))):(V=V.j(N),V=V.add(g(O)))}return V}var _=f(0),x=f(1),w=f(16777216);n=c.prototype,n.m=function(){if(R(this))return-D(this).m();let I=0,A=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);I+=(V>=0?V:4294967296+V)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(R(this))return"-"+D(this).toString(I);const A=g(Math.pow(I,6));var N=this;let V="";for(;;){const M=at(N,A).g;N=U(N,M.j(A));let L=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=M,k(N))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=U(this,I),R(I)?-1:k(I)?0:1};function D(I){const A=I.g.length,N=[];for(let V=0;V<A;V++)N[V]=~I.g[V];return new c(N,~I.h).add(x)}n.abs=function(){return R(this)?D(this):this},n.add=function(I){const A=Math.max(this.g.length,I.g.length),N=[];let V=0;for(let M=0;M<=A;M++){let L=V+(this.i(M)&65535)+(I.i(M)&65535),O=(L>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);V=O>>>16,L&=65535,O&=65535,N[M]=O<<16|L}return new c(N,N[N.length-1]&-2147483648?-1:0)};function U(I,A){return I.add(D(A))}n.j=function(I){if(k(this)||k(I))return _;if(R(this))return R(I)?D(this).j(D(I)):D(D(this).j(I));if(R(I))return D(this.j(D(I)));if(this.l(w)<0&&I.l(w)<0)return g(this.m()*I.m());const A=this.g.length+I.g.length,N=[];for(var V=0;V<2*A;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<I.g.length;M++){const L=this.i(V)>>>16,O=this.i(V)&65535,kt=I.i(M)>>>16,Nt=I.i(M)&65535;N[2*V+2*M]+=O*Nt,W(N,2*V+2*M),N[2*V+2*M+1]+=L*Nt,W(N,2*V+2*M+1),N[2*V+2*M+1]+=O*kt,W(N,2*V+2*M+1),N[2*V+2*M+2]+=L*kt,W(N,2*V+2*M+2)}for(I=0;I<A;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=A;I<2*A;I++)N[I]=0;return new c(N,0)};function W(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function J(I,A){this.g=I,this.h=A}function at(I,A){if(k(A))throw Error("division by zero");if(k(I))return new J(_,_);if(R(I))return A=at(D(I),A),new J(D(A.g),D(A.h));if(R(A))return A=at(I,D(A)),new J(D(A.g),A.h);if(I.g.length>30){if(R(I)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var N=x,V=A;V.l(I)<=0;)N=st(N),V=st(V);var M=ot(N,1),L=ot(V,1);for(V=ot(V,2),N=ot(N,2);!k(V);){var O=L.add(V);O.l(I)<=0&&(M=M.add(N),L=O),V=ot(V,1),N=ot(N,1)}return A=U(I,M.j(A)),new J(M,A)}for(M=_;I.l(A)>=0;){for(N=Math.max(1,Math.floor(I.m()/A.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=g(N),O=L.j(A);R(O)||O.l(I)>0;)N-=V,L=g(N),O=L.j(A);k(L)&&(L=x),M=M.add(L),I=U(I,O)}return new J(M,I)}n.B=function(I){return at(this,I).h},n.and=function(I){const A=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<A;V++)N[V]=this.i(V)&I.i(V);return new c(N,this.h&I.h)},n.or=function(I){const A=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<A;V++)N[V]=this.i(V)|I.i(V);return new c(N,this.h|I.h)},n.xor=function(I){const A=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<A;V++)N[V]=this.i(V)^I.i(V);return new c(N,this.h^I.h)};function st(I){const A=I.g.length+1,N=[];for(let V=0;V<A;V++)N[V]=I.i(V)<<1|I.i(V-1)>>>31;return new c(N,I.h)}function ot(I,A){const N=A>>5;A%=32;const V=I.g.length-N,M=[];for(let L=0;L<V;L++)M[L]=A>0?I.i(L+N)>>>A|I.i(L+N+1)<<32-A:I.i(L+N);return new c(M,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,zE=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,$r=c}).apply(typeof p1<"u"?p1:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var VE,Oc,PE,Cf,xp,LE,jE,UE;(function(){var n,t=Object.defineProperty;function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var b=0;b<d.length;++b){var T=d[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=e(this);function r(d,b){if(b)t:{var T=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var H=d[C];if(!(H in T))break t;T=T[H]}d=d[d.length-1],C=T[d],b=b(C),b!=C&&b!=null&&t(T,d,{configurable:!0,writable:!0,value:b})}}r("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(d){return d||function(b){var T=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&T.push([C,b[C]]);return T}});var o=o||{},c=this||self;function h(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function f(d,b,T){return d.call.apply(d.bind,arguments)}function g(d,b,T){return g=f,g.apply(null,arguments)}function y(d,b){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function _(d,b){function T(){}T.prototype=b.prototype,d.Z=b.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(C,H,K){for(var gt=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)gt[Pt-2]=arguments[Pt];return b.prototype[H].apply(C,gt)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function w(d){const b=d.length;if(b>0){const T=Array(b);for(let C=0;C<b;C++)T[C]=d[C];return T}return[]}function k(d,b){for(let C=1;C<arguments.length;C++){const H=arguments[C];var T=typeof H;if(T=T!="object"?T:H?Array.isArray(H)?"array":T:"null",T=="array"||T=="object"&&typeof H.length=="number"){T=d.length||0;const K=H.length||0;d.length=T+K;for(let gt=0;gt<K;gt++)d[T+gt]=H[gt]}else d.push(H)}}class R{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function D(d){c.setTimeout(()=>{throw d},0)}function U(){var d=I;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class W{constructor(){this.h=this.g=null}add(b,T){const C=J.get();C.set(b,T),this.h?this.h.next=C:this.g=C,this.h=C}}var J=new R(()=>new at,d=>d.reset());class at{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let st,ot=!1,I=new W,A=()=>{const d=Promise.resolve(void 0);st=()=>{d.then(N)}};function N(){for(var d;d=U();){try{d.h.call(d.g)}catch(T){D(T)}var b=J;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}ot=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};c.addEventListener("test",T,b),c.removeEventListener("test",T,b)}catch{}return d})();function O(d){return/^[\s\xa0]*$/.test(d)}function kt(d,b){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}_(kt,M),kt.prototype.init=function(d,b){const T=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(T=="mouseover"?b=d.fromElement:T=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&kt.Z.h.call(this)},kt.prototype.h=function(){kt.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Nt="closure_listenable_"+(Math.random()*1e6|0),q=0;function tt(d,b,T,C,H){this.listener=d,this.proxy=null,this.src=b,this.type=T,this.capture=!!C,this.ha=H,this.key=++q,this.da=this.fa=!1}function pt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Dt(d,b,T){for(const C in d)b.call(T,d[C],C,d)}function At(d,b){for(const T in d)b.call(void 0,d[T],T,d)}function z(d){const b={};for(const T in d)b[T]=d[T];return b}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(d,b){let T,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(T in C)d[T]=C[T];for(let K=0;K<X.length;K++)T=X[K],Object.prototype.hasOwnProperty.call(C,T)&&(d[T]=C[T])}}function ht(d){this.src=d,this.g={},this.h=0}ht.prototype.add=function(d,b,T,C,H){const K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);const gt=Y(d,b,C,H);return gt>-1?(b=d[gt],T||(b.fa=!1)):(b=new tt(b,this.src,K,!!C,H),b.fa=T,d.push(b)),b};function Tt(d,b){const T=b.type;if(T in d.g){var C=d.g[T],H=Array.prototype.indexOf.call(C,b,void 0),K;(K=H>=0)&&Array.prototype.splice.call(C,H,1),K&&(pt(b),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Y(d,b,T,C){for(let H=0;H<d.length;++H){const K=d[H];if(!K.da&&K.listener==b&&K.capture==!!T&&K.ha==C)return H}return-1}var bt="closure_lm_"+(Math.random()*1e6|0),Ft={};function Ut(d,b,T,C,H){if(Array.isArray(b)){for(let K=0;K<b.length;K++)Ut(d,b[K],T,C,H);return null}return T=ft(T),d&&d[Nt]?d.J(b,T,h(C)?!!C.capture:!1,H):xt(d,b,T,!1,C,H)}function xt(d,b,T,C,H,K){if(!b)throw Error("Invalid event type");const gt=h(H)?!!H.capture:!!H;let Pt=Bi(d);if(Pt||(d[bt]=Pt=new ht(d)),T=Pt.add(b,T,C,gt,K),T.proxy)return T;if(C=Re(),T.proxy=C,C.src=d,C.listener=T,d.addEventListener)L||(H=gt),H===void 0&&(H=!1),d.addEventListener(b.toString(),C,H);else if(d.attachEvent)d.attachEvent(In(b.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Re(){function d(T){return b.call(d.src,d.listener,T)}const b=Ui;return d}function wn(d,b,T,C,H){if(Array.isArray(b))for(var K=0;K<b.length;K++)wn(d,b[K],T,C,H);else C=h(C)?!!C.capture:!!C,T=ft(T),d&&d[Nt]?(d=d.i,K=String(b).toString(),K in d.g&&(b=d.g[K],T=Y(b,T,C,H),T>-1&&(pt(b[T]),Array.prototype.splice.call(b,T,1),b.length==0&&(delete d.g[K],d.h--)))):d&&(d=Bi(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Y(b,T,C,H)),(T=d>-1?b[d]:null)&&Ie(T))}function Ie(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[Nt])Tt(b.i,d);else{var T=d.type,C=d.proxy;b.removeEventListener?b.removeEventListener(T,C,d.capture):b.detachEvent?b.detachEvent(In(T),C):b.addListener&&b.removeListener&&b.removeListener(C),(T=Bi(b))?(Tt(T,d),T.h==0&&(T.src=null,b[bt]=null)):pt(d)}}}function In(d){return d in Ft?Ft[d]:Ft[d]="on"+d}function Ui(d,b){if(d.da)d=!0;else{b=new kt(b,this);const T=d.listener,C=d.ha||d.src;d.fa&&Ie(d),d=T.call(C,b)}return d}function Bi(d){return d=d[bt],d instanceof ht?d:null}var aa="__closure_events_fn_"+(Math.random()*1e9>>>0);function ft(d){return typeof d=="function"?d:(d[aa]||(d[aa]=function(b){return d.handleEvent(b)}),d[aa])}function dt(){V.call(this),this.i=new ht(this),this.M=this,this.G=null}_(dt,V),dt.prototype[Nt]=!0,dt.prototype.removeEventListener=function(d,b,T,C){wn(this,d,b,T,C)};function ct(d,b){var T,C=d.G;if(C)for(T=[];C;C=C.G)T.push(C);if(d=d.M,C=b.type||b,typeof b=="string")b=new M(b,d);else if(b instanceof M)b.target=b.target||d;else{var H=b;b=new M(C,d),ut(b,H)}H=!0;let K,gt;if(T)for(gt=T.length-1;gt>=0;gt--)K=b.g=T[gt],H=Et(K,C,!0,b)&&H;if(K=b.g=d,H=Et(K,C,!0,b)&&H,H=Et(K,C,!1,b)&&H,T)for(gt=0;gt<T.length;gt++)K=b.g=T[gt],H=Et(K,C,!1,b)&&H}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const T=d.g[b];for(let C=0;C<T.length;C++)pt(T[C]);delete d.g[b],d.h--}}this.G=null},dt.prototype.J=function(d,b,T,C){return this.i.add(String(d),b,!1,T,C)},dt.prototype.K=function(d,b,T,C){return this.i.add(String(d),b,!0,T,C)};function Et(d,b,T,C){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let H=!0;for(let K=0;K<b.length;++K){const gt=b[K];if(gt&&!gt.da&&gt.capture==T){const Pt=gt.listener,De=gt.ha||gt.src;gt.fa&&Tt(d.i,gt),H=Pt.call(De,C)!==!1&&H}}return H&&!C.defaultPrevented}function Mt(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(d,b||0)}function qt(d){d.g=Mt(()=>{d.g=null,d.i&&(d.i=!1,qt(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class Zt extends V{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ke(d){V.call(this),this.h=d,this.g={}}_(ke,V);var mn=[];function Sn(d){Dt(d.g,function(b,T){this.g.hasOwnProperty(T)&&Ie(b)},d),d.g={}}ke.prototype.N=function(){ke.Z.N.call(this),Sn(this)},ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=c.JSON.stringify,kn=c.JSON.parse,ii=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Iu(){}function ku(){}var Ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function an(){M.call(this,"d")}_(an,M);function si(){M.call(this,"c")}_(si,M);var Ne={},Nu=null;function so(){return Nu=Nu||new dt}Ne.Ia="serverreachability";function Du(d){M.call(this,Ne.Ia,d)}_(Du,M);function Hi(d){const b=so();ct(b,new Du(b))}Ne.STAT_EVENT="statevent";function oa(d,b){M.call(this,Ne.STAT_EVENT,d),this.stat=b}_(oa,M);function Le(d){const b=so();ct(b,new oa(b,d))}Ne.Ja="timingevent";function Fi(d,b){M.call(this,Ne.Ja,d),this.size=b}_(Fi,M);function qi(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},b)}function Ei(){this.g=!0}Ei.prototype.ua=function(){this.g=!1};function Ud(d,b,T,C,H,K){d.info(function(){if(d.g)if(K){var gt="",Pt=K.split("&");for(let se=0;se<Pt.length;se++){var De=Pt[se].split("=");if(De.length>1){const Te=De[0];De=De[1];const li=Te.split("_");gt=li.length>=2&&li[1]=="type"?gt+(Te+"="+De+"&"):gt+(Te+"=redacted&")}}}else gt=null;else gt=K;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+b+`
`+T+`
`+gt})}function Mu(d,b,T,C,H,K,gt){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+b+`
`+T+`
`+K+" "+gt})}function Gi(d,b,T,C){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Bd(d,T)+(C?" "+C:"")})}function la(d,b){d.info(function(){return"TIMEOUT: "+b})}Ei.prototype.info=function(){};function Bd(d,b){if(!d.g)return b;if(!b)return null;try{const K=JSON.parse(b);if(K){for(d=0;d<K.length;d++)if(Array.isArray(K[d])){var T=K[d];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var H=C[0];if(H!="noop"&&H!="stop"&&H!="close")for(let gt=1;gt<C.length;gt++)C[gt]=""}}}}return qn(K)}catch{return b}}var ca={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Al={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cl;function ua(){}_(ua,Iu),ua.prototype.g=function(){return new XMLHttpRequest},Cl=new ua;function Es(d){return encodeURIComponent(String(d))}function Ou(d){var b=1;d=d.split(":");const T=[];for(;b>0&&d.length;)T.push(d.shift()),b--;return d.length&&T.push(d.join(":")),T}function wi(d,b,T,C){this.j=d,this.i=b,this.l=T,this.S=C||1,this.V=new ke(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Si}function Si(){this.i=null,this.g="",this.h=!1}var je={},Je={};function $i(d,b,T){d.M=1,d.A=ha(Be(b)),d.u=T,d.R=!0,ro(d,null)}function ro(d,b){d.F=Date.now(),Yi(d),d.B=Be(d.A);var T=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),co(T.i,"t",C),d.C=0,T=d.j.L,d.h=new Si,d.g=Qu(d.j,T?b:null,!d.u),d.P>0&&(d.O=new Zt(g(d.Y,d,d.g),d.P)),b=d.V,T=d.g,C=d.ba;var H="readystatechange";Array.isArray(H)||(H&&(mn[0]=H.toString()),H=mn);for(let K=0;K<H.length;K++){const gt=Ut(T,H[K],C||b.handleEvent,!1,b.h||b);if(!gt)break;b.g[gt.key]=gt}b=d.J?z(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Hi(),Ud(d.i,d.v,d.B,d.l,d.S,d.u)}wi.prototype.ba=function(d){d=d.target;const b=this.O;b&&Ri(d)==3?b.j():this.Y(d)},wi.prototype.Y=function(d){try{if(d==this.g)t:{const Pt=Ri(this.g),De=this.g.ya(),se=this.g.ca();if(!(Pt<3)&&(Pt!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Pt!=4||De==7||(De==8||se<=0?Hi(3):Hi(2)),Ki(this);var b=this.g.ca();this.X=b;var T=Hd(this);if(this.o=b==200,Mu(this.i,this.v,this.B,this.l,this.S,Pt,b),this.o){if(this.U&&!this.L){e:{if(this.g){var C,H=this.g;if((C=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(C)){var K=C;break e}}K=null}if(d=K)Gi(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qi(this,d);else{this.o=!1,this.m=3,Le(12),Gn(this),ri(this);break t}}if(this.R){d=!0;let Te;for(;!this.K&&this.C<T.length;)if(Te=Vu(this,T),Te==Je){Pt==4&&(this.m=4,Le(14),d=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Te==je){this.m=4,Le(15),Gi(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else Gi(this.i,this.l,Te,null),Qi(this,Te);if(zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||T.length!=0||this.h.h||(this.m=1,Le(16),d=!1),this.o=this.o&&d,!d)Gi(this.i,this.l,T,"[Invalid Chunked Response]"),Gn(this),ri(this);else if(T.length>0&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.aa&&!gt.P&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Hl(gt),gt.P=!0,Le(11))}}else Gi(this.i,this.l,T,null),Qi(this,T);Pt==4&&Gn(this),this.o&&!this.K&&(Pt==4?Gu(this.j,this):(this.o=!1,Yi(this)))}else Ss(this.g),b==400&&T.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),Gn(this),ri(this)}}}catch{}finally{}};function Hd(d){if(!zu(d))return d.g.la();const b=on(d.g);if(b==="")return"";let T="";const C=b.length,H=Ri(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Gn(d),ri(d),"";d.h.i=new c.TextDecoder}for(let K=0;K<C;K++)d.h.h=!0,T+=d.h.i.decode(b[K],{stream:!(H&&K==C-1)});return b.length=0,d.h.g+=T,d.C=0,d.h.g}function zu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Vu(d,b){var T=d.C,C=b.indexOf(`
`,T);return C==-1?Je:(T=Number(b.substring(T,C)),isNaN(T)?je:(C+=1,C+T>b.length?Je:(b=b.slice(C,C+T),d.C=C+T,b)))}wi.prototype.cancel=function(){this.K=!0,Gn(this)};function Yi(d){d.T=Date.now()+d.H,ao(d,d.H)}function ao(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=qi(g(d.aa,d),b)}function Ki(d){d.D&&(c.clearTimeout(d.D),d.D=null)}wi.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(la(this.i,this.B),this.M!=2&&(Hi(),Le(17)),Gn(this),this.m=2,ri(this)):ao(this,this.T-d)};function ri(d){d.j.I==0||d.K||Gu(d.j,d)}function Gn(d){Ki(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Sn(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function Qi(d,b){try{var T=d.j;if(T.I!=0&&(T.g==d||Wi(T.h,d))){if(!d.L&&Wi(T.h,d)&&T.I==3){try{var C=T.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){t:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)mo(T),ur(T);else break t;_a(T),Le(18)}}else T.xa=H[1],0<T.xa-T.K&&H[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=qi(g(T.Va,T),6e3));Xi(T.h)<=1&&T.ta&&(T.ta=void 0)}else is(T,11)}else if((d.L||T.g==d)&&mo(T),!O(b))for(H=T.Ba.g.parse(b),b=0;b<H.length;b++){let se=H[b];const Te=se[0];if(!(Te<=T.K))if(T.K=Te,se=se[1],T.I==2)if(se[0]=="c"){T.M=se[1],T.ba=se[2];const li=se[3];li!=null&&(T.ka=li,T.j.info("VER="+T.ka));const ss=se[4];ss!=null&&(T.za=ss,T.j.info("SVER="+T.za));const Ii=se[5];Ii!=null&&typeof Ii=="number"&&Ii>0&&(C=1.5*Ii,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const ki=d.g;if(ki){const ba=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var K=C.h;K.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(kl(K,K.h),K.h=null))}if(C.G){const po=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;po&&(C.wa=po,oe(C.J,C.G,po))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var gt=d;if(C.na=Ku(C,C.L?C.ba:null,C.W),gt.L){Nl(C.h,gt);var Pt=gt,De=C.O;De&&(Pt.H=De),Pt.D&&(Ki(Pt),Yi(Pt)),C.g=gt}else Fu(C);T.i.length>0&&ns(T)}else se[0]!="stop"&&se[0]!="close"||is(T,7);else T.I==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?is(T,7):Ul(T):se[0]!="noop"&&T.l&&T.l.qa(se),T.A=0)}}Hi(4)}catch{}}var Ue=class{constructor(d,b){this.g=d,this.map=b}};function Rl(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Xi(d){return d.h?1:d.g?d.g.size:0}function Wi(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function kl(d,b){d.g?d.g.add(b):d.h=b}function Nl(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Rl.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Dl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const T of d.g.values())b=b.concat(T.G);return b}return w(d.i)}var Pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oo(d,b){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const C=d[T].indexOf("=");let H,K=null;C>=0?(H=d[T].substring(0,C),K=d[T].substring(C+1)):H=d[T],b(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function $n(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof $n?(this.l=d.l,tn(this,d.j),this.o=d.o,this.g=d.g,ir(this,d.u),this.h=d.h,Ml(this,Bu(d.i)),this.m=d.m):d&&(b=String(d).match(Pu))?(this.l=!1,tn(this,b[1]||"",!0),this.o=Zi(b[2]||""),this.g=Zi(b[3]||"",!0),ir(this,b[4]),this.h=Zi(b[5]||"",!0),Ml(this,b[6]||"",!0),this.m=Zi(b[7]||"")):(this.l=!1,this.i=new rr(null,this.l))}$n.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(fa(b,lo,!0),":");var T=this.g;return(T||b=="file")&&(d.push("//"),(b=this.o)&&d.push(fa(b,lo,!0),"@"),d.push(Es(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(fa(T,T.charAt(0)=="/"?Ol:Lu,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",fa(T,ju)),d.join("")},$n.prototype.resolve=function(d){const b=Be(this);let T=!!d.j;T?tn(b,d.j):T=!!d.o,T?b.o=d.o:T=!!d.g,T?b.g=d.g:T=d.u!=null;var C=d.h;if(T)ir(b,d.u);else if(T=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var H=b.h.lastIndexOf("/");H!=-1&&(C=b.h.slice(0,H+1)+C)}if(H=C,H==".."||H==".")C="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){C=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let gt=0;gt<H.length;){const Pt=H[gt++];Pt=="."?C&&gt==H.length&&K.push(""):Pt==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),C&&gt==H.length&&K.push("")):(K.push(Pt),C=!0)}C=K.join("/")}else C=H}return T?b.h=C:T=d.i.toString()!=="",T?Ml(b,Bu(d.i)):T=!!d.m,T&&(b.m=d.m),b};function Be(d){return new $n(d)}function tn(d,b,T){d.j=T?Zi(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function ir(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function Ml(d,b,T){b instanceof rr?(d.i=b,uo(d.i,d.l)):(T||(b=fa(b,sr)),d.i=new rr(b,d.l))}function oe(d,b,T){d.i.set(b,T)}function ha(d){return oe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Zi(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function fa(d,b,T){return typeof d=="string"?(d=encodeURI(d).replace(b,Nn),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Nn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var lo=/[#\/\?@]/g,Lu=/[#\?:]/g,Ol=/[#\?]/g,sr=/[#\?@]/g,ju=/#/g;function rr(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Dn(d){d.g||(d.g=new Map,d.h=0,d.i&&oo(d.i,function(b,T){d.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}n=rr.prototype,n.add=function(d,b){Dn(this),this.i=null,d=ar(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(b),this.h+=1,this};function Uu(d,b){Dn(d),b=ar(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function zl(d,b){return Dn(d),b=ar(d,b),d.g.has(b)}n.forEach=function(d,b){Dn(this),this.g.forEach(function(T,C){T.forEach(function(H){d.call(b,H,C,this)},this)},this)};function Vl(d,b){Dn(d);let T=[];if(typeof b=="string")zl(d,b)&&(T=T.concat(d.g.get(ar(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)T=T.concat(d[b]);return T}n.set=function(d,b){return Dn(this),this.i=null,d=ar(this,d),zl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},n.get=function(d,b){return d?(d=Vl(this,d),d.length>0?String(d[0]):b):b};function co(d,b,T){Uu(d,b),T.length>0&&(d.i=null,d.g.set(ar(d,b),w(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var T=b[C];const H=Es(T);T=Vl(this,T);for(let K=0;K<T.length;K++){let gt=H;T[K]!==""&&(gt+="="+Es(T[K])),d.push(gt)}}return this.i=d.join("&")};function Bu(d){const b=new rr;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function ar(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function uo(d,b){b&&!d.j&&(Dn(d),d.i=null,d.g.forEach(function(T,C){const H=C.toLowerCase();C!=H&&(Uu(this,C),co(this,H,T))},d)),d.j=b}function Ai(d,b){const T=new Ei;if(c.Image){const C=new Image;C.onload=y(ai,T,"TestLoadImage: loaded",!0,b,C),C.onerror=y(ai,T,"TestLoadImage: error",!1,b,C),C.onabort=y(ai,T,"TestLoadImage: abort",!1,b,C),C.ontimeout=y(ai,T,"TestLoadImage: timeout",!1,b,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else b(!1)}function Pl(d,b){const T=new Ei,C=new AbortController,H=setTimeout(()=>{C.abort(),ai(T,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:C.signal}).then(K=>{clearTimeout(H),K.ok?ai(T,"TestPingServer: ok",!0,b):ai(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(H),ai(T,"TestPingServer: error",!1,b)})}function ai(d,b,T,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(T)}catch{}}function or(){this.g=new ii}function Ji(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Ji,Iu),Ji.prototype.g=function(){return new da(this.i,this.h)};function da(d,b){dt.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(da,dt),n=da.prototype,n.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,Ci(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ho(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function ho(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?lr(this):Ci(this),this.readyState==3&&ho(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,lr(this))},n.Na=function(d){this.g&&(this.response=d,lr(this))},n.ga=function(){this.g&&lr(this)};function lr(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ci(d)}n.setRequestHeader=function(d,b){this.A.append(d,b)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=b.next();return d.join(`\r
`)};function Ci(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function oi(d){let b="";return Dt(d,function(T,C){b+=C,b+=":",b+=T,b+=`\r
`}),b}function ga(d,b,T){t:{for(C in T){var C=!1;break t}C=!0}C||(T=oi(T),typeof d=="string"?T!=null&&Es(T):oe(d,b,T))}function he(d){dt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(he,dt);var ts=/^https?$/i,Ll=["POST","PUT"];n=he.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,b,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cl.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(K){ma(this,K);return}if(d=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)T.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const K of C.keys())T.set(K,C.get(K));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),H=c.FormData&&d instanceof c.FormData,!(Array.prototype.indexOf.call(Ll,b,void 0)>=0)||C||H||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,gt]of T)this.g.setRequestHeader(K,gt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(K){ma(this,K)}};function ma(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,jl(d),ws(d)}function jl(d){d.A||(d.A=!0,ct(d,"complete"),ct(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,ct(this,"complete"),ct(this,"abort"),ws(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ws(this,!0)),he.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?pa(this):this.Xa())},n.Xa=function(){pa(this)};function pa(d){if(d.h&&typeof o<"u"){if(d.v&&Ri(d)==4)setTimeout(d.Ca.bind(d),0);else if(ct(d,"readystatechange"),Ri(d)==4){d.h=!1;try{const K=d.ca();t:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var T;if(!(T=b)){var C;if(C=K===0){let gt=String(d.D).match(Pu)[1]||null;!gt&&c.self&&c.self.location&&(gt=c.self.location.protocol.slice(0,-1)),C=!ts.test(gt?gt.toLowerCase():"")}T=C}if(T)ct(d,"complete"),ct(d,"success");else{d.o=6;try{var H=Ri(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",jl(d)}}finally{ws(d)}}}}function ws(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,b||ct(d,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ri(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),kn(b)}};function on(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ss(d){const b={};d=(d.g&&Ri(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(O(d[C]))continue;var T=Ou(d[C]);const H=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=b[H]||[];b[H]=K,K.push(T)}At(b,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(d,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||b}function cr(d){this.za=0,this.i=[],this.j=new Ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=es("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=es("baseRetryDelayMs",5e3,d),this.Za=es("retryDelaySeedMs",1e4,d),this.Ta=es("forwardChannelMaxRetries",2,d),this.va=es("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Rl(d&&d.concurrentRequestLimit),this.Ba=new or,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=cr.prototype,n.ka=8,n.I=1,n.connect=function(d,b,T,C){Le(0),this.W=d,this.H=b||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=Ku(this,null,this.W),ns(this)};function Ul(d){if(fo(d),d.I==3){var b=d.V++,T=Be(d.J);if(oe(T,"SID",d.M),oe(T,"RID",b),oe(T,"TYPE","terminate"),ya(d,T),b=new wi(d,d.j,b),b.M=2,b.A=ha(Be(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=b.A,T=!0),T||(b.g=Qu(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Yi(b)}Yu(d)}function ur(d){d.g&&(Hl(d),d.g.cancel(),d.g=null)}function fo(d){ur(d),d.v&&(c.clearTimeout(d.v),d.v=null),mo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&c.clearTimeout(d.m),d.m=null)}function ns(d){if(!Il(d.h)&&!d.m){d.m=!0;var b=d.Ea;st||A(),ot||(st(),ot=!0),I.add(b,d),d.D=0}}function go(d,b){return Xi(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=qi(g(d.Ea,d,b),$u(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new wi(this,this.j,d);let K=this.o;if(this.U&&(K?(K=z(K),ut(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)t:{for(var b=0,T=0;T<this.i.length;T++){e:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=T;break t}if(b===4096||T===this.i.length-1){b=T+1;break t}}b=1e3}else b=1e3;b=Hu(this,H,b),T=Be(this.J),oe(T,"RID",d),oe(T,"CVER",22),this.G&&oe(T,"X-HTTP-Session-Id",this.G),ya(this,T),K&&(this.R?b="headers="+Es(oi(K))+"&"+b:this.u&&ga(T,this.u,K)),kl(this.h,H),this.Ra&&oe(T,"TYPE","init"),this.S?(oe(T,"$req",b),oe(T,"SID","null"),H.U=!0,$i(H,T,null)):$i(H,T,b),this.I=2}}else this.I==3&&(d?Bl(this,d):this.i.length==0||Il(this.h)||Bl(this))};function Bl(d,b){var T;b?T=b.l:T=d.V++;const C=Be(d.J);oe(C,"SID",d.M),oe(C,"RID",T),oe(C,"AID",d.K),ya(d,C),d.u&&d.o&&ga(C,d.u,d.o),T=new wi(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),b&&(d.i=b.G.concat(d.i)),b=Hu(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),kl(d.h,T),$i(T,C,b)}function ya(d,b){d.H&&Dt(d.H,function(T,C){oe(b,C,T)}),d.l&&Dt({},function(T,C){oe(b,C,T)})}function Hu(d,b,T){T=Math.min(d.i.length,T);const C=d.l?g(d.l.Ka,d.l,d):null;t:{var H=d.i;let Pt=-1;for(;;){const De=["count="+T];Pt==-1?T>0?(Pt=H[0].g,De.push("ofs="+Pt)):Pt=0:De.push("ofs="+Pt);let se=!0;for(let Te=0;Te<T;Te++){var K=H[Te].g;const li=H[Te].map;if(K-=Pt,K<0)Pt=Math.max(0,H[Te].g-100),se=!1;else try{K="req"+K+"_"||"";try{var gt=li instanceof Map?li:Object.entries(li);for(const[ss,Ii]of gt){let ki=Ii;h(Ii)&&(ki=qn(Ii)),De.push(K+ss+"="+encodeURIComponent(ki))}}catch(ss){throw De.push(K+"type="+encodeURIComponent("_badmap")),ss}}catch{C&&C(li)}}if(se){gt=De.join("&");break t}}gt=void 0}return d=d.i.splice(0,T),b.G=d,gt}function Fu(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;st||A(),ot||(st(),ot=!0),I.add(b,d),d.A=0}}function _a(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=qi(g(d.Da,d),$u(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=qi(g(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),ur(this),qu(this))};function Hl(d){d.B!=null&&(c.clearTimeout(d.B),d.B=null)}function qu(d){d.g=new wi(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Be(d.na);oe(b,"RID","rpc"),oe(b,"SID",d.M),oe(b,"AID",d.K),oe(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&oe(b,"TO",d.ia),oe(b,"TYPE","xmlhttp"),ya(d,b),d.u&&d.o&&ga(b,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=ha(Be(b)),T.u=null,T.R=!0,ro(T,d)}n.Va=function(){this.C!=null&&(this.C=null,ur(this),_a(this),Le(19))};function mo(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Gu(d,b){var T=null;if(d.g==b){mo(d),Hl(d),d.g=null;var C=2}else if(Wi(d.h,b))T=b.G,Nl(d.h,b),C=1;else return;if(d.I!=0){if(b.o)if(C==1){T=b.u?b.u.length:0,b=Date.now()-b.F;var H=d.D;C=so(),ct(C,new Fi(C,T)),ns(d)}else Fu(d);else if(H=b.m,H==3||H==0&&b.X>0||!(C==1&&go(d,b)||C==2&&_a(d)))switch(T&&T.length>0&&(b=d.h,b.i=b.i.concat(T)),H){case 1:is(d,5);break;case 4:is(d,10);break;case 3:is(d,6);break;default:is(d,2)}}}function $u(d,b){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*b}function is(d,b){if(d.j.info("Error code "+b),b==2){var T=g(d.bb,d),C=d.Ua;const H=!C;C=new $n(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||tn(C,"https"),ha(C),H?Ai(C.toString(),T):Pl(C.toString(),T)}else Le(2);d.I=0,d.l&&d.l.pa(b),Yu(d),fo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Yu(d){if(d.I=0,d.ja=[],d.l){const b=Dl(d.h);(b.length!=0||d.i.length!=0)&&(k(d.ja,b),k(d.ja,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.oa()}}function Ku(d,b,T){var C=T instanceof $n?Be(T):new $n(T);if(C.g!="")b&&(C.g=b+"."+C.g),ir(C,C.u);else{var H=c.location;C=H.protocol,b=b?b+"."+H.hostname:H.hostname,H=+H.port;const K=new $n(null);C&&tn(K,C),b&&(K.g=b),H&&ir(K,H),T&&(K.h=T),C=K}return T=d.G,b=d.wa,T&&b&&oe(C,T,b),oe(C,"VER",d.ka),ya(d,C),C}function Qu(d,b,T){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new he(new Ji({ab:T})):new he(d.ma),b.Fa(d.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}n=Xu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function hr(){}hr.prototype.g=function(d,b){return new An(d,b)};function An(d,b){dt.call(this),this.g=new cr(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!O(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!O(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new As(this)}_(An,dt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Ul(this.g)},An.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=qn(d),d=T);b.i.push(new Ue(b.Ya++,d)),b.I==3&&ns(b)},An.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,An.Z.N.call(this)};function Wu(d){an.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){t:{for(const T in b){d=T;break t}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}_(Wu,an);function Zu(){si.call(this),this.status=1}_(Zu,si);function As(d){this.g=d}_(As,Xu),As.prototype.ra=function(){ct(this.g,"a")},As.prototype.qa=function(d){ct(this.g,new Wu(d))},As.prototype.pa=function(d){ct(this.g,new Zu)},As.prototype.oa=function(){ct(this.g,"b")},hr.prototype.createWebChannel=hr.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,UE=function(){return new hr},jE=function(){return so()},LE=Ne,xp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ca.NO_ERROR=0,ca.TIMEOUT=8,ca.HTTP_ERROR=6,Cf=ca,Al.COMPLETE="complete",PE=Al,ku.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Oc=ku,he.prototype.listenOnce=he.prototype.K,he.prototype.getLastError=he.prototype.Ha,he.prototype.getLastErrorCode=he.prototype.ya,he.prototype.getStatus=he.prototype.ca,he.prototype.getResponseJson=he.prototype.La,he.prototype.getResponseText=he.prototype.la,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Fa,VE=he}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});const y1="@firebase/firestore",_1="4.9.2";let bn=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let vl="12.3.0";const Wa=new Jp("@firebase/firestore");function Yo(){return Wa.logLevel}function yt(n,...t){if(Wa.logLevel<=Yt.DEBUG){const e=t.map(u0);Wa.debug(`Firestore (${vl}): ${n}`,...e)}}function Xs(n,...t){if(Wa.logLevel<=Yt.ERROR){const e=t.map(u0);Wa.error(`Firestore (${vl}): ${n}`,...e)}}function al(n,...t){if(Wa.logLevel<=Yt.WARN){const e=t.map(u0);Wa.warn(`Firestore (${vl}): ${n}`,...e)}}function u0(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function It(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,BE(n,i,e)}function BE(n,t,e){let i=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Xs(i),new Error(i)}function ae(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||BE(t,r,i)}function Vt(n,t){return n}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends Js{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class HE{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class uN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(bn.UNAUTHENTICATED)))}shutdown(){}}class hN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class fN{constructor(t){this.t=t,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ae(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let o=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yr,t.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},h=f=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yr)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ae(typeof i.accessToken=="string",31837,{l:i}),new HE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ae(t===null||typeof t=="string",2055,{h:t}),new bn(t)}}class dN{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gN{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new dN(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class b1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mN{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ae(this.o===void 0,3512);const i=o=>{o.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,yt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const r=o=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new b1(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(ae(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new b1(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pN(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class h0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=pN(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Kt(n,t){return n<t?-1:n>t?1:0}function Tp(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const r=n.charAt(i),o=t.charAt(i);if(r!==o)return Qm(r)===Qm(o)?Kt(r,o):Qm(r)?1:-1}return Kt(n.length,t.length)}const yN=55296,_N=57343;function Qm(n){const t=n.charCodeAt(0);return t>=yN&&t<=_N}function ol(n,t,e){return n.length===t.length&&n.every(((i,r)=>e(i,t[r])))}const v1="__name__";class fs{constructor(t,e,i){e===void 0?e=0:e>t.length&&It(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&It(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return fs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fs?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=fs.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Kt(t.length,e.length)}static compareSegments(t,e){const i=fs.isNumericId(t),r=fs.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?fs.extractNumericId(t).compare(fs.extractNumericId(e)):Tp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return $r.fromString(t.substring(4,t.length-2))}}class pe extends fs{construct(t,e,i){return new pe(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new mt(nt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((r=>r.length>0)))}return new pe(e)}static emptyPath(){return new pe([])}}const bN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends fs{construct(t,e,i){return new dn(t,e,i)}static isValidIdentifier(t){return bN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v1}static keyField(){return new dn([v1])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new mt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new mt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(o(),r++)}if(o(),c)throw new mt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new dn(e)}static emptyPath(){return new dn([])}}class St{constructor(t){this.path=t}static fromPath(t){return new St(pe.fromString(t))}static fromName(t){return new St(pe.fromString(t).popFirst(5))}static empty(){return new St(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return pe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new St(new pe(t.slice()))}}function FE(n,t,e){if(!e)throw new mt(nt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function vN(n,t,e,i){if(t===!0&&i===!0)throw new mt(nt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function x1(n){if(!St.isDocumentKey(n))throw new mt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T1(n){if(St.isDocumentKey(n))throw new mt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function md(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":It(12329,{type:typeof n})}function ni(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new mt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=md(n);throw new mt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function Ke(n,t){const e={typeString:n};return t&&(e.value=t),e}function bu(n,t){if(!qE(n))throw new mt(nt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new mt(nt.INVALID_ARGUMENT,e);return!0}const E1=-62135596800,w1=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(t){return xe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*w1);return new xe(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<E1)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w1}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(bu(t,xe._jsonSchema))return new xe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-E1;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Ke("string",xe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};class Ot{static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new xe(0,0))}static max(){return new Ot(new xe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const tu=-1;function xN(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ot.fromTimestamp(i===1e9?new xe(e+1,0):new xe(e,i));return new Xr(r,St.empty(),t)}function TN(n){return new Xr(n.readTime,n.key,tu)}class Xr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Xr(Ot.min(),St.empty(),tu)}static max(){return new Xr(Ot.max(),St.empty(),tu)}}function EN(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=St.comparator(n.documentKey,t.documentKey),e!==0?e:Kt(n.largestBatchId,t.largestBatchId))}const wN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function xl(n){if(n.code!==nt.FAILED_PRECONDITION||n.message!==wN)throw n;yt("LocalStore","Unexpectedly lost primary lease")}class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new rt(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof rt?e:rt.resolve(e)}catch(e){return rt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.reject(e)}static resolve(t){return new rt(((e,i)=>{e(t)}))}static reject(t){return new rt(((e,i)=>{i(t)}))}static waitFor(t){return new rt(((e,i)=>{let r=0,o=0,c=!1;t.forEach((h=>{++r,h.next((()=>{++o,c&&o===r&&e()}),(f=>i(f)))})),c=!0,o===r&&e()}))}static or(t){let e=rt.resolve(!1);for(const i of t)e=e.next((r=>r?rt.resolve(r):i()));return e}static forEach(t,e){const i=[];return t.forEach(((r,o)=>{i.push(e.call(this,r,o))})),this.waitFor(i)}static mapArray(t,e){return new rt(((i,r)=>{const o=t.length,c=new Array(o);let h=0;for(let f=0;f<o;f++){const g=f;e(t[g]).next((y=>{c[g]=y,++h,h===o&&i(c)}),(y=>r(y)))}}))}static doWhile(t,e){return new rt(((i,r)=>{const o=()=>{t()===!0?e().next((()=>{o()}),r):i()};o()}))}}function AN(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Tl(n){return n.name==="IndexedDbTransactionError"}class pd{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}pd.ce=-1;const f0=-1;function yd(n){return n==null}function Gf(n){return n===0&&1/n==-1/0}function CN(n){return typeof n=="number"&&Number.isInteger(n)&&!Gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const GE="";function RN(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=S1(t)),t=IN(n.get(e),t);return S1(t)}function IN(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case GE:e+="";break;default:e+=o}}return e}function S1(n){return n+GE+""}function A1(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ia(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function $E(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class we{constructor(t,e){this.comparator=t,this.root=e||fn.EMPTY}insert(t,e){return new we(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(t){return new we(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new rf(this.root,t,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new rf(this.root,t,this.comparator,!0)}}class rf{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fn{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??fn.RED,this.left=r??fn.EMPTY,this.right=o??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new fn(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return fn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw It(27949);return t+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new fn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ze{constructor(t){this.comparator=t,this.data=new we(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new C1(this.data.getIterator())}getIteratorFrom(t){return new C1(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Ze)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ze(this.comparator);return e.data=t,e}}class C1{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ti{constructor(t){this.fields=t,t.sort(dn.comparator)}static empty(){return new ti([])}unionWith(t){let e=new Ze(dn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ti(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ol(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}class YE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new YE("Invalid base64 string: "+o):o}})(t);return new gn(e)}static fromUint8Array(t){const e=(function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o})(t);return new gn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const kN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(n){if(ae(!!n,39018),typeof n=="string"){let t=0;const e=kN.exec(n);if(ae(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ze(n.seconds),nanos:ze(n.nanos)}}function ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zr(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}const KE="server_timestamp",QE="__type__",XE="__previous_value__",WE="__local_write_time__";function d0(n){return(n?.mapValue?.fields||{})[QE]?.stringValue===KE}function _d(n){const t=n.mapValue.fields[XE];return d0(t)?_d(t):t}function eu(n){const t=Wr(n.mapValue.fields[WE].timestampValue);return new xe(t.seconds,t.nanos)}class NN{constructor(t,e,i,r,o,c,h,f,g,y){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=y}}const $f="(default)";class nu{constructor(t,e){this.projectId=t,this.database=e||$f}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database===$f}isEqual(t){return t instanceof nu&&t.projectId===this.projectId&&t.database===this.database}}const ZE="__type__",DN="__max__",af={mapValue:{}},JE="__vector__",Yf="value";function Jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d0(n)?4:ON(n)?9007199254740991:MN(n)?10:11:It(28295,{value:n})}function Ts(n,t){if(n===t)return!0;const e=Jr(n);if(e!==Jr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return eu(n).isEqual(eu(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Wr(r.timestampValue),h=Wr(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(r,o){return Zr(r.bytesValue).isEqual(Zr(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(r,o){return ze(r.geoPointValue.latitude)===ze(o.geoPointValue.latitude)&&ze(r.geoPointValue.longitude)===ze(o.geoPointValue.longitude)})(n,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return ze(r.integerValue)===ze(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=ze(r.doubleValue),h=ze(o.doubleValue);return c===h?Gf(c)===Gf(h):isNaN(c)&&isNaN(h)}return!1})(n,t);case 9:return ol(n.arrayValue.values||[],t.arrayValue.values||[],Ts);case 10:case 11:return(function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(A1(c)!==A1(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!Ts(c[f],h[f])))return!1;return!0})(n,t);default:return It(52216,{left:n})}}function iu(n,t){return(n.values||[]).find((e=>Ts(e,t)))!==void 0}function ll(n,t){if(n===t)return 0;const e=Jr(n),i=Jr(t);if(e!==i)return Kt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return(function(o,c){const h=ze(o.integerValue||o.doubleValue),f=ze(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,t);case 3:return R1(n.timestampValue,t.timestampValue);case 4:return R1(eu(n),eu(t));case 5:return Tp(n.stringValue,t.stringValue);case 6:return(function(o,c){const h=Zr(o),f=Zr(c);return h.compareTo(f)})(n.bytesValue,t.bytesValue);case 7:return(function(o,c){const h=o.split("/"),f=c.split("/");for(let g=0;g<h.length&&g<f.length;g++){const y=Kt(h[g],f[g]);if(y!==0)return y}return Kt(h.length,f.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,c){const h=Kt(ze(o.latitude),ze(c.latitude));return h!==0?h:Kt(ze(o.longitude),ze(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return I1(n.arrayValue,t.arrayValue);case 10:return(function(o,c){const h=o.fields||{},f=c.fields||{},g=h[Yf]?.arrayValue,y=f[Yf]?.arrayValue,_=Kt(g?.values?.length||0,y?.values?.length||0);return _!==0?_:I1(g,y)})(n.mapValue,t.mapValue);case 11:return(function(o,c){if(o===af.mapValue&&c===af.mapValue)return 0;if(o===af.mapValue)return 1;if(c===af.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),g=c.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let _=0;_<f.length&&_<y.length;++_){const x=Tp(f[_],y[_]);if(x!==0)return x;const w=ll(h[f[_]],g[y[_]]);if(w!==0)return w}return Kt(f.length,y.length)})(n.mapValue,t.mapValue);default:throw It(23264,{he:e})}}function R1(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Kt(n,t);const e=Wr(n),i=Wr(t),r=Kt(e.seconds,i.seconds);return r!==0?r:Kt(e.nanos,i.nanos)}function I1(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=ll(e[r],i[r]);if(o)return o}return Kt(e.length,i.length)}function cl(n){return Ep(n)}function Ep(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=Wr(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Zr(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return St.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=Ep(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${Ep(e.fields[c])}`;return r+"}"})(n.mapValue):It(61005,{value:n})}function Rf(n){switch(Jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_d(n);return t?16+Rf(t):16;case 5:return 2*n.stringValue.length;case 6:return Zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+Rf(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return ia(i.fields,((o,c)=>{r+=o.length+Rf(c)})),r})(n.mapValue);default:throw It(13486,{value:n})}}function k1(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function wp(n){return!!n&&"integerValue"in n}function g0(n){return!!n&&"arrayValue"in n}function N1(n){return!!n&&"nullValue"in n}function D1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function If(n){return!!n&&"mapValue"in n}function MN(n){return(n?.mapValue?.fields||{})[ZE]?.stringValue===JE}function Fc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return ia(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Fc(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Fc(n.arrayValue.values[e]);return t}return{...n}}function ON(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DN}class Bn{constructor(t){this.value=t}static empty(){return new Bn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!If(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fc(e)}setAll(t){let e=dn.emptyPath(),i={},r=[];t.forEach(((c,h)=>{if(!e.isImmediateParentOf(h)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=h.popLast()}c?i[h.lastSegment()]=Fc(c):r.push(h.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());If(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ts(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];If(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){ia(e,((r,o)=>t[r]=o));for(const r of i)delete t[r]}clone(){return new Bn(Fc(this.value))}}function tw(n){const t=[];return ia(n.fields,((e,i)=>{const r=new dn([e]);if(If(i)){const o=tw(i.mapValue).fields;if(o.length===0)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)})),new ti(t)}class vn{constructor(t,e,i,r,o,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(t){return new vn(t,0,Ot.min(),Ot.min(),Ot.min(),Bn.empty(),0)}static newFoundDocument(t,e,i,r){return new vn(t,1,e,Ot.min(),i,r,0)}static newNoDocument(t,e){return new vn(t,2,e,Ot.min(),Ot.min(),Bn.empty(),0)}static newUnknownDocument(t,e){return new vn(t,3,e,Ot.min(),Ot.min(),Bn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof vn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kf{constructor(t,e){this.position=t,this.inclusive=e}}function M1(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(o.field.isKeyField()?i=St.comparator(St.fromName(c.referenceValue),e.key):i=ll(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function O1(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ts(n.position[e],t.position[e]))return!1;return!0}class su{constructor(t,e="asc"){this.field=t,this.dir=e}}function zN(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class ew{}class Ye extends ew{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new PN(t,e,i):e==="array-contains"?new UN(t,i):e==="in"?new BN(t,i):e==="not-in"?new HN(t,i):e==="array-contains-any"?new FN(t,i):new Ye(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new LN(t,i):new jN(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(ll(e,this.value)):e!==null&&Jr(this.value)===Jr(e)&&this.matchesComparison(ll(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ji extends ew{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ji(t,e)}matches(t){return nw(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nw(n){return n.op==="and"}function iw(n){return VN(n)&&nw(n)}function VN(n){for(const t of n.filters)if(t instanceof ji)return!1;return!0}function Sp(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+cl(n.value);if(iw(n))return n.filters.map((t=>Sp(t))).join(",");{const t=n.filters.map((e=>Sp(e))).join(",");return`${n.op}(${t})`}}function sw(n,t){return n instanceof Ye?(function(i,r){return r instanceof Ye&&i.op===r.op&&i.field.isEqual(r.field)&&Ts(i.value,r.value)})(n,t):n instanceof ji?(function(i,r){return r instanceof ji&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,c,h)=>o&&sw(c,r.filters[h])),!0):!1})(n,t):void It(19439)}function rw(n){return n instanceof Ye?(function(e){return`${e.field.canonicalString()} ${e.op} ${cl(e.value)}`})(n):n instanceof ji?(function(e){return e.op.toString()+" {"+e.getFilters().map(rw).join(" ,")+"}"})(n):"Filter"}class PN extends Ye{constructor(t,e,i){super(t,e,i),this.key=St.fromName(i.referenceValue)}matches(t){const e=St.comparator(t.key,this.key);return this.matchesComparison(e)}}class LN extends Ye{constructor(t,e){super(t,"in",e),this.keys=aw("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class jN extends Ye{constructor(t,e){super(t,"not-in",e),this.keys=aw("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function aw(n,t){return(t.arrayValue?.values||[]).map((e=>St.fromName(e.referenceValue)))}class UN extends Ye{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return g0(e)&&iu(e.arrayValue,this.value)}}class BN extends Ye{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&iu(this.value.arrayValue,e)}}class HN extends Ye{constructor(t,e){super(t,"not-in",e)}matches(t){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!iu(this.value.arrayValue,e)}}class FN extends Ye{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!g0(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>iu(this.value.arrayValue,i)))}}class qN{constructor(t,e=null,i=[],r=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function z1(n,t=null,e=[],i=[],r=null,o=null,c=null){return new qN(n,t,e,i,r,o,c)}function m0(n){const t=Vt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>Sp(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),yd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>cl(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>cl(i))).join(",")),t.Te=e}return t.Te}function p0(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!zN(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!sw(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!O1(n.startAt,t.startAt)&&O1(n.endAt,t.endAt)}function Ap(n){return St.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class El{constructor(t,e=null,i=[],r=[],o=null,c="F",h=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GN(n,t,e,i,r,o,c,h){return new El(n,t,e,i,r,o,c,h)}function y0(n){return new El(n)}function V1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ow(n){return n.collectionGroup!==null}function qc(n){const t=Vt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ze(dn.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new su(o,i))})),e.has(dn.keyField().canonicalString())||t.Ie.push(new su(dn.keyField(),i))}return t.Ie}function ys(n){const t=Vt(n);return t.Ee||(t.Ee=$N(t,qc(n))),t.Ee}function $N(n,t){if(n.limitType==="F")return z1(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new su(r.field,o)}));const e=n.endAt?new Kf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Kf(n.startAt.position,n.startAt.inclusive):null;return z1(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Cp(n,t){const e=n.filters.concat([t]);return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Rp(n,t,e){return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function bd(n,t){return p0(ys(n),ys(t))&&n.limitType===t.limitType}function lw(n){return`${m0(ys(n))}|lt:${n.limitType}`}function Ko(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((r=>rw(r))).join(", ")}]`),yd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>cl(r))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>cl(r))).join(",")),`Target(${i})`})(ys(n))}; limitType=${n.limitType})`}function vd(n,t){return t.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):St.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,r){for(const o of qc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,t)&&(function(i,r){return!(i.startAt&&!(function(c,h,f){const g=M1(c,h,f);return c.inclusive?g<=0:g<0})(i.startAt,qc(i),r)||i.endAt&&!(function(c,h,f){const g=M1(c,h,f);return c.inclusive?g>=0:g>0})(i.endAt,qc(i),r))})(n,t)}function YN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cw(n){return(t,e)=>{let i=!1;for(const r of qc(n)){const o=KN(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function KN(n,t,e){const i=n.field.isKeyField()?St.comparator(t.key,e.key):(function(o,c,h){const f=c.data.field(o),g=h.data.field(o);return f!==null&&g!==null?ll(f,g):It(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return It(19790,{direction:n.dir})}}class to{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ia(this.inner,((e,i)=>{for(const[r,o]of i)t(r,o)}))}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}const QN=new we(St.comparator);function Ws(){return QN}const uw=new we(St.comparator);function zc(...n){let t=uw;for(const e of n)t=t.insert(e.key,e);return t}function hw(n){let t=uw;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Ba(){return Gc()}function fw(){return Gc()}function Gc(){return new to((n=>n.toString()),((n,t)=>n.isEqual(t)))}const XN=new we(St.comparator),WN=new Ze(St.comparator);function Qt(...n){let t=WN;for(const e of n)t=t.add(e);return t}const ZN=new Ze(Kt);function JN(){return ZN}function _0(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(t)?"-0":t}}function dw(n){return{integerValue:""+n}}function tD(n,t){return CN(t)?dw(t):_0(n,t)}class xd{constructor(){this._=void 0}}function eD(n,t,e){return n instanceof ru?(function(r,o){const c={fields:{[QE]:{stringValue:KE},[WE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&d0(o)&&(o=_d(o)),o&&(c.fields[XE]=o),{mapValue:c}})(e,t):n instanceof au?mw(n,t):n instanceof ou?pw(n,t):(function(r,o){const c=gw(r,o),h=P1(c)+P1(r.Ae);return wp(c)&&wp(r.Ae)?dw(h):_0(r.serializer,h)})(n,t)}function nD(n,t,e){return n instanceof au?mw(n,t):n instanceof ou?pw(n,t):e}function gw(n,t){return n instanceof Qf?(function(i){return wp(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class ru extends xd{}class au extends xd{constructor(t){super(),this.elements=t}}function mw(n,t){const e=yw(t);for(const i of n.elements)e.some((r=>Ts(r,i)))||e.push(i);return{arrayValue:{values:e}}}class ou extends xd{constructor(t){super(),this.elements=t}}function pw(n,t){let e=yw(t);for(const i of n.elements)e=e.filter((r=>!Ts(r,i)));return{arrayValue:{values:e}}}class Qf extends xd{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function P1(n){return ze(n.integerValue||n.doubleValue)}function yw(n){return g0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class iD{constructor(t,e){this.field=t,this.transform=e}}function sD(n,t){return n.field.isEqual(t.field)&&(function(i,r){return i instanceof au&&r instanceof au||i instanceof ou&&r instanceof ou?ol(i.elements,r.elements,Ts):i instanceof Qf&&r instanceof Qf?Ts(i.Ae,r.Ae):i instanceof ru&&r instanceof ru})(n.transform,t.transform)}class rD{constructor(t,e){this.version=t,this.transformResults=e}}class Rn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Rn}static exists(t){return new Rn(void 0,t)}static updateTime(t){return new Rn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function kf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Td{}function _w(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Ed(n.key,Rn.none()):new vu(n.key,n.data,Rn.none());{const e=n.data,i=Bn.empty();let r=new Ze(dn.comparator);for(let o of t.fields)if(!r.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new sa(n.key,i,new ti(r.toArray()),Rn.none())}}function aD(n,t,e){n instanceof vu?(function(r,o,c){const h=r.value.clone(),f=j1(r.fieldTransforms,o,c.transformResults);h.setAll(f),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,t,e):n instanceof sa?(function(r,o,c){if(!kf(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=j1(r.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(bw(r)),f.setAll(h),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):(function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function $c(n,t,e,i){return n instanceof vu?(function(o,c,h,f){if(!kf(o.precondition,c))return h;const g=o.value.clone(),y=U1(o.fieldTransforms,f,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,t,e,i):n instanceof sa?(function(o,c,h,f){if(!kf(o.precondition,c))return h;const g=U1(o.fieldTransforms,f,c),y=c.data;return y.setAll(bw(o)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,t,e,i):(function(o,c,h){return kf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,t,e)}function oD(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=gw(i.transform,r||null);o!=null&&(e===null&&(e=Bn.empty()),e.set(i.field,o))}return e||null}function L1(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ol(i,r,((o,c)=>sD(o,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class vu extends Td{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class sa extends Td{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bw(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function j1(n,t,e){const i=new Map;ae(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,h=t.data.field(o.field);i.set(o.field,nD(c,h,e[r]))}return i}function U1(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,eD(o,c,t))}return i}class Ed extends Td{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lD extends Td{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cD{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&aD(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=$c(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=$c(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=fw();return this.mutations.forEach((r=>{const o=t.get(r.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=e.has(r.key)?null:h;const f=_w(c,h);f!==null&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(Ot.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Qt())}isEqual(t){return this.batchId===t.batchId&&ol(this.mutations,t.mutations,((e,i)=>L1(e,i)))&&ol(this.baseMutations,t.baseMutations,((e,i)=>L1(e,i)))}}class b0{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ae(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return XN})();const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new b0(t,e,i,r)}}class uD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hD{constructor(t,e){this.count=t,this.unchangedNames=e}}var $e,Jt;function fD(n){switch(n){case nt.OK:return It(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return It(15467,{code:n})}}function vw(n){if(n===void 0)return Xs("GRPC error has no .code"),nt.UNKNOWN;switch(n){case $e.OK:return nt.OK;case $e.CANCELLED:return nt.CANCELLED;case $e.UNKNOWN:return nt.UNKNOWN;case $e.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case $e.INTERNAL:return nt.INTERNAL;case $e.UNAVAILABLE:return nt.UNAVAILABLE;case $e.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case $e.NOT_FOUND:return nt.NOT_FOUND;case $e.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case $e.ABORTED:return nt.ABORTED;case $e.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case $e.DATA_LOSS:return nt.DATA_LOSS;default:return It(39323,{code:n})}}(Jt=$e||($e={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";function dD(){return new TextEncoder}const gD=new $r([4294967295,4294967295],0);function B1(n){const t=dD().encode(n),e=new zE;return e.update(t),new Uint8Array(e.digest())}function H1(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new $r([e,i],0),new $r([r,o],0)]}class v0{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Vc(`Invalid padding: ${e}`);if(i<0)throw new Vc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=$r.fromNumber(this.ge)}ye(t,e,i){let r=t.add(e.multiply($r.fromNumber(i)));return r.compare(gD)===1&&(r=new $r([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=B1(t),[i,r]=H1(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new v0(o,r,e);return i.forEach((h=>c.insert(h))),c}insert(t){if(this.ge===0)return;const e=B1(t),[i,r]=H1(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wd{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,xu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new wd(Ot.min(),r,new we(Kt),Ws(),Qt())}}class xu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new xu(i,e,Qt(),Qt(),Qt())}}class Nf{constructor(t,e,i,r){this.be=t,this.removedTargetIds=e,this.key=i,this.De=r}}class xw{constructor(t,e){this.targetId=t,this.Ce=e}}class Tw{constructor(t,e,i=gn.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class F1{constructor(){this.ve=0,this.Fe=q1(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Qt(),e=Qt(),i=Qt();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:It(38017,{changeType:o})}})),new xu(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=q1()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mD{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ws(),this.Je=of(),this.He=of(),this.Ye=new we(Kt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:It(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,r)=>{this.rt(r)&&e(r)}))}st(t){const e=t.targetId,i=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(Ap(o))if(i===0){const c=new St(o.path);this.et(e,c,vn.newNoDocument(c,Ot.min()))}else ae(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const h=this.ut(t),f=h?this.ct(h,t,c):1;if(f!==0){this.it(e);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let c,h;try{c=Zr(i).toUint8Array()}catch(f){if(f instanceof YE)return al("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new v0(c,r,o)}catch(f){return al(f instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let r=0;return i.forEach((o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.et(e,o,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((o,c)=>{const h=this.ot(c);if(h){if(o.current&&Ap(h.target)){const f=new St(h.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,vn.newNoDocument(f,t))}o.Be&&(e.set(c,o.ke()),o.qe())}}));let i=Qt();this.He.forEach(((o,c)=>{let h=!0;c.forEachWhile((f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(t)));const r=new wd(t,e,this.Ye,this.je,i);return this.je=Ws(),this.Je=of(),this.He=of(),this.Ye=new we(Kt),r}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new F1,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ze(Kt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ze(Kt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||yt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new F1),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function of(){return new we(St.comparator)}function q1(){return new we(St.comparator)}const pD={asc:"ASCENDING",desc:"DESCENDING"},yD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_D={and:"AND",or:"OR"};class bD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ip(n,t){return n.useProto3Json||yd(t)?t:{value:t}}function Xf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ew(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function vD(n,t){return Xf(n,t.toTimestamp())}function _s(n){return ae(!!n,49232),Ot.fromTimestamp((function(e){const i=Wr(e);return new xe(i.seconds,i.nanos)})(n))}function x0(n,t){return kp(n,t).canonicalString()}function kp(n,t){const e=(function(r){return new pe(["projects",r.projectId,"databases",r.database])})(n).child("documents");return t===void 0?e:e.child(t)}function ww(n){const t=pe.fromString(n);return ae(Iw(t),10190,{key:t.toString()}),t}function Np(n,t){return x0(n.databaseId,t.path)}function Xm(n,t){const e=ww(t);if(e.get(1)!==n.databaseId.projectId)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new St(Aw(e))}function Sw(n,t){return x0(n.databaseId,t)}function xD(n){const t=ww(n);return t.length===4?pe.emptyPath():Aw(t)}function Dp(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Aw(n){return ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function G1(n,t,e){return{name:Np(n,t),fields:e.value.mapValue.fields}}function TD(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:It(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(g,y){return g.useProto3Json?(ae(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(ae(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&(function(g){const y=g.code===void 0?nt.UNKNOWN:vw(g.code);return new mt(y,g.message||"")})(c);e=new Tw(i,r,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Xm(n,i.document.name),o=_s(i.document.updateTime),c=i.document.createTime?_s(i.document.createTime):Ot.min(),h=new Bn({mapValue:{fields:i.document.fields}}),f=vn.newFoundDocument(r,o,c,h),g=i.targetIds||[],y=i.removedTargetIds||[];e=new Nf(g,y,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Xm(n,i.document),o=i.readTime?_s(i.readTime):Ot.min(),c=vn.newNoDocument(r,o),h=i.removedTargetIds||[];e=new Nf([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Xm(n,i.document),o=i.removedTargetIds||[];e=new Nf([],o,r,null)}else{if(!("filter"in t))return It(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new hD(r,o),h=i.targetId;e=new xw(h,c)}}return e}function ED(n,t){let e;if(t instanceof vu)e={update:G1(n,t.key,t.value)};else if(t instanceof Ed)e={delete:Np(n,t.key)};else if(t instanceof sa)e={update:G1(n,t.key,t.data),updateMask:DD(t.fieldMask)};else{if(!(t instanceof lD))return It(16599,{Vt:t.type});e={verify:Np(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,c){const h=c.transform;if(h instanceof ru)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof au)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ou)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Qf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw It(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:vD(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:It(27497)})(n,t.precondition)),e}function wD(n,t){return n&&n.length>0?(ae(t!==void 0,14353),n.map((e=>(function(r,o){let c=r.updateTime?_s(r.updateTime):_s(o);return c.isEqual(Ot.min())&&(c=_s(o)),new rD(c,r.transformResults||[])})(e,t)))):[]}function SD(n,t){return{documents:[Sw(n,t.path)]}}function AD(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Sw(n,r);const o=(function(g){if(g.length!==0)return Rw(ji.create(g,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const c=(function(g){if(g.length!==0)return g.map((y=>(function(x){return{field:Qo(x.field),direction:ID(x.dir)}})(y)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=Ip(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:r}}function CD(n){let t=xD(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){ae(i===1,65062);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let o=[];e.where&&(o=(function(_){const x=Cw(_);return x instanceof ji&&iw(x)?x.getFilters():[x]})(e.where));let c=[];e.orderBy&&(c=(function(_){return _.map((x=>(function(k){return new su(Xo(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(e.orderBy));let h=null;e.limit&&(h=(function(_){let x;return x=typeof _=="object"?_.value:_,yd(x)?null:x})(e.limit));let f=null;e.startAt&&(f=(function(_){const x=!!_.before,w=_.values||[];return new Kf(w,x)})(e.startAt));let g=null;return e.endAt&&(g=(function(_){const x=!_.before,w=_.values||[];return new Kf(w,x)})(e.endAt)),GN(t,r,c,o,h,"F",f,g)}function RD(n,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:r})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Cw(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Xo(e.unaryFilter.field);return Ye.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Xo(e.unaryFilter.field);return Ye.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xo(e.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Xo(e.unaryFilter.field);return Ye.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ye.create(Xo(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return ji.create(e.compositeFilter.filters.map((i=>Cw(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return It(1026)}})(e.compositeFilter.op))})(n):It(30097,{filter:n})}function ID(n){return pD[n]}function kD(n){return yD[n]}function ND(n){return _D[n]}function Qo(n){return{fieldPath:n.canonicalString()}}function Xo(n){return dn.fromServerFormat(n.fieldPath)}function Rw(n){return n instanceof Ye?(function(e){if(e.op==="=="){if(D1(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NAN"}};if(N1(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(D1(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NOT_NAN"}};if(N1(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(e.field),op:kD(e.op),value:e.value}}})(n):n instanceof ji?(function(e){const i=e.getFilters().map((r=>Rw(r)));return i.length===1?i[0]:{compositeFilter:{op:ND(e.op),filters:i}}})(n):It(54877,{filter:n})}function DD(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Iw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class jr{constructor(t,e,i,r,o=Ot.min(),c=Ot.min(),h=gn.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(t){return new jr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class MD{constructor(t){this.yt=t}}function OD(n){const t=CD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rp(t,t.limit,"L"):t}class zD{constructor(){this.Cn=new VD}addToCollectionParentIndex(t,e){return this.Cn.add(e),rt.resolve()}getCollectionParents(t,e){return rt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return rt.resolve()}deleteFieldIndex(t,e){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,e){return rt.resolve()}getDocumentsMatchingTarget(t,e){return rt.resolve(null)}getIndexType(t,e){return rt.resolve(0)}getFieldIndexes(t,e){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,e){return rt.resolve(Xr.min())}getMinOffsetFromCollectionGroup(t,e){return rt.resolve(Xr.min())}updateCollectionGroup(t,e,i){return rt.resolve()}updateIndexEntries(t,e){return rt.resolve()}}class VD{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ze(pe.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ze(pe.comparator)).toArray()}}const $1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kw=41943040;class jn{static withCacheSize(t){return new jn(t,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(kw,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);class ul{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ul(0)}static cr(){return new ul(-1)}}const Y1="LruGarbageCollector",PD=1048576;function K1([n,t],[e,i]){const r=Kt(n,e);return r===0?Kt(t,i):r}class LD{constructor(t){this.Ir=t,this.buffer=new Ze(K1),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();K1(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class jD{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){yt(Y1,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Tl(e)?yt(Y1,"Ignoring IndexedDB error during garbage collection: ",e):await xl(e)}await this.Vr(3e5)}))}}class UD{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return rt.resolve(pd.ce);const i=new LD(e);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve($1)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$1):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,r,o,c,h,f,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,c=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(i=_,h=Date.now(),this.removeTargets(t,i,e)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(t,i)))).next((_=>(g=Date.now(),Yo()<=Yt.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(g-f)+`ms
Total Duration: ${g-y}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function BD(n,t){return new UD(n,t)}class HD{constructor(){this.changes=new to((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,vn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?rt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class FD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class qD{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(i!==null&&$c(i.mutation,r,ti.empty(),xe.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Qt()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Qt()){const r=Ba();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,i).next((o=>{let c=zc();return o.forEach(((h,f)=>{c=c.insert(h,f.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Ba();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Qt())))}populateOverlays(t,e,i){const r=[];return i.forEach((o=>{e.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((c,h)=>{e.set(c,h)}))}))}computeViews(t,e,i,r){let o=Ws();const c=Gc(),h=(function(){return Gc()})();return e.forEach(((f,g)=>{const y=i.get(g.key);r.has(g.key)&&(y===void 0||y.mutation instanceof sa)?o=o.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),$c(y.mutation,g,y.mutation.getFieldMask(),xe.now())):c.set(g.key,ti.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((g,y)=>c.set(g,y))),e.forEach(((g,y)=>h.set(g,new FD(y,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(t,e){const i=Gc();let r=new we(((c,h)=>c-h)),o=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const h of c)h.keys().forEach((f=>{const g=e.get(f);if(g===null)return;let y=i.get(f)||ti.empty();y=h.applyToLocalView(g,y),i.set(f,y);const _=(r.get(h.batchId)||Qt()).add(f);r=r.insert(h.batchId,_)}))})).next((()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),g=f.key,y=f.value,_=fw();y.forEach((x=>{if(!o.has(x)){const w=_w(e.get(x),i.get(x));w!==null&&_.set(x,w),o=o.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,_))}return rt.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,r){return(function(c){return St.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):ow(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next((o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):rt.resolve(Ba());let h=tu,f=o;return c.next((g=>rt.forEach(g,((y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(y)?rt.resolve():this.remoteDocumentCache.getEntry(t,y).next((x=>{f=f.insert(y,x)}))))).next((()=>this.populateOverlays(t,g,o))).next((()=>this.computeViews(t,f,g,Qt()))).next((y=>({batchId:h,changes:hw(y)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new St(e)).next((i=>{let r=zc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let c=zc();return this.indexManager.getCollectionParents(t,o).next((h=>rt.forEach(h,(f=>{const g=(function(_,x){return new El(x,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,r).next((y=>{y.forEach(((_,x)=>{c=c.insert(_,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r)))).next((c=>{o.forEach(((f,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,vn.newInvalidDocument(y)))}));let h=zc();return c.forEach(((f,g)=>{const y=o.get(f);y!==void 0&&$c(y.mutation,g,ti.empty(),xe.now()),vd(e,g)&&(h=h.insert(f,g))})),h}))}}class GD{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return rt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:_s(r.createTime)}})(e)),rt.resolve()}getNamedQuery(t,e){return rt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(r){return{name:r.name,query:OD(r.bundledQuery),readTime:_s(r.readTime)}})(e)),rt.resolve()}}class $D{constructor(){this.overlays=new we(St.comparator),this.qr=new Map}getOverlay(t,e){return rt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ba();return rt.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((r,o)=>{this.St(t,e,o)})),rt.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),rt.resolve()}getOverlaysForCollection(t,e,i){const r=Ba(),o=e.length+1,c=new St(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,g=f.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return rt.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new we(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let y=o.get(g.largestBatchId);y===null&&(y=Ba(),o=o.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=Ba(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((g,y)=>h.set(g,y))),!(h.size()>=r)););return rt.resolve(h)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new uD(e,i));let o=this.qr.get(e);o===void 0&&(o=Qt(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}class YD{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,rt.resolve()}}class T0{constructor(){this.Qr=new Ze(nn.$r),this.Ur=new Ze(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new nn(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Gr(new nn(t,e))}zr(t,e){t.forEach((i=>this.removeReference(i,e)))}jr(t){const e=new St(new pe([])),i=new nn(e,t),r=new nn(e,t+1),o=[];return this.Ur.forEachInRange([i,r],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new St(new pe([])),i=new nn(e,t),r=new nn(e,t+1);let o=Qt();return this.Ur.forEachInRange([i,r],(c=>{o=o.add(c.key)})),o}containsKey(t){const e=new nn(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class nn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return St.comparator(t.key,e.key)||Kt(t.Yr,e.Yr)}static Kr(t,e){return Kt(t.Yr,e.Yr)||St.comparator(t.key,e.key)}}class KD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(nn.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new cD(o,e,i,r);this.mutationQueue.push(c);for(const h of r)this.Zr=this.Zr.add(new nn(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return rt.resolve(c)}lookupMutationBatch(t,e){return rt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ei(i),o=r<0?0:r;return rt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?f0:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new nn(e,0),r=new nn(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(c=>{const h=this.Xr(c.Yr);o.push(h)})),rt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ze(Kt);return e.forEach((r=>{const o=new nn(r,0),c=new nn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(h=>{i=i.add(h.Yr)}))})),rt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;St.isDocumentKey(o)||(o=o.child(""));const c=new nn(new St(o),0);let h=new Ze(Kt);return this.Zr.forEachWhile((f=>{const g=f.key.path;return!!i.isPrefixOf(g)&&(g.length===r&&(h=h.add(f.Yr)),!0)}),c),rt.resolve(this.ti(h))}ti(t){const e=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){ae(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return rt.forEach(e.mutations,(r=>{const o=new nn(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,e){const i=new nn(e,0),r=this.Zr.firstAfterOrEqual(i);return rt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class QD{constructor(t){this.ri=t,this.docs=(function(){return new we(St.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return rt.resolve(i?i.document.mutableCopy():vn.newInvalidDocument(e))}getEntries(t,e){let i=Ws();return e.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():vn.newInvalidDocument(r))})),rt.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=Ws();const c=e.path,h=new St(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:g,value:{document:y}}=f.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||EN(TN(y),i)<=0||(r.has(y.key)||vd(e,y))&&(o=o.insert(y.key,y.mutableCopy()))}return rt.resolve(o)}getAllFromCollectionGroup(t,e,i,r){It(9500)}ii(t,e){return rt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new XD(this)}getSize(t){return rt.resolve(this.size)}}class XD extends HD{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),rt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class WD{constructor(t){this.persistence=t,this.si=new to((e=>m0(e)),p0),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.oi=0,this._i=new T0,this.targetCount=0,this.ai=ul.ur()}forEachTarget(t,e){return this.si.forEach(((i,r)=>e(r))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),rt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new ul(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,rt.resolve()}updateTargetData(t,e){return this.Pr(e),rt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)})),rt.waitFor(o).next((()=>r))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return rt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),rt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((c=>{o.push(r.markPotentiallyOrphaned(t,c))})),rt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),rt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return rt.resolve(i)}containsKey(t,e){return rt.resolve(this._i.containsKey(e))}}class Nw{constructor(t,e){this.ui={},this.overlays={},this.ci=new pd(0),this.li=!1,this.li=!0,this.hi=new YD,this.referenceDelegate=t(this),this.Pi=new WD(this),this.indexManager=new zD,this.remoteDocumentCache=(function(r){return new QD(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new MD(e),this.Ii=new GD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new $D,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new KD(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){yt("MemoryPersistence","Starting transaction:",t);const r=new ZD(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,e){return rt.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,e))))}}class ZD extends SN{constructor(t){super(),this.currentSequenceNumber=t}}class E0{constructor(t){this.persistence=t,this.Ri=new T0,this.Vi=null}static mi(t){return new E0(t)}get fi(){if(this.Vi)return this.Vi;throw It(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),rt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),rt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),rt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(i=>{const r=St.fromPath(i);return this.gi(t,r).next((o=>{o||e.removeEntry(r,Ot.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return rt.or([()=>rt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Wf{constructor(t,e){this.persistence=t,this.pi=new to((i=>RN(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=BD(this,e)}static mi(t,e){return new Wf(t,e)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((r=>i+r))))}wr(t){let e=0;return this.pr(t,(i=>{e++})).next((()=>e))}pr(t,e){return rt.forEach(this.pi,((i,r)=>this.br(t,i,r).next((o=>o?rt.resolve():e(r)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(c=>this.br(t,c,e).next((h=>{h||(i++,o.removeEntry(c,Ot.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Rf(t.data.value)),e}br(t,e,i){return rt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return rt.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class w0{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=r}static As(t,e){let i=Qt(),r=Qt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new w0(t,e.fromCache,i,r)}}class JD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class tM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AC()?8:AN(Tn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ys(t,e).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(t,e,r,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new JD;return this.Ss(t,e,c).next((h=>{if(o.result=h,this.Vs)return this.bs(t,e,c,h.size)}))})).next((()=>o.result))}bs(t,e,i,r){return i.documentReadCount<this.fs?(Yo()<=Yt.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",Ko(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(Yo()<=Yt.DEBUG&&yt("QueryEngine","Query:",Ko(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Yo()<=Yt.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",Ko(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ys(e))):rt.resolve())}ys(t,e){if(V1(e))return rt.resolve(null);let i=ys(e);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Rp(e,null,"F"),i=ys(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const c=Qt(...o);return this.ps.getDocuments(t,c).next((h=>this.indexManager.getMinOffset(t,i).next((f=>{const g=this.Ds(e,h);return this.Cs(e,g,c,f.readTime)?this.ys(t,Rp(e,null,"F")):this.vs(t,g,e,f)}))))})))))}ws(t,e,i,r){return V1(e)||r.isEqual(Ot.min())?rt.resolve(null):this.ps.getDocuments(t,i).next((o=>{const c=this.Ds(e,o);return this.Cs(e,c,i,r)?rt.resolve(null):(Yo()<=Yt.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ko(e)),this.vs(t,c,e,xN(r,tu)).next((h=>h)))}))}Ds(t,e){let i=new Ze(cw(t));return e.forEach(((r,o)=>{vd(t,o)&&(i=i.add(o))})),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,i){return Yo()<=Yt.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Ko(e)),this.ps.getDocumentsMatchingQuery(t,e,Xr.min(),i)}vs(t,e,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((o=>(e.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const S0="LocalStore",eM=3e8;class nM{constructor(t,e,i,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new we(Kt),this.xs=new to((o=>m0(o)),p0),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new qD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function iM(n,t,e,i){return new nM(n,t,e,i)}async function Dw(n,t){const e=Vt(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],h=[];let f=Qt();for(const g of r){c.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}for(const g of o){h.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}return e.localDocuments.getDocuments(i,f).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function sM(n,t){const e=Vt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,g,y){const _=g.batch,x=_.keys();let w=rt.resolve();return x.forEach((k=>{w=w.next((()=>y.getEntry(f,k))).next((R=>{const D=g.docVersions.get(k);ae(D!==null,48541),R.version.compareTo(D)<0&&(_.applyToRemoteDocument(R,g),R.isValidDocument()&&(R.setReadTime(g.commitVersion),y.addEntry(R)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(f,_)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let f=Qt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(f=f.add(h.batch.mutations[g].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(i,r)))}))}function Mw(n){const t=Vt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function rM(n,t){const e=Vt(n),i=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const h=[];t.targetChanges.forEach(((y,_)=>{const x=r.get(_);if(!x)return;h.push(e.Pi.removeMatchingKeys(o,y.removedDocuments,_).next((()=>e.Pi.addMatchingKeys(o,y.addedDocuments,_))));let w=x.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?w=w.withResumeToken(gn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),r=r.insert(_,w),(function(R,D,U){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=eM?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,w,y)&&h.push(e.Pi.updateTargetData(o,w))}));let f=Ws(),g=Qt();if(t.documentUpdates.forEach((y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,y))})),h.push(aM(o,c,t.documentUpdates).next((y=>{f=y.ks,g=y.qs}))),!i.isEqual(Ot.min())){const y=e.Pi.getLastRemoteSnapshotVersion(o).next((_=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));h.push(y)}return rt.waitFor(h).next((()=>c.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,f,g))).next((()=>f))})).then((o=>(e.Ms=r,o)))}function aM(n,t,e){let i=Qt(),r=Qt();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let c=Ws();return e.forEach(((h,f)=>{const g=o.get(h);f.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),f.isNoDocument()&&f.version.isEqual(Ot.min())?(t.removeEntry(h,f.readTime),c=c.insert(h,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(f),c=c.insert(h,f)):yt(S0,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",f.version)})),{ks:c,qs:r}}))}function oM(n,t){const e=Vt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=f0),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function lM(n,t){const e=Vt(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return e.Pi.getTargetData(i,t).next((o=>o?(r=o,rt.resolve(r)):e.Pi.allocateTargetId(i).next((c=>(r=new jr(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=e.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i}))}async function Mp(n,t,e){const i=Vt(n),r=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Tl(c))throw c;yt(S0,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function Q1(n,t,e){const i=Vt(n);let r=Ot.min(),o=Qt();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,g,y){const _=Vt(f),x=_.xs.get(y);return x!==void 0?rt.resolve(_.Ms.get(x)):_.Pi.getTargetData(g,y)})(i,c,ys(t)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,h.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,t,e?r:Ot.min(),e?o:Qt()))).next((h=>(cM(i,YN(t),h),{documents:h,Qs:o})))))}function cM(n,t,e){let i=n.Os.get(t)||Ot.min();e.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(t,i)}class X1{constructor(){this.activeTargetIds=JN()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uM{constructor(){this.Mo=new X1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new X1,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class hM{Oo(t){}shutdown(){}}const W1="ConnectivityMonitor";class Z1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yt(W1,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){yt(W1,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lf=null;function Op(){return lf===null?lf=(function(){return 268435456+Math.round(2147483648*Math.random())})():lf++,"0x"+lf.toString(16)}const Wm="RestConnection",fM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dM{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===$f?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,e,i,r,o){const c=Op(),h=this.zo(t,e.toUriEncodedString());yt(Wm,`Sending RPC '${t}' ${c}:`,h,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:g}=new URL(h),y=pl(g);return this.Jo(t,h,f,i,y).then((_=>(yt(Wm,`Received RPC '${t}' ${c}: `,_),_)),(_=>{throw al(Wm,`RPC '${t}' ${c} failed with error: `,_,"url: ",h,"request:",i),_}))}Ho(t,e,i,r,o,c){return this.Go(t,e,i,r,o)}jo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((r,o)=>t[o]=r)),i&&i.headers.forEach(((r,o)=>t[o]=r))}zo(t,e){const i=fM[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}class gM{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const yn="WebChannelConnection";class mM extends dM{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,o){const c=Op();return new Promise(((h,f)=>{const g=new VE;g.setWithCredentials(!0),g.listenOnce(PE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Cf.NO_ERROR:const _=g.getResponseJson();yt(yn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(_)),h(_);break;case Cf.TIMEOUT:yt(yn,`RPC '${t}' ${c} timed out`),f(new mt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const x=g.getStatus();if(yt(yn,`RPC '${t}' ${c} failed with status:`,x,"response text:",g.getResponseText()),x>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const k=w?.error;if(k&&k.status&&k.message){const R=(function(U){const W=U.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(W)>=0?W:nt.UNKNOWN})(k.status);f(new mt(R,k.message))}else f(new mt(nt.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new mt(nt.UNAVAILABLE,"Connection failed."));break;default:It(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{yt(yn,`RPC '${t}' ${c} completed.`)}}));const y=JSON.stringify(r);yt(yn,`RPC '${t}' ${c} sending request:`,r),g.send(e,"POST",y,i,15)}))}T_(t,e,i){const r=Op(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=UE(),h=jE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const y=o.join("");yt(yn,`Creating RPC '${t}' stream ${r}: ${y}`,f);const _=c.createWebChannel(y,f);this.I_(_);let x=!1,w=!1;const k=new gM({Yo:D=>{w?yt(yn,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(x||(yt(yn,`Opening RPC '${t}' stream ${r} transport.`),_.open(),x=!0),yt(yn,`RPC '${t}' stream ${r} sending:`,D),_.send(D))},Zo:()=>_.close()}),R=(D,U,W)=>{D.listen(U,(J=>{try{W(J)}catch(at){setTimeout((()=>{throw at}),0)}}))};return R(_,Oc.EventType.OPEN,(()=>{w||(yt(yn,`RPC '${t}' stream ${r} transport opened.`),k.o_())})),R(_,Oc.EventType.CLOSE,(()=>{w||(w=!0,yt(yn,`RPC '${t}' stream ${r} transport closed`),k.a_(),this.E_(_))})),R(_,Oc.EventType.ERROR,(D=>{w||(w=!0,al(yn,`RPC '${t}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new mt(nt.UNAVAILABLE,"The operation could not be completed")))})),R(_,Oc.EventType.MESSAGE,(D=>{if(!w){const U=D.data[0];ae(!!U,16349);const W=U,J=W?.error||W[0]?.error;if(J){yt(yn,`RPC '${t}' stream ${r} received error:`,J);const at=J.status;let st=(function(A){const N=$e[A];if(N!==void 0)return vw(N)})(at),ot=J.message;st===void 0&&(st=nt.INTERNAL,ot="Unknown error status: "+at+" with message "+J.message),w=!0,k.a_(new mt(st,ot)),_.close()}else yt(yn,`RPC '${t}' stream ${r} received:`,U),k.u_(U)}})),R(h,LE.STAT_EVENT,(D=>{D.stat===xp.PROXY?yt(yn,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===xp.NOPROXY&&yt(yn,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function Zm(){return typeof document<"u"?document:null}function Sd(n){return new bD(n,!0)}class Ow{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-i);r>0&&yt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const J1="PersistentStream";class zw{constructor(t,e,i,r,o,c,h,f){this.Mi=t,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ow(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===nt.RESOURCE_EXHAUSTED?(Xs(e.toString()),Xs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===e&&this.G_(i,r)}),(i=>{t((()=>{const r=new mt(nt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return yt(J1,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(yt(J1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pM extends zw{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=TD(this.serializer,t),i=(function(o){if(!("targetChange"in o))return Ot.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?_s(c.readTime):Ot.min()})(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=Dp(this.serializer),e.addTarget=(function(o,c){let h;const f=c.target;if(h=Ap(f)?{documents:SD(o,f)}:{query:AD(o,f).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=Ew(o,c.resumeToken);const g=Ip(o,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ot.min())>0){h.readTime=Xf(o,c.snapshotVersion.toTimestamp());const g=Ip(o,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,t);const i=RD(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=Dp(this.serializer),e.removeTarget=t,this.q_(e)}}class yM extends zw{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return ae(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ae(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ae(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=wD(t.writeResults,t.commitTime),i=_s(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Dp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>ED(this.serializer,i)))};this.q_(e)}}class _M{}class bM extends _M{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(t,kp(e,i),r,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mt(nt.UNKNOWN,o.toString())}))}Ho(t,e,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(t,kp(e,i),r,c,h,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new mt(nt.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class vM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xs(e),this.aa=!1):yt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Za="RemoteStore";class xM{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{eo(this)&&(yt(Za,"Restarting streams for network reachability change."),await(async function(f){const g=Vt(f);g.Ea.add(4),await Tu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ad(g)})(this))}))})),this.Ra=new vM(i,r)}}async function Ad(n){if(eo(n))for(const t of n.da)await t(!0)}async function Tu(n){for(const t of n.da)await t(!1)}function Vw(n,t){const e=Vt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),I0(e)?R0(e):wl(e).O_()&&C0(e,t))}function A0(n,t){const e=Vt(n),i=wl(e);e.Ia.delete(t),i.O_()&&Pw(e,t),e.Ia.size===0&&(i.O_()?i.L_():eo(e)&&e.Ra.set("Unknown"))}function C0(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ot.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}wl(n).Y_(t)}function Pw(n,t){n.Va.Ue(t),wl(n).Z_(t)}function R0(n){n.Va=new mD({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),wl(n).start(),n.Ra.ua()}function I0(n){return eo(n)&&!wl(n).x_()&&n.Ia.size>0}function eo(n){return Vt(n).Ea.size===0}function Lw(n){n.Va=void 0}async function TM(n){n.Ra.set("Online")}async function EM(n){n.Ia.forEach(((t,e)=>{C0(n,t)}))}async function wM(n,t){Lw(n),I0(n)?(n.Ra.ha(t),R0(n)):n.Ra.set("Unknown")}async function SM(n,t,e){if(n.Ra.set("Online"),t instanceof Tw&&t.state===2&&t.cause)try{await(async function(r,o){const c=o.cause;for(const h of o.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.Va.removeTarget(h))})(n,t)}catch(i){yt(Za,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Zf(n,i)}else if(t instanceof Nf?n.Va.Ze(t):t instanceof xw?n.Va.st(t):n.Va.tt(t),!e.isEqual(Ot.min()))try{const i=await Mw(n.localStore);e.compareTo(i)>=0&&await(function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach(((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(g);y&&o.Ia.set(g,y.withResumeToken(f.resumeToken,c))}})),h.targetMismatches.forEach(((f,g)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),Pw(o,f);const _=new jr(y.target,f,g,y.sequenceNumber);C0(o,_)})),o.remoteSyncer.applyRemoteEvent(h)})(n,e)}catch(i){yt(Za,"Failed to raise snapshot:",i),await Zf(n,i)}}async function Zf(n,t,e){if(!Tl(t))throw t;n.Ea.add(1),await Tu(n),n.Ra.set("Offline"),e||(e=()=>Mw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{yt(Za,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Ad(n)}))}function jw(n,t){return t().catch((e=>Zf(n,e,t)))}async function Cd(n){const t=Vt(n),e=ta(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:f0;for(;AM(t);)try{const r=await oM(t.localStore,i);if(r===null){t.Ta.length===0&&e.L_();break}i=r.batchId,CM(t,r)}catch(r){await Zf(t,r)}Uw(t)&&Bw(t)}function AM(n){return eo(n)&&n.Ta.length<10}function CM(n,t){n.Ta.push(t);const e=ta(n);e.O_()&&e.X_&&e.ea(t.mutations)}function Uw(n){return eo(n)&&!ta(n).x_()&&n.Ta.length>0}function Bw(n){ta(n).start()}async function RM(n){ta(n).ra()}async function IM(n){const t=ta(n);for(const e of n.Ta)t.ea(e.mutations)}async function kM(n,t,e){const i=n.Ta.shift(),r=b0.from(i,t,e);await jw(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Cd(n)}async function NM(n,t){t&&ta(n).X_&&await(async function(i,r){if((function(c){return fD(c)&&c!==nt.ABORTED})(r.code)){const o=i.Ta.shift();ta(i).B_(),await jw(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Cd(i)}})(n,t),Uw(n)&&Bw(n)}async function tx(n,t){const e=Vt(n);e.asyncQueue.verifyOperationInProgress(),yt(Za,"RemoteStore received new credentials");const i=eo(e);e.Ea.add(3),await Tu(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Ad(e)}async function DM(n,t){const e=Vt(n);t?(e.Ea.delete(2),await Ad(e)):t||(e.Ea.add(2),await Tu(e),e.Ra.set("Unknown"))}function wl(n){return n.ma||(n.ma=(function(e,i,r){const o=Vt(e);return o.sa(),new pM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:TM.bind(null,n),t_:EM.bind(null,n),r_:wM.bind(null,n),H_:SM.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),I0(n)?R0(n):n.Ra.set("Unknown")):(await n.ma.stop(),Lw(n))}))),n.ma}function ta(n){return n.fa||(n.fa=(function(e,i,r){const o=Vt(e);return o.sa(),new yM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:RM.bind(null,n),r_:NM.bind(null,n),ta:IM.bind(null,n),na:kM.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await Cd(n)):(await n.fa.stop(),n.Ta.length>0&&(yt(Za,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class k0{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,h=new k0(t,e,c,r,o);return h.start(i),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N0(n,t){if(Xs("AsyncQueue",`${t}: ${n}`),Tl(n))return new mt(nt.UNAVAILABLE,`${t}: ${n}`);throw n}class nl{static emptySet(t){return new nl(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||St.comparator(e.key,i.key):(e,i)=>St.comparator(e.key,i.key),this.keyedMap=zc(),this.sortedSet=new we(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof nl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new nl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class ex{constructor(){this.ga=new we(St.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):It(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class hl{constructor(t,e,i,r,o,c,h,f,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,r,o){const c=[];return e.forEach((h=>{c.push({type:0,doc:h})})),new hl(t,e,nl.emptySet(e),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class MM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class OM{constructor(){this.queries=nx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=Vt(e),o=r.queries;r.queries=nx(),o.forEach(((c,h)=>{for(const f of h.Sa)f.onError(i)}))})(this,new mt(nt.ABORTED,"Firestore shutting down"))}}function nx(){return new to((n=>lw(n)),bd)}async function Hw(n,t){const e=Vt(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(i=2):(o=new MM,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const h=N0(c,`Initialization of query '${Ko(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&D0(e)}async function Fw(n,t){const e=Vt(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const c=o.Sa.indexOf(t);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function zM(n,t){const e=Vt(n);let i=!1;for(const r of t){const o=r.query,c=e.queries.get(o);if(c){for(const h of c.Sa)h.Fa(r)&&(i=!0);c.wa=r}}i&&D0(e)}function VM(n,t,e){const i=Vt(n),r=i.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);i.queries.delete(t)}function D0(n){n.Ca.forEach((t=>{t.next()}))}var zp,ix;(ix=zp||(zp={})).Ma="default",ix.Cache="cache";class qw{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new hl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=hl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==zp.Cache}}class Gw{constructor(t){this.key=t}}class $w{constructor(t){this.key=t}}class PM{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qt(),this.mutatedKeys=Qt(),this.eu=cw(t),this.tu=new nl(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new ex,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((y,_)=>{const x=r.get(y),w=vd(this.query,_)?_:null,k=!!x&&this.mutatedKeys.has(x.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;x&&w?x.data.isEqual(w.data)?k!==R&&(i.track({type:3,doc:w}),D=!0):this.su(x,w)||(i.track({type:2,doc:w}),D=!0,(f&&this.eu(w,f)>0||g&&this.eu(w,g)<0)&&(h=!0)):!x&&w?(i.track({type:0,doc:w}),D=!0):x&&!w&&(i.track({type:1,doc:x}),D=!0,(f||g)&&(h=!0)),D&&(w?(c=c.add(w),o=R?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Cs:h,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((y,_)=>(function(w,k){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Rt:D})}};return R(w)-R(k)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(i),r=r??!1;const h=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,g=f!==this.Za;return this.Za=f,c.length!==0||g?{snapshot:new hl(this.query,t.tu,o,c,t.mutatedKeys,f===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Qt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const e=[];return t.forEach((i=>{this.Xa.has(i)||e.push(new $w(i))})),this.Xa.forEach((i=>{t.has(i)||e.push(new Gw(i))})),e}cu(t){this.Ya=t.Qs,this.Xa=Qt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const M0="SyncEngine";class LM{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class jM{constructor(t){this.key=t,this.hu=!1}}class UM{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new to((h=>lw(h)),bd),this.Iu=new Map,this.Eu=new Set,this.du=new we(St.comparator),this.Au=new Map,this.Ru=new T0,this.Vu={},this.mu=new Map,this.fu=ul.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BM(n,t,e=!0){const i=Zw(n);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await Yw(i,t,e,!0),r}async function HM(n,t){const e=Zw(n);await Yw(e,t,!0,!1)}async function Yw(n,t,e,i){const r=await lM(n.localStore,ys(t)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await FM(n,t,o,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&Vw(n.remoteStore,r),h}async function FM(n,t,e,i,r){n.pu=(_,x,w)=>(async function(R,D,U,W){let J=D.view.ru(U);J.Cs&&(J=await Q1(R.localStore,D.query,!1).then((({documents:I})=>D.view.ru(I,J))));const at=W&&W.targetChanges.get(D.targetId),st=W&&W.targetMismatches.get(D.targetId)!=null,ot=D.view.applyChanges(J,R.isPrimaryClient,at,st);return rx(R,D.targetId,ot.au),ot.snapshot})(n,_,x,w);const o=await Q1(n.localStore,t,!0),c=new PM(t,o.Qs),h=c.ru(o.documents),f=xu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),g=c.applyChanges(h,n.isPrimaryClient,f);rx(n,e,g.au);const y=new LM(t,e,c);return n.Tu.set(t,y),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),g.snapshot}async function qM(n,t,e){const i=Vt(n),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((c=>!bd(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Mp(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),e&&A0(i.remoteStore,r.targetId),Vp(i,r.targetId)})).catch(xl)):(Vp(i,r.targetId),await Mp(i.localStore,r.targetId,!0))}async function GM(n,t){const e=Vt(n),i=e.Tu.get(t),r=e.Iu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),A0(e.remoteStore,i.targetId))}async function $M(n,t,e){const i=JM(n);try{const r=await(function(c,h){const f=Vt(c),g=xe.now(),y=h.reduce(((w,k)=>w.add(k.key)),Qt());let _,x;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let k=Ws(),R=Qt();return f.Ns.getEntries(w,y).next((D=>{k=D,k.forEach(((U,W)=>{W.isValidDocument()||(R=R.add(U))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,k))).next((D=>{_=D;const U=[];for(const W of h){const J=oD(W,_.get(W.key).overlayedDocument);J!=null&&U.push(new sa(W.key,J,tw(J.value.mapValue),Rn.exists(!0)))}return f.mutationQueue.addMutationBatch(w,g,U,h)})).next((D=>{x=D;const U=D.applyToLocalDocumentSet(_,R);return f.documentOverlayCache.saveOverlays(w,D.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:hw(_)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(c,h,f){let g=c.Vu[c.currentUser.toKey()];g||(g=new we(Kt)),g=g.insert(h,f),c.Vu[c.currentUser.toKey()]=g})(i,r.batchId,e),await Eu(i,r.changes),await Cd(i.remoteStore)}catch(r){const o=N0(r,"Failed to persist write");e.reject(o)}}async function Kw(n,t){const e=Vt(n);try{const i=await rM(e.localStore,t);t.targetChanges.forEach(((r,o)=>{const c=e.Au.get(o);c&&(ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?ae(c.hu,14607):r.removedDocuments.size>0&&(ae(c.hu,42227),c.hu=!1))})),await Eu(e,i,t)}catch(i){await xl(i)}}function sx(n,t,e){const i=Vt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Tu.forEach(((o,c)=>{const h=c.view.va(t);h.snapshot&&r.push(h.snapshot)})),(function(c,h){const f=Vt(c);f.onlineState=h;let g=!1;f.queries.forEach(((y,_)=>{for(const x of _.Sa)x.va(h)&&(g=!0)})),g&&D0(f)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function YM(n,t,e){const i=Vt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Au.get(t),o=r&&r.key;if(o){let c=new we(St.comparator);c=c.insert(o,vn.newNoDocument(o,Ot.min()));const h=Qt().add(o),f=new wd(Ot.min(),new Map,new we(Kt),c,h);await Kw(i,f),i.du=i.du.remove(o),i.Au.delete(t),O0(i)}else await Mp(i.localStore,t,!1).then((()=>Vp(i,t,e))).catch(xl)}async function KM(n,t){const e=Vt(n),i=t.batch.batchId;try{const r=await sM(e.localStore,t);Xw(e,i,null),Qw(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Eu(e,r)}catch(r){await xl(r)}}async function QM(n,t,e){const i=Vt(n);try{const r=await(function(c,h){const f=Vt(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return f.mutationQueue.lookupMutationBatch(g,h).next((_=>(ae(_!==null,37113),y=_.keys(),f.mutationQueue.removeMutationBatch(g,_)))).next((()=>f.mutationQueue.performConsistencyCheck(g))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>f.localDocuments.getDocuments(g,y)))}))})(i.localStore,t);Xw(i,t,e),Qw(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Eu(i,r)}catch(r){await xl(r)}}function Qw(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function Xw(n,t,e){const i=Vt(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Vp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((i=>{n.Ru.containsKey(i)||Ww(n,i)}))}function Ww(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(A0(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),O0(n))}function rx(n,t,e){for(const i of e)i instanceof Gw?(n.Ru.addReference(i.key,t),XM(n,i)):i instanceof $w?(yt(M0,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||Ww(n,i.key)):It(19791,{wu:i})}function XM(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(yt(M0,"New document in limbo: "+e),n.Eu.add(i),O0(n))}function O0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new St(pe.fromString(t)),i=n.fu.next();n.Au.set(i,new jM(e)),n.du=n.du.insert(e,i),Vw(n.remoteStore,new jr(ys(y0(e.path)),i,"TargetPurposeLimboResolution",pd.ce))}}async function Eu(n,t,e){const i=Vt(n),r=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,f)=>{c.push(i.pu(f,t,e).then((g=>{if((g||e)&&i.isPrimaryClient){const y=g?!g.fromCache:e?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(g){r.push(g);const y=w0.As(f.targetId,g);o.push(y)}})))})),await Promise.all(c),i.Pu.H_(r),await(async function(f,g){const y=Vt(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>rt.forEach(g,(x=>rt.forEach(x.Es,(w=>y.persistence.referenceDelegate.addReference(_,x.targetId,w))).next((()=>rt.forEach(x.ds,(w=>y.persistence.referenceDelegate.removeReference(_,x.targetId,w)))))))))}catch(_){if(!Tl(_))throw _;yt(S0,"Failed to update sequence numbers: "+_)}for(const _ of g){const x=_.targetId;if(!_.fromCache){const w=y.Ms.get(x),k=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(k);y.Ms=y.Ms.insert(x,R)}}})(i.localStore,o))}async function WM(n,t){const e=Vt(n);if(!e.currentUser.isEqual(t)){yt(M0,"User change. New user:",t.toKey());const i=await Dw(e.localStore,t);e.currentUser=t,(function(o,c){o.mu.forEach((h=>{h.forEach((f=>{f.reject(new mt(nt.CANCELLED,c))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Eu(e,i.Ls)}}function ZM(n,t){const e=Vt(n),i=e.Au.get(t);if(i&&i.hu)return Qt().add(i.key);{let r=Qt();const o=e.Iu.get(t);if(!o)return r;for(const c of o){const h=e.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function Zw(n){const t=Vt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Kw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YM.bind(null,t),t.Pu.H_=zM.bind(null,t.eventManager),t.Pu.yu=VM.bind(null,t.eventManager),t}function JM(n){const t=Vt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=QM.bind(null,t),t}class Jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Sd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return iM(this.persistence,new tM,t.initialUser,this.serializer)}Cu(t){return new Nw(E0.mi,this.serializer)}Du(t){return new uM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jf.provider={build:()=>new Jf};class tO extends Jf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){ae(this.persistence.referenceDelegate instanceof Wf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jD(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new Nw((i=>Wf.mi(i,e)),this.serializer)}}class Pp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WM.bind(null,this.syncEngine),await DM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new OM})()}createDatastore(t){const e=Sd(t.databaseInfo.databaseId),i=(function(o){return new mM(o)})(t.databaseInfo);return(function(o,c,h,f){return new bM(o,c,h,f)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,r,o,c,h){return new xM(i,r,o,c,h)})(this.localStore,this.datastore,t.asyncQueue,(e=>sx(this.syncEngine,e,0)),(function(){return Z1.v()?new Z1:new hM})())}createSyncEngine(t,e){return(function(r,o,c,h,f,g,y){const _=new UM(r,o,c,h,f,g);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const i=Vt(e);yt(Za,"RemoteStore shutting down."),i.Ea.add(5),await Tu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Pp.provider={build:()=>new Pp};class Jw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const ea="FirestoreClient";class eO{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=bn.UNAUTHENTICATED,this.clientId=h0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{yt(ea,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(yt(ea,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=N0(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function Jm(n,t){n.asyncQueue.verifyOperationInProgress(),yt(ea,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await Dw(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function ax(n,t){n.asyncQueue.verifyOperationInProgress();const e=await nO(n);yt(ea,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>tx(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>tx(t.remoteStore,r))),n._onlineComponents=t}async function nO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){yt(ea,"Using user provided OfflineComponentProvider");try{await Jm(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===nt.FAILED_PRECONDITION||r.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;al("Error using user provided cache. Falling back to memory cache: "+e),await Jm(n,new Jf)}}else yt(ea,"Using default OfflineComponentProvider"),await Jm(n,new tO(void 0));return n._offlineComponents}async function tS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(yt(ea,"Using user provided OnlineComponentProvider"),await ax(n,n._uninitializedComponentsProvider._online)):(yt(ea,"Using default OnlineComponentProvider"),await ax(n,new Pp))),n._onlineComponents}function iO(n){return tS(n).then((t=>t.syncEngine))}async function Lp(n){const t=await tS(n),e=t.eventManager;return e.onListen=BM.bind(null,t.syncEngine),e.onUnlisten=qM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=HM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=GM.bind(null,t.syncEngine),e}function sO(n,t,e={}){const i=new Yr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,f,g){const y=new Jw({next:x=>{y.Nu(),c.enqueueAndForget((()=>Fw(o,_))),x.fromCache&&f.source==="server"?g.reject(new mt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),_=new qw(h,y,{includeMetadataChanges:!0,qa:!0});return Hw(o,_)})(await Lp(n),n.asyncQueue,t,e,i))),i.promise}function eS(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const ox=new Map;const nS="firestore.googleapis.com",lx=!0;class cx{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new mt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nS,this.ssl=lx}else this.host=t.host,this.ssl=t.ssl??lx;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=kw;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<PD)throw new mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eS(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Rd{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cx(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uN;switch(i.type){case"firstParty":return new gN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new mt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=ox.get(e);i&&(yt("ComponentProvider","Removing Datastore"),ox.delete(e),i.terminate())})(this),Promise.resolve()}}function rO(n,t,e,i={}){n=ni(n,Rd);const r=pl(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${t}:${e}`;r&&(GT(`https://${h}`),$T("Firestore",!0)),o.host!==nS&&o.host!==h&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:r,emulatorOptions:i};if(!Ka(f,c)&&(n._setSettings(f),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=bn.MOCK_USER;else{g=yC(i.mockUserToken,n._app?.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new mt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new bn(_)}n._authCredentials=new hN(new HE(g,y))}}class ra{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ra(this.firestore,t,this._query)}}class Ve{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ve(this.firestore,t,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(bu(e,Ve._jsonSchema))return new Ve(t,i||null,new St(pe.fromString(e.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Ke("string",Ve._jsonSchemaVersion),referencePath:Ke("string")};class Kr extends ra{constructor(t,e,i){super(t,e,y0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ve(this.firestore,null,new St(t))}withConverter(t){return new Kr(this.firestore,t,this._path)}}function fl(n,t,...e){if(n=Ce(n),FE("collection","path",t),n instanceof Rd){const i=pe.fromString(t,...e);return T1(i),new Kr(n,null,i)}{if(!(n instanceof Ve||n instanceof Kr))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pe.fromString(t,...e));return T1(i),new Kr(n.firestore,null,i)}}function ei(n,t,...e){if(n=Ce(n),arguments.length===1&&(t=h0.newId()),FE("doc","path",t),n instanceof Rd){const i=pe.fromString(t,...e);return x1(i),new Ve(n,null,new St(i))}{if(!(n instanceof Ve||n instanceof Kr))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pe.fromString(t,...e));return x1(i),new Ve(n.firestore,n instanceof Kr?n.converter:null,new St(i))}}const ux="AsyncQueue";class hx{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ow(this,"async_queue_retry"),this._c=()=>{const i=Zm();i&&yt(ux,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Zm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Zm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Tl(t))throw t;yt(ux,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Xs("INTERNAL UNHANDLED ERROR: ",fx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=k0.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&It(47125,{Pc:fx(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function fx(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}function dx(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Zs extends Rd{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new hx,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hx(t),this._firestoreClient=void 0,await t}}}function aO(n,t){const e=typeof n=="object"?n:XT(),i=typeof n=="string"?n:$f,r=e0(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=mC("firestore");o&&rO(r,...o)}return r}function Id(n){if(n._terminated)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oO(n),n._firestoreClient}function oO(n){const t=n._freezeSettings(),e=(function(r,o,c,h){return new NN(r,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new eO(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(n._componentsProvider))}class _i{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _i(gn.fromBase64String(t))}catch(e){throw new mt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new _i(gn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(bu(t,_i._jsonSchema))return _i.fromBase64String(t.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Ke("string",_i._jsonSchemaVersion),bytes:Ke("string")};class wu{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new mt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class kd{constructor(t){this._methodName=t}}class bs{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new mt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(t){if(bu(t,bs._jsonSchema))return new bs(t.latitude,t.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:Ke("string",bs._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};class vs{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(bu(t,vs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new vs(t.vectorValues);throw new mt(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vs._jsonSchemaVersion="firestore/vectorValue/1.0",vs._jsonSchema={type:Ke("string",vs._jsonSchemaVersion),vectorValues:Ke("object")};const lO=/^__.*__$/;class cO{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new sa(t,this.data,this.fieldMask,e,this.fieldTransforms):new vu(t,this.data,e,this.fieldTransforms)}}class iS{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new sa(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function sS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ac:n})}}class z0{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new z0({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return td(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(sS(this.Ac)&&lO.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class uO{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Sd(t)}Cc(t,e,i,r=!1){return new z0({Ac:t,methodName:e,Dc:i,path:dn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Su(n){const t=n._freezeSettings(),e=Sd(n._databaseId);return new uO(n._databaseId,!!t.ignoreUndefinedProperties,e)}function V0(n,t,e,i,r,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,t,e,r);L0("Data must be an object, but it was:",c,i);const h=oS(i,c);let f,g;if(o.merge)f=new ti(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const x=jp(t,_,e);if(!c.contains(x))throw new mt(nt.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);cS(y,x)||y.push(x)}f=new ti(y),g=c.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,g=c.fieldTransforms;return new cO(new Bn(h),f,g)}class Nd extends kd{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Nd}}class P0 extends kd{_toFieldTransform(t){return new iD(t.path,new ru)}isEqual(t){return t instanceof P0}}function rS(n,t,e,i){const r=n.Cc(1,t,e);L0("Data must be an object, but it was:",r,i);const o=[],c=Bn.empty();ia(i,((f,g)=>{const y=j0(t,f,e);g=Ce(g);const _=r.yc(y);if(g instanceof Nd)o.push(y);else{const x=Au(g,_);x!=null&&(o.push(y),c.set(y,x))}}));const h=new ti(o);return new iS(c,h,r.fieldTransforms)}function aS(n,t,e,i,r,o){const c=n.Cc(1,t,e),h=[jp(t,i,e)],f=[r];if(o.length%2!=0)throw new mt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(jp(t,o[x])),f.push(o[x+1]);const g=[],y=Bn.empty();for(let x=h.length-1;x>=0;--x)if(!cS(g,h[x])){const w=h[x];let k=f[x];k=Ce(k);const R=c.yc(w);if(k instanceof Nd)g.push(w);else{const D=Au(k,R);D!=null&&(g.push(w),y.set(w,D))}}const _=new ti(g);return new iS(y,_,c.fieldTransforms)}function hO(n,t,e,i=!1){return Au(e,n.Cc(i?4:3,t))}function Au(n,t){if(lS(n=Ce(n)))return L0("Unsupported field value:",t,n),oS(n,t);if(n instanceof kd)return(function(i,r){if(!sS(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let c=0;for(const h of i){let f=Au(h,r.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}})(n,t)}return(function(i,r){if((i=Ce(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=xe.fromDate(i);return{timestampValue:Xf(r.serializer,o)}}if(i instanceof xe){const o=new xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xf(r.serializer,o)}}if(i instanceof bs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _i)return{bytesValue:Ew(r.serializer,i._byteString)};if(i instanceof Ve){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:x0(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof vs)return(function(c,h){return{mapValue:{fields:{[ZE]:{stringValue:JE},[Yf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return _0(h.serializer,g)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${md(i)}`)})(n,t)}function oS(n,t){const e={};return $E(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ia(n,((i,r)=>{const o=Au(r,t.mc(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function lS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xe||n instanceof bs||n instanceof _i||n instanceof Ve||n instanceof kd||n instanceof vs)}function L0(n,t,e){if(!lS(e)||!qE(e)){const i=md(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function jp(n,t,e){if((t=Ce(t))instanceof wu)return t._internalPath;if(typeof t=="string")return j0(n,t);throw td("Field path arguments must be of type string or ",n,!1,void 0,e)}const fO=new RegExp("[~\\*/\\[\\]]");function j0(n,t,e){if(t.search(fO)>=0)throw td(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new wu(...t.split("."))._internalPath}catch{throw td(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function td(n,t,e,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new mt(nt.INVALID_ARGUMENT,h+n+f)}function cS(n,t){return n.some((e=>e.isEqual(t)))}class uS{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new dO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(U0("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class dO extends uS{data(){return super.data()}}function U0(n,t){return typeof t=="string"?j0(n,t):t instanceof wu?t._internalPath:t._delegate._internalPath}function hS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new mt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B0{}class fS extends B0{}function Up(n,t,...e){let i=[];t instanceof B0&&i.push(t),i=i.concat(e),(function(o){const c=o.filter((f=>f instanceof F0)).length,h=o.filter((f=>f instanceof H0)).length;if(c>1||c>0&&h>0)throw new mt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class H0 extends fS{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new H0(t,e,i)}_apply(t){const e=this._parse(t);return dS(t._query,e),new ra(t.firestore,t.converter,Cp(t._query,e))}_parse(t){const e=Su(t.firestore);return(function(o,c,h,f,g,y,_){let x;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){px(_,y);const k=[];for(const R of _)k.push(mx(f,o,R));x={arrayValue:{values:k}}}else x=mx(f,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||px(_,y),x=hO(h,c,_,y==="in"||y==="not-in");return Ye.create(g,y,x)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class F0 extends B0{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new F0(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:ji.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,o){let c=r;const h=o.getFlattenedFilters();for(const f of h)dS(c,f),c=Cp(c,f)})(t._query,e),new ra(t.firestore,t.converter,Cp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q0 extends fS{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new q0(t,e)}_apply(t){const e=(function(r,o,c){if(r.startAt!==null)throw new mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new su(o,c)})(t._query,this._field,this._direction);return new ra(t.firestore,t.converter,(function(r,o){const c=r.explicitOrderBy.concat([o]);return new El(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(t._query,e))}}function gx(n,t="asc"){const e=t,i=U0("orderBy",n);return q0._create(i,e)}function mx(n,t,e){if(typeof(e=Ce(e))=="string"){if(e==="")throw new mt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ow(t)&&e.indexOf("/")!==-1)throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(pe.fromString(e));if(!St.isDocumentKey(i))throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return k1(n,new St(i))}if(e instanceof Ve)return k1(n,e._key);throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${md(e)}.`)}function px(n,t){if(!Array.isArray(n)||n.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dS(n,t){const e=(function(r,o){for(const c of r)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class gO{convertValue(t,e="none"){switch(Jr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ze(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw It(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return ia(t,((r,o)=>{i[r]=this.convertValue(o,e)})),i}convertVectorValue(t){const e=t.fields?.[Yf].arrayValue?.values?.map((i=>ze(i.doubleValue)));return new vs(e)}convertGeoPoint(t){return new bs(ze(t.latitude),ze(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=_d(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(eu(t));default:return null}}convertTimestamp(t){const e=Wr(t);return new xe(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=pe.fromString(t);ae(Iw(i),9688,{name:t});const r=new nu(i.get(1),i.get(3)),o=new St(i.popFirst(5));return r.isEqual(e)||Xs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function G0(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class Pc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qa extends uS{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(U0("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=qa._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",qa._jsonSchema={type:Ke("string",qa._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class Df extends qa{data(t={}){return super.data(t)}}class Ga{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Pc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Df(this._firestore,this._userDataWriter,i.key,i,new Pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((h=>{const f=new Df(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Pc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const f=new Df(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Pc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:mO(h.type),doc:f,oldIndex:g,newIndex:y}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ga._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=h0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function mO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:n})}}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:Ke("string",Ga._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class $0 extends gO{constructor(t){super(),this.firestore=t}convertBytes(t){return new _i(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ve(this.firestore,null,e)}}function yx(n){n=ni(n,ra);const t=ni(n.firestore,Zs),e=Id(t),i=new $0(t);return hS(n._query),sO(e,n._query).then((r=>new Ga(t,i,n,r)))}function Mf(n,t,e){n=ni(n,Ve);const i=ni(n.firestore,Zs),r=G0(n.converter,t,e);return Cu(i,[V0(Su(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Rn.none())])}function Y0(n,t,e,...i){n=ni(n,Ve);const r=ni(n.firestore,Zs),o=Su(r);let c;return c=typeof(t=Ce(t))=="string"||t instanceof wu?aS(o,"updateDoc",n._key,t,e,i):rS(o,"updateDoc",n._key,t),Cu(r,[c.toMutation(n._key,Rn.exists(!0))])}function gS(n){return Cu(ni(n.firestore,Zs),[new Ed(n._key,Rn.none())])}function mS(n,t){const e=ni(n.firestore,Zs),i=ei(n),r=G0(n.converter,t);return Cu(e,[V0(Su(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Rn.exists(!1))]).then((()=>i))}function Of(n,...t){n=Ce(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||dx(t[i])||(e=t[i++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(dx(t[i])){const f=t[i];t[i]=f.next?.bind(f),t[i+1]=f.error?.bind(f),t[i+2]=f.complete?.bind(f)}let o,c,h;if(n instanceof Ve)c=ni(n.firestore,Zs),h=y0(n._key.path),o={next:f=>{t[i]&&t[i](pO(c,n,f))},error:t[i+1],complete:t[i+2]};else{const f=ni(n,ra);c=ni(f.firestore,Zs),h=f._query;const g=new $0(c);o={next:y=>{t[i]&&t[i](new Ga(c,g,f,y))},error:t[i+1],complete:t[i+2]},hS(n._query)}return(function(g,y,_,x){const w=new Jw(x),k=new qw(y,w,_);return g.asyncQueue.enqueueAndForget((async()=>Hw(await Lp(g),k))),()=>{w.Nu(),g.asyncQueue.enqueueAndForget((async()=>Fw(await Lp(g),k)))}})(Id(c),h,r,o)}function Cu(n,t){return(function(i,r){const o=new Yr;return i.asyncQueue.enqueueAndForget((async()=>$M(await iO(i),r,o))),o.promise})(Id(n),t)}function pO(n,t,e){const i=e.docs.get(t._key),r=new $0(n);return new qa(n,r,t._key,i,new Pc(e.hasPendingWrites,e.fromCache),t.converter)}class yO{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Su(t)}set(t,e,i){this._verifyNotCommitted();const r=tp(t,this._firestore),o=G0(r.converter,e,i),c=V0(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(c.toMutation(r._key,Rn.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=tp(t,this._firestore);let c;return c=typeof(e=Ce(e))=="string"||e instanceof wu?aS(this._dataReader,"WriteBatch.update",o._key,e,i,r):rS(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,Rn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=tp(t,this._firestore);return this._mutations=this._mutations.concat(new Ed(e._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mt(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tp(n,t){if((n=Ce(n)).firestore!==t)throw new mt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Bp(){return new P0("serverTimestamp")}function _O(n){return Id(n=ni(n,Zs)),new yO(n,(t=>Cu(n,t)))}(function(t,e=!0){(function(r){vl=r})(yl),sl(new Qa("firestore",((i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new Zs(new fN(i.getProvider("auth-internal")),new mN(c,i.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new mt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(g.options.projectId,y)})(c,r),c);return o={useFetchStreams:e,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),Gr(y1,_1,t),Gr(y1,_1,"esm2020")})();const bO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase()),_x=n=>{const t=vO(n);return t.charAt(0).toUpperCase()+t.slice(1)},pS=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim(),xO=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var TO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EO=lt.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:c,...h},f)=>lt.createElement("svg",{ref:f,...TO,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:pS("lucide",r),...!o&&!xO(h)&&{"aria-hidden":"true"},...h},[...c.map(([g,y])=>lt.createElement(g,y)),...Array.isArray(o)?o:[o]]));const ie=(n,t)=>{const e=lt.forwardRef(({className:i,...r},o)=>lt.createElement(EO,{ref:o,iconNode:t,className:pS(`lucide-${bO(_x(n))}`,`lucide-${n}`,i),...r}));return e.displayName=_x(n),e};const wO=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Hp=ie("activity",wO);const SO=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],AO=ie("arrow-up-down",SO);const CO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yS=ie("calendar",CO);const RO=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],K0=ie("chart-no-axes-column",RO);const IO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gs=ie("check",IO);const kO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],NO=ie("chevron-down",kO);const DO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],_S=ie("chevron-left",DO);const MO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Q0=ie("chevron-right",MO);const OO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zO=ie("download",OO);const VO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],PO=ie("file",VO);const LO=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],bS=ie("flame",LO);const jO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],UO=ie("funnel",jO);const BO=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],HO=ie("grip-vertical",BO);const FO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],qO=ie("history",FO);const GO=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$O=ie("layers",GO);const YO=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],KO=ie("link-2",YO);const QO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vS=ie("loader-circle",QO);const XO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],WO=ie("log-out",XO);const ZO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],bx=ie("menu",ZO);const JO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],xS=ie("moon",JO);const t4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],e4=ie("palette",t4);const n4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],TS=ie("pen",n4);const i4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ed=ie("plus",i4);const s4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],r4=ie("save",s4);const a4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o4=ie("settings",a4);const l4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],c4=ie("star",l4);const u4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],h4=ie("sun",u4);const f4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],d4=ie("target",f4);const g4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ES=ie("trash-2",g4);const m4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vx=ie("upload",m4);const p4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],y4=ie("user",p4);const _4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nd=ie("x",_4);function Ru(n){return n+.5|0}const Ur=(n,t,e)=>Math.max(Math.min(n,e),t);function Lc(n){return Ur(Ru(n*2.55),0,255)}function Qr(n){return Ur(Ru(n*255),0,255)}function Gs(n){return Ur(Ru(n/2.55)/100,0,1)}function xx(n){return Ur(Ru(n*100),0,100)}const yi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fp=[..."0123456789ABCDEF"],b4=n=>Fp[n&15],v4=n=>Fp[(n&240)>>4]+Fp[n&15],cf=n=>(n&240)>>4===(n&15),x4=n=>cf(n.r)&&cf(n.g)&&cf(n.b)&&cf(n.a);function T4(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&yi[n[1]]*17,g:255&yi[n[2]]*17,b:255&yi[n[3]]*17,a:t===5?yi[n[4]]*17:255}:(t===7||t===9)&&(e={r:yi[n[1]]<<4|yi[n[2]],g:yi[n[3]]<<4|yi[n[4]],b:yi[n[5]]<<4|yi[n[6]],a:t===9?yi[n[7]]<<4|yi[n[8]]:255})),e}const E4=(n,t)=>n<255?t(n):"";function w4(n){var t=x4(n)?b4:v4;return n?"#"+t(n.r)+t(n.g)+t(n.b)+E4(n.a,t):void 0}const S4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function wS(n,t,e){const i=t*Math.min(e,1-e),r=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function A4(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function C4(n,t,e){const i=wS(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function R4(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function X0(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),c=Math.min(e,i,r),h=(o+c)/2;let f,g,y;return o!==c&&(y=o-c,g=h>.5?y/(2-o-c):y/(o+c),f=R4(e,i,r,y,o),f=f*60+.5),[f|0,g||0,h]}function W0(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Qr)}function Z0(n,t,e){return W0(wS,n,t,e)}function I4(n,t,e){return W0(C4,n,t,e)}function k4(n,t,e){return W0(A4,n,t,e)}function SS(n){return(n%360+360)%360}function N4(n){const t=S4.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Lc(+t[5]):Qr(+t[5]));const r=SS(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=I4(r,o,c):t[1]==="hsv"?i=k4(r,o,c):i=Z0(r,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function D4(n,t){var e=X0(n);e[0]=SS(e[0]+t),e=Z0(e),n.r=e[0],n.g=e[1],n.b=e[2]}function M4(n){if(!n)return;const t=X0(n),e=t[0],i=xx(t[1]),r=xx(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Gs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Tx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ex={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function O4(){const n={},t=Object.keys(Ex),e=Object.keys(Tx);let i,r,o,c,h;for(i=0;i<t.length;i++){for(c=h=t[i],r=0;r<e.length;r++)o=e[r],h=h.replace(o,Tx[o]);o=parseInt(Ex[c],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let uf;function z4(n){uf||(uf=O4(),uf.transparent=[0,0,0,0]);const t=uf[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const V4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function P4(n){const t=V4.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Lc(c):Ur(c*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Lc(i):Ur(i,0,255)),r=255&(t[4]?Lc(r):Ur(r,0,255)),o=255&(t[6]?Lc(o):Ur(o,0,255)),{r:i,g:r,b:o,a:e}}}function L4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Gs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const ep=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,$o=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function j4(n,t,e){const i=$o(Gs(n.r)),r=$o(Gs(n.g)),o=$o(Gs(n.b));return{r:Qr(ep(i+e*($o(Gs(t.r))-i))),g:Qr(ep(r+e*($o(Gs(t.g))-r))),b:Qr(ep(o+e*($o(Gs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function hf(n,t,e){if(n){let i=X0(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Z0(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function AS(n,t){return n&&Object.assign(t||{},n)}function wx(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Qr(n[3]))):(t=AS(n,{r:0,g:0,b:0,a:1}),t.a=Qr(t.a)),t}function U4(n){return n.charAt(0)==="r"?P4(n):N4(n)}class lu{constructor(t){if(t instanceof lu)return t;const e=typeof t;let i;e==="object"?i=wx(t):e==="string"&&(i=T4(t)||z4(t)||U4(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=AS(this._rgb);return t&&(t.a=Gs(t.a)),t}set rgb(t){this._rgb=wx(t)}rgbString(){return this._valid?L4(this._rgb):void 0}hexString(){return this._valid?w4(this._rgb):void 0}hslString(){return this._valid?M4(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const c=e===o?.5:e,h=2*c-1,f=i.a-r.a,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2;o=1-g,i.r=255&g*i.r+o*r.r+.5,i.g=255&g*i.g+o*r.g+.5,i.b=255&g*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=j4(this._rgb,t._rgb,e)),this}clone(){return new lu(this.rgb)}alpha(t){return this._rgb.a=Qr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ru(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return hf(this._rgb,2,t),this}darken(t){return hf(this._rgb,2,-t),this}saturate(t){return hf(this._rgb,1,t),this}desaturate(t){return hf(this._rgb,1,-t),this}rotate(t){return D4(this._rgb,t),this}}function Hs(){}const B4=(()=>{let n=0;return()=>n++})();function ye(n){return n==null}function We(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function te(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function En(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function cs(n,t){return En(n)?n:t}function Wt(n,t){return typeof n>"u"?t:n}const H4=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function ve(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ue(n,t,e,i){let r,o,c;if(We(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(te(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)t.call(e,n[c[r]],c[r])}function id(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function sd(n){if(We(n))return n.map(sd);if(te(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=sd(n[e[r]]);return t}return n}function CS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function F4(n,t,e,i){if(!CS(n))return;const r=t[n],o=e[n];te(r)&&te(o)?cu(r,o,i):t[n]=sd(o)}function cu(n,t,e){const i=We(t)?t:[t],r=i.length;if(!te(n))return n;e=e||{};const o=e.merger||F4;let c;for(let h=0;h<r;++h){if(c=i[h],!te(c))continue;const f=Object.keys(c);for(let g=0,y=f.length;g<y;++g)o(f[g],n,c,e)}return n}function Yc(n,t){return cu(n,t,{merger:q4})}function q4(n,t,e){if(!CS(n))return;const i=t[n],r=e[n];te(i)&&te(r)?Yc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=sd(r))}const Sx={"":n=>n,x:n=>n.x,y:n=>n.y};function G4(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function $4(n){const t=G4(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function rd(n,t){return(Sx[t]||(Sx[t]=$4(t)))(n)}function J0(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ad=n=>typeof n<"u",na=n=>typeof n=="function",Ax=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Y4(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const rn=Math.PI,Pi=2*rn,K4=Pi+rn,od=Number.POSITIVE_INFINITY,Q4=rn/180,zi=rn/2,za=rn/4,Cx=rn*2/3,RS=Math.log10,dl=Math.sign;function Kc(n,t,e){return Math.abs(n-t)<e}function Rx(n){const t=Math.round(n);n=Kc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(RS(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function X4(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function W4(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function uu(n){return!W4(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Z4(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function J4(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ha(n){return n*(rn/180)}function tz(n){return n*(180/rn)}function Ix(n){if(!En(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function ez(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*rn&&(o+=Pi),{angle:o,distance:r}}function qp(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function nz(n,t){return(n-t+K4)%Pi-rn}function ds(n){return(n%Pi+Pi)%Pi}function IS(n,t,e,i){const r=ds(n),o=ds(t),c=ds(e),h=ds(o-r),f=ds(c-r),g=ds(r-o),y=ds(r-c);return r===o||r===c||i&&o===c||h>f&&g<y}function bi(n,t,e){return Math.max(t,Math.min(e,n))}function iz(n){return bi(n,-32768,32767)}function Zo(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ty(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Fa=(n,t,e,i)=>ty(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),sz=(n,t,e)=>ty(n,e,i=>n[i][t]>=e);function rz(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const kS=["push","pop","shift","splice","unshift"];function az(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),kS.forEach(e=>{const i="_onData"+J0(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),c}})})}function kx(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(kS.forEach(o=>{delete n[o]}),delete n._chartjs)}function oz(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const NS=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function DS(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,NS.call(window,()=>{i=!1,n.apply(t,e)}))}}function lz(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const ey=n=>n==="start"?"left":n==="end"?"right":"center",_n=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,cz=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function uz(n,t,e){const i=t.length;let r=0,o=i;if(n._sorted){const{iScale:c,vScale:h,_parsed:f}=n,g=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,y=c.axis,{min:_,max:x,minDefined:w,maxDefined:k}=c.getUserBounds();if(w){if(r=Math.min(Fa(f,y,_).lo,e?i:Fa(t,y,c.getPixelForValue(_)).lo),g){const R=f.slice(0,r+1).reverse().findIndex(D=>!ye(D[h.axis]));r-=Math.max(0,R)}r=bi(r,0,i-1)}if(k){let R=Math.max(Fa(f,c.axis,x,!0).hi+1,e?0:Fa(t,y,c.getPixelForValue(x),!0).hi+1);if(g){const D=f.slice(R-1).findIndex(U=>!ye(U[h.axis]));R+=Math.max(0,D)}o=bi(R,r,i)-r}else o=i-r}return{start:r,count:o}}function hz(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),o}const ff=n=>n===0||n===1,Nx=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Pi/e)),Dx=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Pi/e)+1,Qc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*zi)+1,easeOutSine:n=>Math.sin(n*zi),easeInOutSine:n=>-.5*(Math.cos(rn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ff(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ff(n)?n:Nx(n,.075,.3),easeOutElastic:n=>ff(n)?n:Dx(n,.075,.3),easeInOutElastic(n){return ff(n)?n:n<.5?.5*Nx(n*2,.1125,.45):.5+.5*Dx(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Qc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Qc.easeInBounce(n*2)*.5:Qc.easeOutBounce(n*2-1)*.5+.5};function ny(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Mx(n){return ny(n)?n:new lu(n)}function np(n){return ny(n)?n:new lu(n).saturate(.5).darken(.1).hexString()}const fz=["x","y","borderWidth","radius","tension"],dz=["color","borderColor","backgroundColor"];function gz(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:dz},numbers:{type:"number",properties:fz}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mz(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ox=new Map;function pz(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Ox.get(e);return i||(i=new Intl.NumberFormat(n,t),Ox.set(e,i)),i}function MS(n,t,e){return pz(t,e).format(n)}const yz={values(n){return We(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(r="scientific"),o=_z(n,e)}const c=RS(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),f={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(f,this.options.ticks.format),MS(n,i,f)}};function _z(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var OS={formatters:yz};function bz(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:OS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ja=Object.create(null),Gp=Object.create(null);function Xc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function ip(n,t,e){return typeof t=="string"?cu(Xc(n,t),e):cu(Xc(n,""),t)}class vz{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>np(r.backgroundColor),this.hoverBorderColor=(i,r)=>np(r.borderColor),this.hoverColor=(i,r)=>np(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ip(this,t,e)}get(t){return Xc(this,t)}describe(t,e){return ip(Gp,t,e)}override(t,e){return ip(Ja,t,e)}route(t,e,i,r){const o=Xc(this,t),c=Xc(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[h],g=c[r];return te(f)?Object.assign({},g,f):Wt(f,g)},set(f){this[h]=f}}})}apply(t){t.forEach(e=>e(this))}}var Pe=new vz({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gz,mz,bz]);function xz(n){return!n||ye(n.size)||ye(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function zx(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function Va(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function Vx(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function $p(n,t,e,i){zS(n,t,e,i,null)}function zS(n,t,e,i,r){let o,c,h,f,g,y,_,x;const w=t.pointStyle,k=t.rotation,R=t.radius;let D=(k||0)*Q4;if(w&&typeof w=="object"&&(o=w.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(D),n.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),n.restore();return}if(!(isNaN(R)||R<=0)){switch(n.beginPath(),w){default:r?n.ellipse(e,i,r/2,R,0,0,Pi):n.arc(e,i,R,0,Pi),n.closePath();break;case"triangle":y=r?r/2:R,n.moveTo(e+Math.sin(D)*y,i-Math.cos(D)*R),D+=Cx,n.lineTo(e+Math.sin(D)*y,i-Math.cos(D)*R),D+=Cx,n.lineTo(e+Math.sin(D)*y,i-Math.cos(D)*R),n.closePath();break;case"rectRounded":g=R*.516,f=R-g,c=Math.cos(D+za)*f,_=Math.cos(D+za)*(r?r/2-g:f),h=Math.sin(D+za)*f,x=Math.sin(D+za)*(r?r/2-g:f),n.arc(e-_,i-h,g,D-rn,D-zi),n.arc(e+x,i-c,g,D-zi,D),n.arc(e+_,i+h,g,D,D+zi),n.arc(e-x,i+c,g,D+zi,D+rn),n.closePath();break;case"rect":if(!k){f=Math.SQRT1_2*R,y=r?r/2:f,n.rect(e-y,i-f,2*y,2*f);break}D+=za;case"rectRot":_=Math.cos(D)*(r?r/2:R),c=Math.cos(D)*R,h=Math.sin(D)*R,x=Math.sin(D)*(r?r/2:R),n.moveTo(e-_,i-h),n.lineTo(e+x,i-c),n.lineTo(e+_,i+h),n.lineTo(e-x,i+c),n.closePath();break;case"crossRot":D+=za;case"cross":_=Math.cos(D)*(r?r/2:R),c=Math.cos(D)*R,h=Math.sin(D)*R,x=Math.sin(D)*(r?r/2:R),n.moveTo(e-_,i-h),n.lineTo(e+_,i+h),n.moveTo(e+x,i-c),n.lineTo(e-x,i+c);break;case"star":_=Math.cos(D)*(r?r/2:R),c=Math.cos(D)*R,h=Math.sin(D)*R,x=Math.sin(D)*(r?r/2:R),n.moveTo(e-_,i-h),n.lineTo(e+_,i+h),n.moveTo(e+x,i-c),n.lineTo(e-x,i+c),D+=za,_=Math.cos(D)*(r?r/2:R),c=Math.cos(D)*R,h=Math.sin(D)*R,x=Math.sin(D)*(r?r/2:R),n.moveTo(e-_,i-h),n.lineTo(e+_,i+h),n.moveTo(e+x,i-c),n.lineTo(e-x,i+c);break;case"line":c=r?r/2:Math.cos(D)*R,h=Math.sin(D)*R,n.moveTo(e-c,i-h),n.lineTo(e+c,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(D)*(r?r/2:R),i+Math.sin(D)*R);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function hu(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Dd(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Md(n){n.restore()}function Tz(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Ez(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function wz(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ye(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Sz(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,g=e+o.actualBoundingBoxDescent,y=r.strikethrough?(f+g)/2:g;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,y),n.lineTo(h,y),n.stroke()}}function Az(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function fu(n,t,e,i,r,o={}){const c=We(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let f,g;for(n.save(),n.font=r.string,wz(n,o),f=0;f<c.length;++f)g=c[f],o.backdrop&&Az(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ye(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(g,e,i,o.maxWidth)),n.fillText(g,e,i,o.maxWidth),Sz(n,e,i,g,o),i+=Number(r.lineHeight);n.restore()}function Yp(n,t){const{x:e,y:i,w:r,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*rn,rn,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,rn,zi,!0),n.lineTo(e+r-c.bottomRight,i+o),n.arc(e+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,zi,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-zi,!0),n.lineTo(e+c.topLeft,i)}const Cz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Rz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Iz(n,t){const e=(""+n).match(Cz);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const kz=n=>+n||0;function VS(n,t){const e={},i=te(t),r=i?Object.keys(t):t,o=te(n)?i?c=>Wt(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=kz(o(c));return e}function Nz(n){return VS(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Wc(n){return VS(n,["topLeft","topRight","bottomLeft","bottomRight"])}function xi(n){const t=Nz(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xn(n,t){n=n||{},t=t||Pe.font;let e=Wt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Wt(n.style,t.style);i&&!(""+i).match(Rz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Wt(n.family,t.family),lineHeight:Iz(Wt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Wt(n.weight,t.weight),string:""};return r.string=xz(r),r}function df(n,t,e,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function Dz(n,t,e){const{min:i,max:r}=n,o=H4(t,(r-i)/2),c=(h,f)=>e&&h===0?0:h+f;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function no(n,t){return Object.assign(Object.create(n),t)}function iy(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=US("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:h=>iy([h,...n],t,o,i)};return new Proxy(c,{deleteProperty(h,f){return delete h[f],delete h._keys,delete n[0][f],!0},get(h,f){return LS(h,f,()=>Uz(f,t,n,h))},getOwnPropertyDescriptor(h,f){return Reflect.getOwnPropertyDescriptor(h._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,f){return Lx(h).includes(f)},ownKeys(h){return Lx(h)},set(h,f,g){const y=h._storage||(h._storage=r());return h[f]=y[f]=g,delete h._keys,!0}})}function gl(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:PS(n,i),setContext:o=>gl(n,o,e,i),override:o=>gl(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,h){return LS(o,c,()=>Oz(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,h){return n[c]=h,delete o[c],!0}})}function PS(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:na(e)?e:()=>e,isIndexable:na(i)?i:()=>i}}const Mz=(n,t)=>n?n+J0(t):t,sy=(n,t)=>te(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function LS(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Oz(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let h=i[t];return na(h)&&c.isScriptable(t)&&(h=zz(t,h,n,e)),We(h)&&h.length&&(h=Vz(t,h,n,c.isIndexable)),sy(t,h)&&(h=gl(h,r,o&&o[t],c)),h}function zz(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let f=t(o,c||i);return h.delete(n),sy(n,f)&&(f=ry(r._scopes,r,n,f)),f}function Vz(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(te(t[0])){const f=t,g=r._scopes.filter(y=>y!==f);t=[];for(const y of f){const _=ry(g,r,n,y);t.push(gl(_,o,c&&c[n],h))}}return t}function jS(n,t,e){return na(n)?n(t,e):n}const Pz=(n,t)=>n===!0?t:typeof n=="string"?rd(t,n):void 0;function Lz(n,t,e,i,r){for(const o of t){const c=Pz(e,o);if(c){n.add(c);const h=jS(c._fallback,e,r);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function ry(n,t,e,i){const r=t._rootScopes,o=jS(t._fallback,e,i),c=[...n,...r],h=new Set;h.add(i);let f=Px(h,c,e,o||e,i);return f===null||typeof o<"u"&&o!==e&&(f=Px(h,c,o,f,i),f===null)?!1:iy(Array.from(h),[""],r,o,()=>jz(t,e,i))}function Px(n,t,e,i,r){for(;e;)e=Lz(n,t,e,i,r);return e}function jz(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return We(r)&&te(e)?e:r||{}}function Uz(n,t,e,i){let r;for(const o of t)if(r=US(Mz(o,n),e),typeof r<"u")return sy(n,r)?ry(e,i,n,r):r}function US(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Lx(n){let t=n._keys;return t||(t=n._keys=Bz(n._scopes)),t}function Bz(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}const Hz=Number.EPSILON||1e-14,ml=(n,t)=>t<n.length&&!n[t].skip&&n[t],BS=n=>n==="x"?"y":"x";function Fz(n,t,e,i){const r=n.skip?t:n,o=t,c=e.skip?t:e,h=qp(o,r),f=qp(c,o);let g=h/(h+f),y=f/(h+f);g=isNaN(g)?0:g,y=isNaN(y)?0:y;const _=i*g,x=i*y;return{previous:{x:o.x-_*(c.x-r.x),y:o.y-_*(c.y-r.y)},next:{x:o.x+x*(c.x-r.x),y:o.y+x*(c.y-r.y)}}}function qz(n,t,e){const i=n.length;let r,o,c,h,f,g=ml(n,0);for(let y=0;y<i-1;++y)if(f=g,g=ml(n,y+1),!(!f||!g)){if(Kc(t[y],0,Hz)){e[y]=e[y+1]=0;continue}r=e[y]/t[y],o=e[y+1]/t[y],h=Math.pow(r,2)+Math.pow(o,2),!(h<=9)&&(c=3/Math.sqrt(h),e[y]=r*c*t[y],e[y+1]=o*c*t[y])}}function Gz(n,t,e="x"){const i=BS(e),r=n.length;let o,c,h,f=ml(n,0);for(let g=0;g<r;++g){if(c=h,h=f,f=ml(n,g+1),!h)continue;const y=h[e],_=h[i];c&&(o=(y-c[e])/3,h[`cp1${e}`]=y-o,h[`cp1${i}`]=_-o*t[g]),f&&(o=(f[e]-y)/3,h[`cp2${e}`]=y+o,h[`cp2${i}`]=_+o*t[g])}}function $z(n,t="x"){const e=BS(t),i=n.length,r=Array(i).fill(0),o=Array(i);let c,h,f,g=ml(n,0);for(c=0;c<i;++c)if(h=f,f=g,g=ml(n,c+1),!!f){if(g){const y=g[t]-f[t];r[c]=y!==0?(g[e]-f[e])/y:0}o[c]=h?g?dl(r[c-1])!==dl(r[c])?0:(r[c-1]+r[c])/2:r[c-1]:r[c]}qz(n,r,o),Gz(n,o,t)}function gf(n,t,e){return Math.max(Math.min(n,e),t)}function Yz(n,t){let e,i,r,o,c,h=hu(n[0],t);for(e=0,i=n.length;e<i;++e)c=o,o=h,h=e<i-1&&hu(n[e+1],t),o&&(r=n[e],c&&(r.cp1x=gf(r.cp1x,t.left,t.right),r.cp1y=gf(r.cp1y,t.top,t.bottom)),h&&(r.cp2x=gf(r.cp2x,t.left,t.right),r.cp2y=gf(r.cp2y,t.top,t.bottom)))}function Kz(n,t,e,i,r){let o,c,h,f;if(t.spanGaps&&(n=n.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")$z(n,r);else{let g=i?n[n.length-1]:n[0];for(o=0,c=n.length;o<c;++o)h=n[o],f=Fz(g,h,n[Math.min(o+1,c-(i?0:1))%c],t.tension),h.cp1x=f.previous.x,h.cp1y=f.previous.y,h.cp2x=f.next.x,h.cp2y=f.next.y,g=h}t.capBezierPoints&&Yz(n,e)}function ay(){return typeof window<"u"&&typeof document<"u"}function oy(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ld(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Od=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Qz(n,t){return Od(n).getPropertyValue(t)}const Xz=["top","right","bottom","left"];function $a(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=Xz[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Wz=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Zz(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,h,f;if(Wz(r,o,n.target))h=r,f=o;else{const g=t.getBoundingClientRect();h=i.clientX-g.left,f=i.clientY-g.top,c=!0}return{x:h,y:f,box:c}}function ja(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Od(e),o=r.boxSizing==="border-box",c=$a(r,"padding"),h=$a(r,"border","width"),{x:f,y:g,box:y}=Zz(n,e),_=c.left+(y&&h.left),x=c.top+(y&&h.top);let{width:w,height:k}=t;return o&&(w-=c.width+h.width,k-=c.height+h.height),{x:Math.round((f-_)/w*e.width/i),y:Math.round((g-x)/k*e.height/i)}}function Jz(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&oy(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),h=Od(o),f=$a(h,"border","width"),g=$a(h,"padding");t=c.width-g.width-f.width,e=c.height-g.height-f.height,i=ld(h.maxWidth,o,"clientWidth"),r=ld(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||od,maxHeight:r||od}}const Br=n=>Math.round(n*10)/10;function t5(n,t,e,i){const r=Od(n),o=$a(r,"margin"),c=ld(r.maxWidth,n,"clientWidth")||od,h=ld(r.maxHeight,n,"clientHeight")||od,f=Jz(n,t,e);let{width:g,height:y}=f;if(r.boxSizing==="content-box"){const x=$a(r,"border","width"),w=$a(r,"padding");g-=w.width+x.width,y-=w.height+x.height}return g=Math.max(0,g-o.width),y=Math.max(0,i?g/i:y-o.height),g=Br(Math.min(g,c,f.maxWidth)),y=Br(Math.min(y,h,f.maxHeight)),g&&!y&&(y=Br(g/2)),(t!==void 0||e!==void 0)&&i&&f.height&&y>f.height&&(y=f.height,g=Br(Math.floor(y*i))),{width:g,height:y}}function jx(n,t,e){const i=t||1,r=Br(n.height*i),o=Br(n.width*i);n.height=Br(n.height),n.width=Br(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const e5=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};ay()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function Ux(n,t){const e=Qz(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ua(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function n5(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function i5(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},c=Ua(n,r,e),h=Ua(r,o,e),f=Ua(o,t,e),g=Ua(c,h,e),y=Ua(h,f,e);return Ua(g,y,e)}const s5=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},r5=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function il(n,t,e){return n?s5(t,e):r5()}function HS(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function FS(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function qS(n){return n==="angle"?{between:IS,compare:nz,normalize:ds}:{between:Zo,compare:(t,e)=>t-e,normalize:t=>t}}function Bx({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function a5(n,t,e){const{property:i,start:r,end:o}=e,{between:c,normalize:h}=qS(i),f=t.length;let{start:g,end:y,loop:_}=n,x,w;if(_){for(g+=f,y+=f,x=0,w=f;x<w&&c(h(t[g%f][i]),r,o);++x)g--,y--;g%=f,y%=f}return y<g&&(y+=f),{start:g,end:y,loop:_,style:n.style}}function GS(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,c=t.length,{compare:h,between:f,normalize:g}=qS(i),{start:y,end:_,loop:x,style:w}=a5(n,t,e),k=[];let R=!1,D=null,U,W,J;const at=()=>f(r,J,U)&&h(r,J)!==0,st=()=>h(o,U)===0||f(o,J,U),ot=()=>R||at(),I=()=>!R||st();for(let A=y,N=y;A<=_;++A)W=t[A%c],!W.skip&&(U=g(W[i]),U!==J&&(R=f(U,r,o),D===null&&ot()&&(D=h(U,r)===0?A:N),D!==null&&I()&&(k.push(Bx({start:D,end:A,loop:x,count:c,style:w})),D=null),N=A,J=U));return D!==null&&k.push(Bx({start:D,end:_,loop:x,count:c,style:w})),k}function $S(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=GS(i[r],n.points,t);o.length&&e.push(...o)}return e}function o5(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function l5(n,t,e,i){const r=n.length,o=[];let c=t,h=n[t],f;for(f=t+1;f<=e;++f){const g=n[f%r];g.skip||g.stop?h.skip||(i=!1,o.push({start:t%r,end:(f-1)%r,loop:i}),t=c=g.stop?f:null):(c=f,h.skip&&(t=f)),h=g}return c!==null&&o.push({start:t%r,end:c%r,loop:i}),o}function c5(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:c,end:h}=o5(e,r,o,i);if(i===!0)return Hx(n,[{start:c,end:h,loop:o}],e,t);const f=h<c?h+r:h,g=!!n._fullLoop&&c===0&&h===r-1;return Hx(n,l5(e,c,f,g),e,t)}function Hx(n,t,e,i){return!i||!i.setContext||!e?t:u5(n,t,e,i)}function u5(n,t,e,i){const r=n._chart.getContext(),o=Fx(n.options),{_datasetIndex:c,options:{spanGaps:h}}=n,f=e.length,g=[];let y=o,_=t[0].start,x=_;function w(k,R,D,U){const W=h?-1:1;if(k!==R){for(k+=f;e[k%f].skip;)k-=W;for(;e[R%f].skip;)R+=W;k%f!==R%f&&(g.push({start:k%f,end:R%f,loop:D,style:U}),y=U,_=R%f)}}for(const k of t){_=h?_:k.start;let R=e[_%f],D;for(x=_+1;x<=k.end;x++){const U=e[x%f];D=Fx(i.setContext(no(r,{type:"segment",p0:R,p1:U,p0DataIndex:(x-1)%f,p1DataIndex:x%f,datasetIndex:c}))),h5(D,y)&&w(_,x-1,k.loop,y),R=U,y=D}_<x-1&&w(_,x-1,k.loop,y)}return g}function Fx(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function h5(n,t){if(!t)return!1;const e=[],i=function(r,o){return ny(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function mf(n,t,e){return n.options.clip?n[e]:t[e]}function f5(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:mf(e,t,"left"),right:mf(e,t,"right"),top:mf(i,t,"top"),bottom:mf(i,t,"bottom")}:t}function YS(n,t){const e=t._clip;if(e.disabled)return!1;const i=f5(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}class d5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],c=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=NS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,h=!1,f;for(;c>=0;--c)f=o[c],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),h=!0):(o[c]=o[o.length-1],o.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Fs=new d5;const qx="transparent",g5={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Mx(n||qx),r=i.valid&&Mx(t||qx);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class m5{constructor(t,e,i,r){const o=e[i];r=df([t.to,r,o,t.from]);const c=df([t.from,o,r]);this._active=!0,this._fn=t.fn||g5[t.type||typeof c],this._easing=Qc[t.easing]||Qc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=df([t.to,e,r,t.from]),this._from=df([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,h=this._to;let f;if(this._active=o!==h&&(c||e<i),!this._active){this._target[r]=h,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/i%2,f=c&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,h,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class KS{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!te(t))return;const e=Object.keys(Pe.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!te(o))return;const c={};for(const h of e)c[h]=o[h];(We(o.properties)&&o.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,c)})})}_animateOptions(t,e){const i=e.options,r=y5(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&p5(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),h=Date.now();let f;for(f=c.length-1;f>=0;--f){const g=c[f];if(g.charAt(0)==="$")continue;if(g==="options"){r.push(...this._animateOptions(t,e));continue}const y=e[g];let _=o[g];const x=i.get(g);if(_)if(x&&_.active()){_.update(x,y,h);continue}else _.cancel();if(!x||!x.duration){t[g]=y;continue}o[g]=_=new m5(x,t,g,y),r.push(_)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Fs.add(this._chart,i),!0}}function p5(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function y5(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Gx(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function _5(n,t,e){if(e===!1)return!1;const i=Gx(n,e),r=Gx(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function b5(n){let t,e,i,r;return te(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function QS(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function $x(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let c,h,f,g;if(t===null)return;let y=!1;for(c=0,h=r.length;c<h;++c){if(f=+r[c],f===e){if(y=!0,i.all)continue;break}g=n.values[f],En(g)&&(o||t===0||dl(t)===dl(g))&&(t+=g)}return!y&&!i.all?0:t}function v5(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),h=new Array(c.length);let f,g,y;for(f=0,g=c.length;f<g;++f)y=c[f],h[f]={[r]:y,[o]:n[y]};return h}function sp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function x5(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function T5(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function E5(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Yx(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function Kx(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:h}=i,f=o.axis,g=c.axis,y=x5(o,c,i),_=t.length;let x;for(let w=0;w<_;++w){const k=t[w],{[f]:R,[g]:D}=k,U=k._stacks||(k._stacks={});x=U[g]=E5(r,y,R),x[h]=D,x._top=Yx(x,c,!0,i.type),x._bottom=Yx(x,c,!1,i.type);const W=x._visualValues||(x._visualValues={});W[h]=D}}function rp(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function w5(n,t){return no(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function S5(n,t,e){return no(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Cc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const ap=n=>n==="reset"||n==="none",Qx=(n,t)=>t?n:Object.assign({},n),A5=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:QS(e,!0),values:null};class XS{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=sp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Cc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(_,x,w,k)=>_==="x"?x:_==="r"?k:w,o=e.xAxisID=Wt(i.xAxisID,rp(t,"x")),c=e.yAxisID=Wt(i.yAxisID,rp(t,"y")),h=e.rAxisID=Wt(i.rAxisID,rp(t,"r")),f=e.indexAxis,g=e.iAxisID=r(f,o,c,h),y=e.vAxisID=r(f,c,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&kx(this._data,this),t._stacked&&Cc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(te(e)){const r=this._cachedMeta;this._data=v5(e,r)}else if(i!==e){if(i){kx(i,this);const r=this._cachedMeta;Cc(r),r._parsed=[]}e&&Object.isExtensible(e)&&az(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=sp(e.vScale,e),e.stack!==i.stack&&(r=!0,Cc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(Kx(this,e._parsed),e._stacked=sp(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,h=o.axis;let f=t===0&&e===r.length?!0:i._sorted,g=t>0&&i._parsed[t-1],y,_,x;if(this._parsing===!1)i._parsed=r,i._sorted=!0,x=r;else{We(r[t])?x=this.parseArrayData(i,r,t,e):te(r[t])?x=this.parseObjectData(i,r,t,e):x=this.parsePrimitiveData(i,r,t,e);const w=()=>_[h]===null||g&&_[h]<g[h];for(y=0;y<e;++y)i._parsed[y+t]=_=x[y],f&&(w()&&(f=!1),g=_);i._sorted=f}c&&Kx(this,x)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:c}=t,h=o.axis,f=c.axis,g=o.getLabels(),y=o===c,_=new Array(r);let x,w,k;for(x=0,w=r;x<w;++x)k=x+i,_[x]={[h]:y||o.parse(g[k],k),[f]:c.parse(e[k],k)};return _}parseArrayData(t,e,i,r){const{xScale:o,yScale:c}=t,h=new Array(r);let f,g,y,_;for(f=0,g=r;f<g;++f)y=f+i,_=e[y],h[f]={x:o.parse(_[0],y),y:c.parse(_[1],y)};return h}parseObjectData(t,e,i,r){const{xScale:o,yScale:c}=t,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=new Array(r);let y,_,x,w;for(y=0,_=r;y<_;++y)x=y+i,w=e[x],g[y]={x:o.parse(rd(w,h),x),y:c.parse(rd(w,f),x)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,c=e[t.axis],h={keys:QS(r,!0),values:e._stacks[t.axis]._visualValues};return $x(h,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let c=o===null?NaN:o;const h=r&&i._stacks[e.axis];r&&h&&(r.values=h,c=$x(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,c=r.length,h=this._getOtherScale(t),f=A5(e,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:_}=T5(h);let x,w;function k(){w=r[x];const R=w[h.axis];return!En(w[t.axis])||y>R||_<R}for(x=0;x<c&&!(!k()&&(this.updateRangeFromParsed(g,t,w,f),o));++x);if(o){for(x=c-1;x>=0;--x)if(!k()){this.updateRangeFromParsed(g,t,w,f);break}}return g}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=e.length;r<o;++r)c=e[r][t.axis],En(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=b5(Wt(this.options.clip,_5(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,c=[],h=this._drawStart||0,f=this._drawCount||r.length-h,g=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(t,o,h,f),y=h;y<h+f;++y){const _=r[y];_.hidden||(_.active&&g?c.push(_):_.draw(t,o))}for(y=0;y<c.length;++y)c[y].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=S5(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=w5(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,c=t+"-"+e,h=o[c],f=this.enableOptionSharing&&ad(i);if(h)return Qx(h,f);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,t),_=r?[`${t}Hover`,"hover",t,""]:[t,""],x=g.getOptionScopes(this.getDataset(),y),w=Object.keys(Pe.elements[t]),k=()=>this.getContext(i,r,e),R=g.resolveNamedOptions(x,w,k,_);return R.$shared&&(R.$shared=f,o[c]=Object.freeze(Qx(R,f))),R}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,h=o[c];if(h)return h;let f;if(r.options.animation!==!1){const y=this.chart.config,_=y.datasetAnimationScopeKeys(this._type,e),x=y.getOptionScopes(this.getDataset(),_);f=y.createResolver(x,this.getContext(t,i,e))}const g=new KS(r,f&&f.animations);return f&&f._cacheable&&(o[c]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||ap(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,r){ap(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!ap(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,f,g]of this._syncList)this[h](f,g);this._syncList=[];const r=i.length,o=e.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,c=t+e;let h;const f=g=>{for(g.length+=e,h=g.length-1;h>=c;h--)g[h]=g[h-e]};for(f(o),h=t;h<c;++h)o[h]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Cc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class C5 extends XS{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,c=this.chart._animationsDisabled;let{start:h,count:f}=uz(e,r,c);this._drawStart=h,this._drawCount=f,hz(e)&&(h=0,f=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:g},t),this.updateElements(r,h,f,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:h,_stacked:f,_dataset:g}=this._cachedMeta,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(e,r),x=c.axis,w=h.axis,{spanGaps:k,segment:R}=this.options,D=uu(k)?k:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||o||r==="none",W=e+i,J=t.length;let at=e>0&&this.getParsed(e-1);for(let st=0;st<J;++st){const ot=t[st],I=U?ot:{};if(st<e||st>=W){I.skip=!0;continue}const A=this.getParsed(st),N=ye(A[w]),V=I[x]=c.getPixelForValue(A[x],st),M=I[w]=o||N?h.getBasePixel():h.getPixelForValue(f?this.applyStack(h,A,f):A[w],st);I.skip=isNaN(V)||isNaN(M)||N,I.stop=st>0&&Math.abs(A[x]-at[x])>D,R&&(I.parsed=A,I.raw=g.data[st]),_&&(I.options=y||this.resolveDataElementOptions(st,ot.active?"active":r)),U||this.updateElement(ot,st,I,r),at=A}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function Pa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ly{static override(t){Object.assign(ly.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Pa()}parse(){return Pa()}format(){return Pa()}add(){return Pa()}diff(){return Pa()}startOf(){return Pa()}endOf(){return Pa()}}var R5={_date:ly};function I5(n,t,e,i){const{controller:r,data:o,_sorted:c}=n,h=r._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&c&&o.length){const g=h._reversePixels?sz:Fa;if(i){if(r._sharedOptions){const y=o[0],_=typeof y.getRange=="function"&&y.getRange(t);if(_){const x=g(o,t,e-_),w=g(o,t,e+_);return{lo:x.lo,hi:w.hi}}}}else{const y=g(o,t,e);if(f){const{vScale:_}=r._cachedMeta,{_parsed:x}=n,w=x.slice(0,y.lo+1).reverse().findIndex(R=>!ye(R[_.axis]));y.lo-=Math.max(0,w);const k=x.slice(y.hi).findIndex(R=>!ye(R[_.axis]));y.hi+=Math.max(0,k)}return y}}return{lo:0,hi:o.length-1}}function zd(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let h=0,f=o.length;h<f;++h){const{index:g,data:y}=o[h],{lo:_,hi:x}=I5(o[h],t,c,r);for(let w=_;w<=x;++w){const k=y[w];k.skip||i(k,g,w)}}}function k5(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function op(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||zd(n,e,t,function(h,f,g){!r&&!hu(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:f,index:g})},!0),o}function N5(n,t,e,i){let r=[];function o(c,h,f){const{startAngle:g,endAngle:y}=c.getProps(["startAngle","endAngle"],i),{angle:_}=ez(c,{x:t.x,y:t.y});IS(_,g,y)&&r.push({element:c,datasetIndex:h,index:f})}return zd(n,e,t,o),r}function D5(n,t,e,i,r,o){let c=[];const h=k5(e);let f=Number.POSITIVE_INFINITY;function g(y,_,x){const w=y.inRange(t.x,t.y,r);if(i&&!w)return;const k=y.getCenterPoint(r);if(!(!!o||n.isPointInArea(k))&&!w)return;const D=h(t,k);D<f?(c=[{element:y,datasetIndex:_,index:x}],f=D):D===f&&c.push({element:y,datasetIndex:_,index:x})}return zd(n,e,t,g),c}function lp(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?N5(n,t,e,r):D5(n,t,e,i,r,o)}function Xx(n,t,e,i,r){const o=[],c=e==="x"?"inXRange":"inYRange";let h=!1;return zd(n,e,t,(f,g,y)=>{f[c]&&f[c](t[e],r)&&(o.push({element:f,datasetIndex:g,index:y}),h=h||f.inRange(t.x,t.y,r))}),i&&!h?[]:o}var M5={modes:{index(n,t,e,i){const r=ja(t,n),o=e.axis||"x",c=e.includeInvisible||!1,h=e.intersect?op(n,r,o,i,c):lp(n,r,o,!1,i,c),f=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(g=>{const y=h[0].index,_=g.data[y];_&&!_.skip&&f.push({element:_,datasetIndex:g.index,index:y})}),f):[]},dataset(n,t,e,i){const r=ja(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let h=e.intersect?op(n,r,o,i,c):lp(n,r,o,!1,i,c);if(h.length>0){const f=h[0].datasetIndex,g=n.getDatasetMeta(f).data;h=[];for(let y=0;y<g.length;++y)h.push({element:g[y],datasetIndex:f,index:y})}return h},point(n,t,e,i){const r=ja(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return op(n,r,o,i,c)},nearest(n,t,e,i){const r=ja(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return lp(n,r,o,e.intersect,i,c)},x(n,t,e,i){const r=ja(t,n);return Xx(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=ja(t,n);return Xx(n,r,"y",e.intersect,i)}}};const WS=["left","top","right","bottom"];function Rc(n,t){return n.filter(e=>e.pos===t)}function Wx(n,t){return n.filter(e=>WS.indexOf(e.pos)===-1&&e.box.axis===t)}function Ic(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function O5(n){const t=[];let e,i,r,o,c,h;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:c,stackWeight:h=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:h});return t}function z5(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!WS.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function V5(n,t){const e=z5(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,c,h;for(o=0,c=n.length;o<c;++o){h=n[o];const{fullSize:f}=h.box,g=e[h.stack],y=g&&h.stackWeight/g.weight;h.horizontal?(h.width=y?y*i:f&&t.availableWidth,h.height=r):(h.width=i,h.height=y?y*r:f&&t.availableHeight)}return e}function P5(n){const t=O5(n),e=Ic(t.filter(g=>g.box.fullSize),!0),i=Ic(Rc(t,"left"),!0),r=Ic(Rc(t,"right")),o=Ic(Rc(t,"top"),!0),c=Ic(Rc(t,"bottom")),h=Wx(t,"x"),f=Wx(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(f).concat(c).concat(h),chartArea:Rc(t,"chartArea"),vertical:i.concat(r).concat(f),horizontal:o.concat(c).concat(h)}}function Zx(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function ZS(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function L5(n,t,e,i){const{pos:r,box:o}=e,c=n.maxPadding;if(!te(r)){e.size&&(n[r]-=e.size);const _=i[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?o.height:o.width),e.size=_.size/_.count,n[r]+=e.size}o.getPadding&&ZS(c,o.getPadding());const h=Math.max(0,t.outerWidth-Zx(c,n,"left","right")),f=Math.max(0,t.outerHeight-Zx(c,n,"top","bottom")),g=h!==n.w,y=f!==n.h;return n.w=h,n.h=f,e.horizontal?{same:g,other:y}:{same:y,other:g}}function j5(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function U5(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function jc(n,t,e,i){const r=[];let o,c,h,f,g,y;for(o=0,c=n.length,g=0;o<c;++o){h=n[o],f=h.box,f.update(h.width||t.w,h.height||t.h,U5(h.horizontal,t));const{same:_,other:x}=L5(t,e,h,i);g|=_&&r.length,y=y||x,f.fullSize||r.push(h)}return g&&jc(r,t,e,i)||y}function pf(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function Jx(n,t,e,i){const r=e.padding;let{x:o,y:c}=t;for(const h of n){const f=h.box,g=i[h.stack]||{placed:0,weight:1},y=h.stackWeight/g.weight||1;if(h.horizontal){const _=t.w*y,x=g.size||f.height;ad(g.start)&&(c=g.start),f.fullSize?pf(f,r.left,c,e.outerWidth-r.right-r.left,x):pf(f,t.left+g.placed,c,_,x),g.start=c,g.placed+=_,c=f.bottom}else{const _=t.h*y,x=g.size||f.width;ad(g.start)&&(o=g.start),f.fullSize?pf(f,o,r.top,x,e.outerHeight-r.bottom-r.top):pf(f,o,t.top+g.placed,x,_),g.start=o,g.placed+=_,o=f.right}}t.x=o,t.y=c}var vi={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=xi(n.options.layout.padding),o=Math.max(t-r.width,0),c=Math.max(e-r.height,0),h=P5(n.boxes),f=h.vertical,g=h.horizontal;ue(n.boxes,R=>{typeof R.beforeLayout=="function"&&R.beforeLayout()});const y=f.reduce((R,D)=>D.box.options&&D.box.options.display===!1?R:R+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/y,hBoxMaxHeight:c/2}),x=Object.assign({},r);ZS(x,xi(i));const w=Object.assign({maxPadding:x,w:o,h:c,x:r.left,y:r.top},r),k=V5(f.concat(g),_);jc(h.fullSize,w,_,k),jc(f,w,_,k),jc(g,w,_,k)&&jc(f,w,_,k),j5(w),Jx(h.leftAndTop,w,_,k),w.x+=w.w,w.y+=w.h,Jx(h.rightAndBottom,w,_,k),n.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},ue(h.chartArea,R=>{const D=R.box;Object.assign(D,n.chartArea),D.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class JS{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class B5 extends JS{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const zf="$chartjs",H5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tT=n=>n===null||n==="";function F5(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[zf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",tT(r)){const o=Ux(n,"width");o!==void 0&&(n.width=o)}if(tT(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=Ux(n,"height");o!==void 0&&(n.height=o)}return n}const tA=e5?{passive:!0}:!1;function q5(n,t,e){n&&n.addEventListener(t,e,tA)}function G5(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,tA)}function $5(n,t){const e=H5[n.type]||n.type,{x:i,y:r}=ja(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function cd(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Y5(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||cd(h.addedNodes,i),c=c&&!cd(h.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function K5(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||cd(h.removedNodes,i),c=c&&!cd(h.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const du=new Map;let eT=0;function eA(){const n=window.devicePixelRatio;n!==eT&&(eT=n,du.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Q5(n,t){du.size||window.addEventListener("resize",eA),du.set(n,t)}function X5(n){du.delete(n),du.size||window.removeEventListener("resize",eA)}function W5(n,t,e){const i=n.canvas,r=i&&oy(i);if(!r)return;const o=DS((h,f)=>{const g=r.clientWidth;e(h,f),g<r.clientWidth&&e()},window),c=new ResizeObserver(h=>{const f=h[0],g=f.contentRect.width,y=f.contentRect.height;g===0&&y===0||o(g,y)});return c.observe(r),Q5(n,o),c}function cp(n,t,e){e&&e.disconnect(),t==="resize"&&X5(n)}function Z5(n,t,e){const i=n.canvas,r=DS(o=>{n.ctx!==null&&e($5(o,n))},n);return q5(i,t,r),r}class J5 extends JS{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(F5(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[zf])return!1;const i=e[zf].initial;["height","width"].forEach(o=>{const c=i[o];ye(c)?e.removeAttribute(o):e.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[zf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:Y5,detach:K5,resize:W5}[e]||Z5;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:cp,detach:cp,resize:cp}[e]||G5)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return t5(t,e,i,r)}isAttached(t){const e=t&&oy(t);return!!(e&&e.isConnected)}}function tV(n){return!ay()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?B5:J5}class io{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return uu(this.x)&&uu(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}function eV(n,t){const e=n.options.ticks,i=nV(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?sV(t):[],c=o.length,h=o[0],f=o[c-1],g=[];if(c>r)return rV(t,g,o,c/r),g;const y=iV(o,t,r);if(c>0){let _,x;const w=c>1?Math.round((f-h)/(c-1)):null;for(yf(t,g,y,ye(w)?0:h-w,h),_=0,x=c-1;_<x;_++)yf(t,g,y,o[_],o[_+1]);return yf(t,g,y,f,ye(w)?t.length:f+w),g}return yf(t,g,y),g}function nV(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function iV(n,t,e){const i=aV(n),r=t.length/e;if(!i)return Math.max(r,1);const o=X4(i);for(let c=0,h=o.length-1;c<h;c++){const f=o[c];if(f>r)return f}return Math.max(r,1)}function sV(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function rV(n,t,e,i){let r=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),r++,o=e[r*i])}function yf(n,t,e,i,r){const o=Wt(i,0),c=Math.min(Wt(r,n.length),n.length);let h=0,f,g,y;for(e=Math.ceil(e),r&&(f=r-i,e=f/Math.floor(f/e)),y=o;y<0;)h++,y=Math.round(o+h*e);for(g=Math.max(o,0);g<c;g++)g===y&&(t.push(n[g]),h++,y=Math.round(o+h*e))}function aV(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const oV=n=>n==="left"?"right":n==="right"?"left":n,nT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,iT=(n,t)=>Math.min(t||n,n);function sT(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function lV(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,h=1e-6;let f=n.getPixelForTick(r),g;if(!(e&&(i===1?g=Math.max(f-o,c-f):t===0?g=(n.getPixelForTick(1)-f)/2:g=(f-n.getPixelForTick(r-1))/2,f+=r<t?g:-g,f<o-h||f>c+h)))return f}function cV(n,t){ue(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function kc(n){return n.drawTicks?n.tickLength:0}function rT(n,t){if(!n.display)return 0;const e=xn(n.font,t),i=xi(n.padding);return(We(n.text)?n.text.length:1)*e.lineHeight+i.height}function uV(n,t){return no(n,{scale:t,type:"scale"})}function hV(n,t,e){return no(n,{tick:e,index:t,type:"tick"})}function fV(n,t,e){let i=ey(n);return(e&&t!=="right"||!e&&t==="right")&&(i=oV(i)),i}function dV(n,t,e,i){const{top:r,left:o,bottom:c,right:h,chart:f}=n,{chartArea:g,scales:y}=f;let _=0,x,w,k;const R=c-r,D=h-o;if(n.isHorizontal()){if(w=_n(i,o,h),te(e)){const U=Object.keys(e)[0],W=e[U];k=y[U].getPixelForValue(W)+R-t}else e==="center"?k=(g.bottom+g.top)/2+R-t:k=nT(n,e,t);x=h-o}else{if(te(e)){const U=Object.keys(e)[0],W=e[U];w=y[U].getPixelForValue(W)-D+t}else e==="center"?w=(g.left+g.right)/2-D+t:w=nT(n,e,t);k=_n(i,c,r),_=e==="left"?-zi:zi}return{titleX:w,titleY:k,maxWidth:x,rotation:_}}class Sl extends io{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=cs(t,Number.POSITIVE_INFINITY),e=cs(e,Number.NEGATIVE_INFINITY),i=cs(i,Number.POSITIVE_INFINITY),r=cs(r,Number.NEGATIVE_INFINITY),{min:cs(t,i),max:cs(e,r),minDefined:En(t),maxDefined:En(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let f=0,g=h.length;f<g;++f)c=h[f].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:cs(e,cs(i,e)),max:cs(i,cs(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ve(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Dz(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=h<this.ticks.length;this._convertTicksToLabels(f?sT(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=eV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ve(this.options.afterUpdate,[this])}beforeSetDimensions(){ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ve(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ve(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=ve(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=iT(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let c=r,h,f,g;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const y=this._getLabelSizes(),_=y.widest.width,x=y.highest.height,w=bi(this.chart.width-_,0,this.maxWidth);h=t.offset?this.maxWidth/i:w/(i-1),_+6>h&&(h=w/(i-(t.offset?.5:1)),f=this.maxHeight-kc(t.grid)-e.padding-rT(t.title,this.chart.options.font),g=Math.sqrt(_*_+x*x),c=tz(Math.min(Math.asin(bi((y.highest.height+6)/h,-1,1)),Math.asin(bi(f/g,-1,1))-Math.asin(bi(x/g,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ve(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const f=rT(r,e.options.font);if(h?(t.width=this.maxWidth,t.height=kc(o)+f):(t.height=this.maxHeight,t.width=kc(o)+f),i.display&&this.ticks.length){const{first:g,last:y,widest:_,highest:x}=this._getLabelSizes(),w=i.padding*2,k=Ha(this.labelRotation),R=Math.cos(k),D=Math.sin(k);if(h){const U=i.mirror?0:D*_.width+R*x.height;t.height=Math.min(this.maxHeight,t.height+U+w)}else{const U=i.mirror?0:R*_.width+D*x.height;t.width=Math.min(this.maxWidth,t.width+U+w)}this._calculatePadding(g,y,D,R)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:c},position:h}=this.options,f=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,w=0;f?g?(x=r*t.width,w=i*e.height):(x=i*t.height,w=r*e.width):o==="start"?w=e.width:o==="end"?x=t.width:o!=="inner"&&(x=t.width/2,w=e.width/2),this.paddingLeft=Math.max((x-y+c)*this.width/(this.width-y),0),this.paddingRight=Math.max((w-_+c)*this.width/(this.width-_),0)}else{let y=e.height/2,_=t.height/2;o==="start"?(y=0,_=t.height):o==="end"&&(y=e.height,_=0),this.paddingTop=y+c,this.paddingBottom=_+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ve(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ye(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=sT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,c=[],h=[],f=Math.floor(e/iT(e,i));let g=0,y=0,_,x,w,k,R,D,U,W,J,at,st;for(_=0;_<e;_+=f){if(k=t[_].label,R=this._resolveTickFontOptions(_),r.font=D=R.string,U=o[D]=o[D]||{data:{},gc:[]},W=R.lineHeight,J=at=0,!ye(k)&&!We(k))J=zx(r,U.data,U.gc,J,k),at=W;else if(We(k))for(x=0,w=k.length;x<w;++x)st=k[x],!ye(st)&&!We(st)&&(J=zx(r,U.data,U.gc,J,st),at+=W);c.push(J),h.push(at),g=Math.max(J,g),y=Math.max(at,y)}cV(o,e);const ot=c.indexOf(g),I=h.indexOf(y),A=N=>({width:c[N]||0,height:h[N]||0});return{first:A(0),last:A(e-1),widest:A(ot),highest:A(I),widths:c,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return iz(this._alignToPixels?Va(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=hV(this.getContext(),t,i))}return this.$context||(this.$context=uV(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ha(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,h=o?o.widest.width+c:0,f=o?o.highest.height+c:0;return this.isHorizontal()?f*i>h*r?h/i:f/r:f*r<h*i?f/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:h}=r,f=o.offset,g=this.isHorizontal(),_=this.ticks.length+(f?1:0),x=kc(o),w=[],k=h.setContext(this.getContext()),R=k.display?k.width:0,D=R/2,U=function(q){return Va(i,q,R)};let W,J,at,st,ot,I,A,N,V,M,L,O;if(c==="top")W=U(this.bottom),I=this.bottom-x,N=W-D,M=U(t.top)+D,O=t.bottom;else if(c==="bottom")W=U(this.top),M=t.top,O=U(t.bottom)-D,I=W+D,N=this.top+x;else if(c==="left")W=U(this.right),ot=this.right-x,A=W-D,V=U(t.left)+D,L=t.right;else if(c==="right")W=U(this.left),V=t.left,L=U(t.right)-D,ot=W+D,A=this.left+x;else if(e==="x"){if(c==="center")W=U((t.top+t.bottom)/2+.5);else if(te(c)){const q=Object.keys(c)[0],tt=c[q];W=U(this.chart.scales[q].getPixelForValue(tt))}M=t.top,O=t.bottom,I=W+D,N=I+x}else if(e==="y"){if(c==="center")W=U((t.left+t.right)/2);else if(te(c)){const q=Object.keys(c)[0],tt=c[q];W=U(this.chart.scales[q].getPixelForValue(tt))}ot=W-D,A=ot-x,V=t.left,L=t.right}const kt=Wt(r.ticks.maxTicksLimit,_),Nt=Math.max(1,Math.ceil(_/kt));for(J=0;J<_;J+=Nt){const q=this.getContext(J),tt=o.setContext(q),pt=h.setContext(q),Dt=tt.lineWidth,At=tt.color,z=pt.dash||[],X=pt.dashOffset,ut=tt.tickWidth,ht=tt.tickColor,Tt=tt.tickBorderDash||[],Y=tt.tickBorderDashOffset;at=lV(this,J,f),at!==void 0&&(st=Va(i,at,Dt),g?ot=A=V=L=st:I=N=M=O=st,w.push({tx1:ot,ty1:I,tx2:A,ty2:N,x1:V,y1:M,x2:L,y2:O,width:Dt,color:At,borderDash:z,borderDashOffset:X,tickWidth:ut,tickColor:ht,tickBorderDash:Tt,tickBorderDashOffset:Y}))}return this._ticksLength=_,this._borderValue=W,w}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),h=this.ticks,{align:f,crossAlign:g,padding:y,mirror:_}=o,x=kc(i.grid),w=x+y,k=_?-y:w,R=-Ha(this.labelRotation),D=[];let U,W,J,at,st,ot,I,A,N,V,M,L,O="middle";if(r==="top")ot=this.bottom-k,I=this._getXAxisLabelAlignment();else if(r==="bottom")ot=this.top+k,I=this._getXAxisLabelAlignment();else if(r==="left"){const Nt=this._getYAxisLabelAlignment(x);I=Nt.textAlign,st=Nt.x}else if(r==="right"){const Nt=this._getYAxisLabelAlignment(x);I=Nt.textAlign,st=Nt.x}else if(e==="x"){if(r==="center")ot=(t.top+t.bottom)/2+w;else if(te(r)){const Nt=Object.keys(r)[0],q=r[Nt];ot=this.chart.scales[Nt].getPixelForValue(q)+w}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")st=(t.left+t.right)/2-w;else if(te(r)){const Nt=Object.keys(r)[0],q=r[Nt];st=this.chart.scales[Nt].getPixelForValue(q)}I=this._getYAxisLabelAlignment(x).textAlign}e==="y"&&(f==="start"?O="top":f==="end"&&(O="bottom"));const kt=this._getLabelSizes();for(U=0,W=h.length;U<W;++U){J=h[U],at=J.label;const Nt=o.setContext(this.getContext(U));A=this.getPixelForTick(U)+o.labelOffset,N=this._resolveTickFontOptions(U),V=N.lineHeight,M=We(at)?at.length:1;const q=M/2,tt=Nt.color,pt=Nt.textStrokeColor,Dt=Nt.textStrokeWidth;let At=I;c?(st=A,I==="inner"&&(U===W-1?At=this.options.reverse?"left":"right":U===0?At=this.options.reverse?"right":"left":At="center"),r==="top"?g==="near"||R!==0?L=-M*V+V/2:g==="center"?L=-kt.highest.height/2-q*V+V:L=-kt.highest.height+V/2:g==="near"||R!==0?L=V/2:g==="center"?L=kt.highest.height/2-q*V:L=kt.highest.height-M*V,_&&(L*=-1),R!==0&&!Nt.showLabelBackdrop&&(st+=V/2*Math.sin(R))):(ot=A,L=(1-M)*V/2);let z;if(Nt.showLabelBackdrop){const X=xi(Nt.backdropPadding),ut=kt.heights[U],ht=kt.widths[U];let Tt=L-X.top,Y=0-X.left;switch(O){case"middle":Tt-=ut/2;break;case"bottom":Tt-=ut;break}switch(I){case"center":Y-=ht/2;break;case"right":Y-=ht;break;case"inner":U===W-1?Y-=ht:U>0&&(Y-=ht/2);break}z={left:Y,top:Tt,width:ht+X.width,height:ut+X.height,color:Nt.backdropColor}}D.push({label:at,font:N,textOffset:L,options:{rotation:R,color:tt,strokeColor:pt,strokeWidth:Dt,textAlign:At,textBaseline:O,translation:[st,ot],backdrop:z}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ha(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),h=t+o,f=c.widest.width;let g,y;return e==="left"?r?(y=this.right+o,i==="near"?g="left":i==="center"?(g="center",y+=f/2):(g="right",y+=f)):(y=this.right-h,i==="near"?g="right":i==="center"?(g="center",y-=f/2):(g="left",y=this.left)):e==="right"?r?(y=this.left+o,i==="near"?g="right":i==="center"?(g="center",y-=f/2):(g="left",y-=f)):(y=this.left+h,i==="near"?g="left":i==="center"?(g="center",y+=f/2):(g="right",y=this.right)):g="right",{textAlign:g,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const h=(f,g,y)=>{!y.width||!y.color||(i.save(),i.lineWidth=y.width,i.strokeStyle=y.color,i.setLineDash(y.borderDash||[]),i.lineDashOffset=y.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=r.length;o<c;++o){const f=r[o];e.drawOnChartArea&&h({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&h({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const h=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,y,_,x;this.isHorizontal()?(g=Va(t,this.left,c)-c/2,y=Va(t,this.right,h)+h/2,_=x=f):(_=Va(t,this.top,c)-c/2,x=Va(t,this.bottom,h)+h/2,g=y=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(g,_),e.lineTo(y,x),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Dd(i,r);const o=this.getLabelItems(t);for(const c of o){const h=c.options,f=c.font,g=c.label,y=c.textOffset;fu(i,g,0,y,f,h)}r&&Md(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=xn(i.font),c=xi(i.padding),h=i.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||te(e)?(f+=c.bottom,We(i.text)&&(f+=o.lineHeight*(i.text.length-1))):f+=c.top;const{titleX:g,titleY:y,maxWidth:_,rotation:x}=dV(this,f,e,h);fu(t,i.text,0,0,o,{color:i.color,maxWidth:_,rotation:x,textAlign:fV(h,e,r),textBaseline:"middle",translation:[g,y]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Wt(t.grid&&t.grid.z,-1),r=Wt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Sl.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=e.length;o<c;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return xn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _f{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;pV(e)&&(i=this.register(e));const r=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,gV(t,c,i),this.override&&Pe.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in Pe[r]&&(delete Pe[r][i],this.override&&delete Ja[i])}}function gV(n,t,e){const i=cu(Object.create(null),[e?Pe.get(e):{},Pe.get(t),n.defaults]);Pe.set(t,i),n.defaultRoutes&&mV(t,n.defaultRoutes),n.descriptors&&Pe.describe(t,n.descriptors)}function mV(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),h=c.pop(),f=c.join(".");Pe.route(o,r,f,h)})}function pV(n){return"id"in n&&"defaults"in n}class yV{constructor(){this.controllers=new _f(XS,"datasets",!0),this.elements=new _f(io,"elements"),this.plugins=new _f(Object,"plugins"),this.scales=new _f(Sl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ue(r,c=>{const h=i||this._getRegistryForType(c);this._exec(t,h,c)})})}_exec(t,e,i){const r=J0(t);ve(i["before"+r],[],i),e[t](i),ve(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var hs=new yV;class _V{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),c}_notify(t,e,i,r){r=r||{};for(const o of t){const c=o.plugin,h=c[i],f=[e,r,o.options];if(ve(h,f,c)===!1&&r.cancelable)return!1}return!0}invalidate(){ye(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Wt(i.options&&i.options.plugins,{}),o=bV(i);return r===!1&&!e?[]:xV(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(h=>!c.some(f=>h.plugin.id===f.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function bV(n){const t={},e=[],i=Object.keys(hs.plugins.items);for(let o=0;o<i.length;o++)e.push(hs.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function vV(n,t){return!t&&n===!1?null:n===!0?{}:n}function xV(n,{plugins:t,localIds:e},i,r){const o=[],c=n.getContext();for(const h of t){const f=h.id,g=vV(i[f],r);g!==null&&o.push({plugin:h,options:TV(n.config,{plugin:h,local:e[f]},g,c)})}return o}function TV(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kp(n,t){const e=Pe.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function EV(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function wV(n,t){return n===t?"_index_":"_value_"}function aT(n){if(n==="x"||n==="y"||n==="r")return n}function SV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Qp(n,...t){if(aT(n))return n;for(const e of t){const i=e.axis||SV(e.position)||n.length>1&&aT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function oT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function AV(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return oT(n,"x",e[0])||oT(n,"y",e[0])}return{}}function CV(n,t){const e=Ja[n.type]||{scales:{}},i=t.scales||{},r=Kp(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const h=i[c];if(!te(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const f=Qp(c,h,AV(c,n),Pe.scales[h.type]),g=wV(f,r),y=e.scales||{};o[c]=Yc(Object.create(null),[{axis:f},h,y[f],y[g]])}),n.data.datasets.forEach(c=>{const h=c.type||n.type,f=c.indexAxis||Kp(h,t),y=(Ja[h]||{}).scales||{};Object.keys(y).forEach(_=>{const x=EV(_,f),w=c[x+"AxisID"]||x;o[w]=o[w]||Object.create(null),Yc(o[w],[{axis:x},i[w],y[_]])})}),Object.keys(o).forEach(c=>{const h=o[c];Yc(h,[Pe.scales[h.type],Pe.scale])}),o}function nA(n){const t=n.options||(n.options={});t.plugins=Wt(t.plugins,{}),t.scales=CV(n,t)}function iA(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function RV(n){return n=n||{},n.data=iA(n.data),nA(n),n}const lT=new Map,sA=new Set;function bf(n,t){let e=lT.get(n);return e||(e=t(),lT.set(n,e),sA.add(e)),e}const Nc=(n,t,e)=>{const i=rd(t,e);i!==void 0&&n.add(i)};class IV{constructor(t){this._config=RV(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=iA(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),nA(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return bf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return bf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return bf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return bf(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,c=this._cachedScopes(t,i),h=c.get(e);if(h)return h;const f=new Set;e.forEach(y=>{t&&(f.add(t),y.forEach(_=>Nc(f,t,_))),y.forEach(_=>Nc(f,r,_)),y.forEach(_=>Nc(f,Ja[o]||{},_)),y.forEach(_=>Nc(f,Pe,_)),y.forEach(_=>Nc(f,Gp,_))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),sA.has(e)&&c.set(e,g),g}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ja[e]||{},Pe.datasets[e]||{},{type:e},Pe,Gp]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=cT(this._resolverCache,t,r);let f=c;if(NV(c,e)){o.$shared=!1,i=na(i)?i():i;const g=this.createResolver(t,i,h);f=gl(c,i,g)}for(const g of e)o[g]=f[g];return o}createResolver(t,e,i=[""],r){const{resolver:o}=cT(this._resolverCache,t,i);return te(e)?gl(o,e,void 0,r):o}}function cT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:iy(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,o)),o}const kV=n=>te(n)&&Object.getOwnPropertyNames(n).some(t=>na(n[t]));function NV(n,t){const{isScriptable:e,isIndexable:i}=PS(n);for(const r of t){const o=e(r),c=i(r),h=(c||o)&&n[r];if(o&&(na(h)||kV(h))||c&&We(h))return!0}return!1}var DV="4.5.1";const MV=["top","bottom","left","right","chartArea"];function uT(n,t){return n==="top"||n==="bottom"||MV.indexOf(n)===-1&&t==="x"}function hT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function fT(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ve(e&&e.onComplete,[n],t)}function OV(n){const t=n.chart,e=t.options.animation;ve(e&&e.onProgress,[n],t)}function rA(n){return ay()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Vf={},dT=n=>{const t=rA(n);return Object.values(Vf).filter(e=>e.canvas===t).pop()};function zV(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const c=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=c)}}}function VV(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let Vd=class{static defaults=Pe;static instances=Vf;static overrides=Ja;static registry=hs;static version=DV;static getChart=dT;static register(...t){hs.add(...t),gT()}static unregister(...t){hs.remove(...t),gT()}constructor(t,e){const i=this.config=new IV(e),r=rA(t),o=dT(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||tV(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,c.aspectRatio),f=h&&h.canvas,g=f&&f.height,y=f&&f.width;if(this.id=B4(),this.ctx=h,this.canvas=f,this.width=y,this.height=g,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _V,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lz(_=>this.update(_),c.resizeDelay||0),this._dataChanges=[],Vf[this.id]=this,!h||!f){console.error("Failed to create chart: can't acquire context from the given item");return}Fs.listen(this,"complete",fT),Fs.listen(this,"progress",OV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return ye(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return hs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vx(this.canvas,this.ctx),this}stop(){return Fs.stop(this),this}resize(t,e){Fs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,jx(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),ve(i.onResize,[this,c],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ue(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,h)=>(c[h]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const h=e[c],f=Qp(c,h),g=f==="r",y=f==="x";return{options:h,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),ue(o,c=>{const h=c.options,f=h.id,g=Qp(f,h),y=Wt(h.type,c.dtype);(h.position===void 0||uT(h.position,g)!==uT(c.dposition))&&(h.position=c.dposition),r[f]=!0;let _=null;if(f in i&&i[f].type===y)_=i[f];else{const x=hs.getScale(y);_=new x({id:f,type:y,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(h,t)}),ue(r,(c,h)=>{c||delete i[h]}),ue(i,c=>{vi.configure(this,c,c.options),vi.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(hT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let c=this.getDatasetMeta(i);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=h,c.indexAxis=o.indexAxis||Kp(h,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const f=hs.getController(h),{datasetElementType:g,dataElementType:y}=Pe.datasets[h];Object.assign(f,{dataElementType:hs.getElement(y),datasetElementType:g&&hs.getElement(g)}),c.controller=new f(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){ue(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:_}=this.getDatasetMeta(g),x=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(x),c=Math.max(+_.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||ue(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(hT("z","_idx"));const{_active:h,_lastEvent:f}=this;f?this._eventHandler(f,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){ue(this.scales,t=>{vi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ax(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const c=i==="_removeElements"?-o:o;zV(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!Ax(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vi.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ue(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,na(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fs.has(this)?this.attached&&!Fs.running(this)&&Fs.start(this):(this.draw(),fT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=YS(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Dd(e,r),t.controller.draw(),r&&Md(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return hu(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=M5.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=no(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,r);ad(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Fs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Vx(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Vf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},r=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};ue(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,g)=>{e.addEventListener(this,f,g),t[f]=g},r=(f,g)=>{t[f]&&(e.removeEventListener(this,f,g),delete t[f])},o=(f,g)=>{this.canvas&&this.resize(f,g)};let c;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():c()}unbindEvents(){ue(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ue(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,c,h,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),h=0,f=t.length;h<f;++h){c=t[h];const g=c&&this.getDatasetMeta(c.datasetIndex).controller;g&&g[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!id(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(f,g)=>f.filter(y=>!g.some(_=>y.datasetIndex===_.datasetIndex&&y.index===_.index)),c=o(e,t),h=i?t:o(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,c=e,h=this._getActiveElements(t,r,i,c),f=Y4(t),g=VV(t,this._lastEvent,i,f);i&&(this._lastEvent=null,ve(o.onHover,[t,h,this],this),f&&ve(o.onClick,[t,h,this],this));const y=!id(h,r);return(y||e)&&(this._active=h,this._updateHoverStyles(h,r,e)),this._lastEvent=g,y}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}};function gT(){return ue(Vd.instances,n=>n._plugins.invalidate())}function aA(n,t,e=t){n.lineCap=Wt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Wt(e.borderDash,t.borderDash)),n.lineDashOffset=Wt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Wt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Wt(e.borderWidth,t.borderWidth),n.strokeStyle=Wt(e.borderColor,t.borderColor)}function PV(n,t,e){n.lineTo(e.x,e.y)}function LV(n){return n.stepped?Tz:n.tension||n.cubicInterpolationMode==="monotone"?Ez:PV}function oA(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:c,end:h}=t,f=Math.max(r,c),g=Math.min(o,h),y=r<c&&o<c||r>h&&o>h;return{count:i,start:f,loop:t.loop,ilen:g<f&&!y?i+g-f:g-f}}function jV(n,t,e,i){const{points:r,options:o}=t,{count:c,start:h,loop:f,ilen:g}=oA(r,e,i),y=LV(o);let{move:_=!0,reverse:x}=i||{},w,k,R;for(w=0;w<=g;++w)k=r[(h+(x?g-w:w))%c],!k.skip&&(_?(n.moveTo(k.x,k.y),_=!1):y(n,R,k,x,o.stepped),R=k);return f&&(k=r[(h+(x?g:0))%c],y(n,R,k,x,o.stepped)),!!f}function UV(n,t,e,i){const r=t.points,{count:o,start:c,ilen:h}=oA(r,e,i),{move:f=!0,reverse:g}=i||{};let y=0,_=0,x,w,k,R,D,U;const W=at=>(c+(g?h-at:at))%o,J=()=>{R!==D&&(n.lineTo(y,D),n.lineTo(y,R),n.lineTo(y,U))};for(f&&(w=r[W(0)],n.moveTo(w.x,w.y)),x=0;x<=h;++x){if(w=r[W(x)],w.skip)continue;const at=w.x,st=w.y,ot=at|0;ot===k?(st<R?R=st:st>D&&(D=st),y=(_*y+at)/++_):(J(),n.lineTo(at,st),k=ot,_=0,R=D=st),U=st}J()}function Xp(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?UV:jV}function BV(n){return n.stepped?n5:n.tension||n.cubicInterpolationMode==="monotone"?i5:Ua}function HV(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),aA(n,t.options),n.stroke(r)}function FV(n,t,e,i){const{segments:r,options:o}=t,c=Xp(t);for(const h of r)aA(n,o,h.style),n.beginPath(),c(n,t,h,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const qV=typeof Path2D=="function";function GV(n,t,e,i){qV&&!t.options.segment?HV(n,t,e,i):FV(n,t,e,i)}class Pd extends io{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Kz(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=c5(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,c=$S(this,{property:e,start:r,end:r});if(!c.length)return;const h=[],f=BV(i);let g,y;for(g=0,y=c.length;g<y;++g){const{start:_,end:x}=c[g],w=o[_],k=o[x];if(w===k){h.push(w);continue}const R=Math.abs((r-w[e])/(k[e]-w[e])),D=f(w,k,R,i.stepped);D[e]=t[e],h.push(D)}return h.length===1?h[0]:h}pathSegment(t,e,i){return Xp(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=Xp(this);let c=this._loop;e=e||0,i=i||this.points.length-e;for(const h of r)c&=o(t,this,h,{start:e,end:e+i-1});return!!c}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),GV(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function mT(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class $V extends io{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return mT(this,t,"x",e)}inYRange(t,e){return mT(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!hu(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,$p(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function YV(n,t,e){const i=n.segments,r=n.points,o=t.points,c=[];for(const h of i){let{start:f,end:g}=h;g=Ld(f,g,r);const y=Wp(e,r[f],r[g],h.loop);if(!t.segments){c.push({source:h,target:y,start:r[f],end:r[g]});continue}const _=$S(t,y);for(const x of _){const w=Wp(e,o[x.start],o[x.end],x.loop),k=GS(h,r,w);for(const R of k)c.push({source:R,target:x,start:{[e]:pT(y,w,"start",Math.max)},end:{[e]:pT(y,w,"end",Math.min)}})}}return c}function Wp(n,t,e,i){if(i)return;let r=t[n],o=e[n];return n==="angle"&&(r=ds(r),o=ds(o)),{property:n,start:r,end:o}}function KV(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,o=[];return t.segments.forEach(({start:c,end:h})=>{h=Ld(c,h,r);const f=r[c],g=r[h];i!==null?(o.push({x:f.x,y:i}),o.push({x:g.x,y:i})):e!==null&&(o.push({x:e,y:f.y}),o.push({x:e,y:g.y}))}),o}function Ld(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function pT(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function lA(n,t){let e=[],i=!1;return We(n)?(i=!0,e=n):e=KV(n,t),e.length?new Pd({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function yT(n){return n&&n.fill!==!1}function QV(n,t,e){let r=n[t].fill;const o=[t];let c;if(!e)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!En(r))return r;if(c=n[r],!c)return!1;if(c.visible)return r;o.push(r),r=c.fill}return!1}function XV(n,t,e){const i=t3(n);if(te(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return En(r)&&Math.floor(r)===r?WV(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function WV(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function ZV(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:te(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function JV(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:te(n)?i=n.value:i=t.getBaseValue(),i}function t3(n){const t=n.options,e=t.fill;let i=Wt(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function e3(n){const{scale:t,index:e,line:i}=n,r=[],o=i.segments,c=i.points,h=n3(t,e);h.push(lA({x:null,y:t.bottom},i));for(let f=0;f<o.length;f++){const g=o[f];for(let y=g.start;y<=g.end;y++)i3(r,c[y],h)}return new Pd({points:r,options:{}})}function n3(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const o=i[r];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function i3(n,t,e){const i=[];for(let r=0;r<e.length;r++){const o=e[r],{first:c,last:h,point:f}=s3(o,t,"x");if(!(!f||c&&h)){if(c)i.unshift(f);else if(n.push(f),!h)break}}n.push(...i)}function s3(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],o=n.segments,c=n.points;let h=!1,f=!1;for(let g=0;g<o.length;g++){const y=o[g],_=c[y.start][e],x=c[y.end][e];if(Zo(r,_,x)){h=r===_,f=r===x;break}}return{first:h,last:f,point:i}}class cA{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:o,radius:c}=this;return e=e||{start:0,end:Pi},t.arc(r,o,c,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,o=t.angle;return{x:e+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}}function r3(n){const{chart:t,fill:e,line:i}=n;if(En(e))return a3(t,e);if(e==="stack")return e3(n);if(e==="shape")return!0;const r=o3(n);return r instanceof cA?r:lA(r,i)}function a3(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function o3(n){return(n.scale||{}).getPointPositionForValue?c3(n):l3(n)}function l3(n){const{scale:t={},fill:e}=n,i=ZV(e,t);if(En(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function c3(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,o=i.reverse?t.max:t.min,c=JV(e,t,o),h=[];if(i.grid.circular){const f=t.getPointPositionForValue(0,o);return new cA({x:f.x,y:f.y,radius:t.getDistanceFromCenterForValue(c)})}for(let f=0;f<r;++f)h.push(t.getPointPositionForValue(f,c));return h}function up(n,t,e){const i=r3(t),{chart:r,index:o,line:c,scale:h,axis:f}=t,g=c.options,y=g.fill,_=g.backgroundColor,{above:x=_,below:w=_}=y||{},k=r.getDatasetMeta(o),R=YS(r,k);i&&c.points.length&&(Dd(n,e),u3(n,{line:c,target:i,above:x,below:w,area:e,scale:h,axis:f,clip:R}),Md(n))}function u3(n,t){const{line:e,target:i,above:r,below:o,area:c,scale:h,clip:f}=t,g=e._loop?"angle":t.axis;n.save();let y=o;o!==r&&(g==="x"?(_T(n,i,c.top),hp(n,{line:e,target:i,color:r,scale:h,property:g,clip:f}),n.restore(),n.save(),_T(n,i,c.bottom)):g==="y"&&(bT(n,i,c.left),hp(n,{line:e,target:i,color:o,scale:h,property:g,clip:f}),n.restore(),n.save(),bT(n,i,c.right),y=r)),hp(n,{line:e,target:i,color:y,scale:h,property:g,clip:f}),n.restore()}function _T(n,t,e){const{segments:i,points:r}=t;let o=!0,c=!1;n.beginPath();for(const h of i){const{start:f,end:g}=h,y=r[f],_=r[Ld(f,g,r)];o?(n.moveTo(y.x,y.y),o=!1):(n.lineTo(y.x,e),n.lineTo(y.x,y.y)),c=!!t.pathSegment(n,h,{move:c}),c?n.closePath():n.lineTo(_.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function bT(n,t,e){const{segments:i,points:r}=t;let o=!0,c=!1;n.beginPath();for(const h of i){const{start:f,end:g}=h,y=r[f],_=r[Ld(f,g,r)];o?(n.moveTo(y.x,y.y),o=!1):(n.lineTo(e,y.y),n.lineTo(y.x,y.y)),c=!!t.pathSegment(n,h,{move:c}),c?n.closePath():n.lineTo(e,_.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function hp(n,t){const{line:e,target:i,property:r,color:o,scale:c,clip:h}=t,f=YV(e,i,r);for(const{source:g,target:y,start:_,end:x}of f){const{style:{backgroundColor:w=o}={}}=g,k=i!==!0;n.save(),n.fillStyle=w,h3(n,c,h,k&&Wp(r,_,x)),n.beginPath();const R=!!e.pathSegment(n,g);let D;if(k){R?n.closePath():vT(n,i,x,r);const U=!!i.pathSegment(n,y,{move:R,reverse:!0});D=R&&U,D||vT(n,i,_,r)}n.closePath(),n.fill(D?"evenodd":"nonzero"),n.restore()}}function h3(n,t,e,i){const r=t.chart.chartArea,{property:o,start:c,end:h}=i||{};if(o==="x"||o==="y"){let f,g,y,_;o==="x"?(f=c,g=r.top,y=h,_=r.bottom):(f=r.left,g=c,y=r.right,_=h),n.beginPath(),e&&(f=Math.max(f,e.left),y=Math.min(y,e.right),g=Math.max(g,e.top),_=Math.min(_,e.bottom)),n.rect(f,g,y-f,_-g),n.clip()}}function vT(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var f3={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let o,c,h,f;for(c=0;c<i;++c)o=n.getDatasetMeta(c),h=o.dataset,f=null,h&&h.options&&h instanceof Pd&&(f={visible:n.isDatasetVisible(c),index:c,fill:XV(h,c,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:h}),o.$filler=f,r.push(f);for(c=0;c<i;++c)f=r[c],!(!f||f.fill===!1)&&(f.fill=QV(r,c,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let c=r.length-1;c>=0;--c){const h=r[c].$filler;h&&(h.line.updateControlPoints(o,h.axis),i&&h.fill&&up(n.ctx,h,o))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const o=i[r].$filler;yT(o)&&up(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!yT(i)||e.drawTime!=="beforeDatasetDraw"||up(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const xT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},d3=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class TT extends io{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ve(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=xn(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:f}=xT(i,o);let g,y;e.font=r.string,this.isHorizontal()?(g=this.maxWidth,y=this._fitRows(c,o,h,f)+10):(y=this.maxHeight,g=this._fitCols(c,r,h,f)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(y,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],y=r+h;let _=t;o.textAlign="left",o.textBaseline="middle";let x=-1,w=-y;return this.legendItems.forEach((k,R)=>{const D=i+e/2+o.measureText(k.text).width;(R===0||g[g.length-1]+D+2*h>c)&&(_+=y,g[g.length-(R>0?0:1)]=0,w+=y,x++),f[R]={left:0,top:w,row:x,width:D,height:r},g[g.length-1]+=D+h}),_}_fitCols(t,e,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],y=c-t;let _=h,x=0,w=0,k=0,R=0;return this.legendItems.forEach((D,U)=>{const{itemWidth:W,itemHeight:J}=g3(i,e,o,D,r);U>0&&w+J+2*h>y&&(_+=x+h,g.push({width:x,height:w}),k+=x+h,R++,x=w=0),f[U]={left:k,top:w,col:R,width:W,height:J},x=Math.max(x,W),w+=J+h}),_+=x,g.push({width:x,height:w}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,c=il(o,this.left,this.width);if(this.isHorizontal()){let h=0,f=_n(i,this.left+r,this.right-this.lineWidths[h]);for(const g of e)h!==g.row&&(h=g.row,f=_n(i,this.left+r,this.right-this.lineWidths[h])),g.top+=this.top+t+r,g.left=c.leftForLtr(c.x(f),g.width),f+=g.width+r}else{let h=0,f=_n(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const g of e)g.col!==h&&(h=g.col,f=_n(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),g.top=f,g.left+=this.left+r,g.left=c.leftForLtr(c.x(g.left),g.width),f+=g.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Dd(t,this),this._draw(),Md(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:c}=t,h=Pe.color,f=il(t.rtl,this.left,this.width),g=xn(c.font),{padding:y}=c,_=g.size,x=_/2;let w;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=g.string;const{boxWidth:k,boxHeight:R,itemHeight:D}=xT(c,_),U=function(ot,I,A){if(isNaN(k)||k<=0||isNaN(R)||R<0)return;r.save();const N=Wt(A.lineWidth,1);if(r.fillStyle=Wt(A.fillStyle,h),r.lineCap=Wt(A.lineCap,"butt"),r.lineDashOffset=Wt(A.lineDashOffset,0),r.lineJoin=Wt(A.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=Wt(A.strokeStyle,h),r.setLineDash(Wt(A.lineDash,[])),c.usePointStyle){const V={radius:R*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:N},M=f.xPlus(ot,k/2),L=I+x;zS(r,V,M,L,c.pointStyleWidth&&k)}else{const V=I+Math.max((_-R)/2,0),M=f.leftForLtr(ot,k),L=Wc(A.borderRadius);r.beginPath(),Object.values(L).some(O=>O!==0)?Yp(r,{x:M,y:V,w:k,h:R,radius:L}):r.rect(M,V,k,R),r.fill(),N!==0&&r.stroke()}r.restore()},W=function(ot,I,A){fu(r,A.text,ot,I+D/2,g,{strikethrough:A.hidden,textAlign:f.textAlign(A.textAlign)})},J=this.isHorizontal(),at=this._computeTitleHeight();J?w={x:_n(o,this.left+y,this.right-i[0]),y:this.top+y+at,line:0}:w={x:this.left+y,y:_n(o,this.top+at+y,this.bottom-e[0].height),line:0},HS(this.ctx,t.textDirection);const st=D+y;this.legendItems.forEach((ot,I)=>{r.strokeStyle=ot.fontColor,r.fillStyle=ot.fontColor;const A=r.measureText(ot.text).width,N=f.textAlign(ot.textAlign||(ot.textAlign=c.textAlign)),V=k+x+A;let M=w.x,L=w.y;f.setWidth(this.width),J?I>0&&M+V+y>this.right&&(L=w.y+=st,w.line++,M=w.x=_n(o,this.left+y,this.right-i[w.line])):I>0&&L+st>this.bottom&&(M=w.x=M+e[w.line].width+y,w.line++,L=w.y=_n(o,this.top+at+y,this.bottom-e[w.line].height));const O=f.x(M);if(U(O,L,ot),M=cz(N,M+k+x,J?M+V:this.right,t.rtl),W(f.x(M),L,ot),J)w.x+=V+y;else if(typeof ot.text!="string"){const kt=g.lineHeight;w.y+=uA(ot,kt)+y}else w.y+=st}),FS(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=xn(e.font),r=xi(e.padding);if(!e.display)return;const o=il(t.rtl,this.left,this.width),c=this.ctx,h=e.position,f=i.size/2,g=r.top+f;let y,_=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),y=this.top+g,_=_n(t.align,_,this.right-x);else{const k=this.columnSizes.reduce((R,D)=>Math.max(R,D.height),0);y=g+_n(t.align,this.top,this.bottom-k-t.labels.padding-this._computeTitleHeight())}const w=_n(h,_,_+x);c.textAlign=o.textAlign(ey(h)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,fu(c,e.text,w,y,i)}_computeTitleHeight(){const t=this.options.title,e=xn(t.font),i=xi(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Zo(t,this.left,this.right)&&Zo(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Zo(t,r.left,r.left+r.width)&&Zo(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!y3(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=d3(r,i);r&&!o&&ve(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&ve(e.onHover,[t,i,this],this)}else i&&ve(e.onClick,[t,i,this],this)}}function g3(n,t,e,i,r){const o=m3(i,n,t,e),c=p3(r,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function m3(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(r).width}function p3(n,t,e){let i=n;return typeof t.text!="string"&&(i=uA(t,e)),i}function uA(n,t){const e=n.text?n.text.length:0;return t*e}function y3(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var _3={id:"legend",_element:TT,start(n,t,e){const i=n.legend=new TT({ctx:n.ctx,options:e,chart:n});vi.configure(n,i,e),vi.addBox(n,i)},stop(n){vi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;vi.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(e?0:void 0),y=xi(g.borderWidth);return{text:t[f.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:r||g.textAlign,borderRadius:c&&(h||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class hA extends io{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=We(i.text)?i.text.length:1;this._padding=xi(i.padding);const o=r*xn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:c}=this,h=c.align;let f=0,g,y,_;return this.isHorizontal()?(y=_n(h,i,o),_=e+t,g=o-i):(c.position==="left"?(y=i+t,_=_n(h,r,e),f=rn*-.5):(y=o-t,_=_n(h,e,r),f=rn*.5),g=r-e),{titleX:y,titleY:_,maxWidth:g,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=xn(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:h,maxWidth:f,rotation:g}=this._drawArgs(o);fu(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:g,textAlign:ey(e.align),textBaseline:"middle",translation:[c,h]})}}function b3(n,t){const e=new hA({ctx:n.ctx,options:t,chart:n});vi.configure(n,e,t),vi.addBox(n,e),n.titleBlock=e}var v3={id:"title",_element:hA,start(n,t,e){b3(n,e)},stop(n){const t=n.titleBlock;vi.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;vi.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Uc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const f=h.tooltipPosition();i.add(f.x),r+=f.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,f)=>h+f)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=n.length;o<c;++o){const f=n[o].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),y=qp(t,g);y<r&&(r=y,h=f)}}if(h){const f=h.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function us(n,t){return t&&(We(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function qs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function x3(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:c,value:h}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:h,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function ET(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:h}=t,f=xn(t.bodyFont),g=xn(t.titleFont),y=xn(t.footerFont),_=o.length,x=r.length,w=i.length,k=xi(t.padding);let R=k.height,D=0,U=i.reduce((at,st)=>at+st.before.length+st.lines.length+st.after.length,0);if(U+=n.beforeBody.length+n.afterBody.length,_&&(R+=_*g.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),U){const at=t.displayColors?Math.max(h,f.lineHeight):f.lineHeight;R+=w*at+(U-w)*f.lineHeight+(U-1)*t.bodySpacing}x&&(R+=t.footerMarginTop+x*y.lineHeight+(x-1)*t.footerSpacing);let W=0;const J=function(at){D=Math.max(D,e.measureText(at).width+W)};return e.save(),e.font=g.string,ue(n.title,J),e.font=f.string,ue(n.beforeBody.concat(n.afterBody),J),W=t.displayColors?c+2+t.boxPadding:0,ue(i,at=>{ue(at.before,J),ue(at.lines,J),ue(at.after,J)}),W=0,e.font=y.string,ue(n.footer,J),e.restore(),D+=k.width,{width:D,height:R}}function T3(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function E3(n,t,e,i){const{x:r,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+o+c>t.width||n==="right"&&r-o-c<0)return!0}function w3(n,t,e,i){const{x:r,width:o}=e,{width:c,chartArea:{left:h,right:f}}=n;let g="center";return i==="center"?g=r<=(h+f)/2?"left":"right":r<=o/2?g="left":r>=c-o/2&&(g="right"),E3(g,n,t,e)&&(g="center"),g}function wT(n,t,e){const i=e.yAlign||t.yAlign||T3(n,e);return{xAlign:e.xAlign||t.xAlign||w3(n,t,e,i),yAlign:i}}function S3(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function A3(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function ST(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:h,yAlign:f}=e,g=r+o,{topLeft:y,topRight:_,bottomLeft:x,bottomRight:w}=Wc(c);let k=S3(t,h);const R=A3(t,f,g);return f==="center"?h==="left"?k+=g:h==="right"&&(k-=g):h==="left"?k-=Math.max(y,x)+r:h==="right"&&(k+=Math.max(_,w)+r),{x:bi(k,0,i.width-t.width),y:bi(R,0,i.height-t.height)}}function vf(n,t,e){const i=xi(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function AT(n){return us([],qs(n))}function C3(n,t,e){return no(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function CT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const fA={beforeTitle:Hs,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Hs,beforeBody:Hs,beforeLabel:Hs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ye(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Hs,afterBody:Hs,beforeFooter:Hs,footer:Hs,afterFooter:Hs};function Ln(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?fA[t].call(e,i):r}class RT extends io{static positioners=Uc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new KS(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=C3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=Ln(i,"beforeTitle",this,t),o=Ln(i,"title",this,t),c=Ln(i,"afterTitle",this,t);let h=[];return h=us(h,qs(r)),h=us(h,qs(o)),h=us(h,qs(c)),h}getBeforeBody(t,e){return AT(Ln(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return ue(t,o=>{const c={before:[],lines:[],after:[]},h=CT(i,o);us(c.before,qs(Ln(h,"beforeLabel",this,o))),us(c.lines,Ln(h,"label",this,o)),us(c.after,qs(Ln(h,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(t,e){return AT(Ln(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=Ln(i,"beforeFooter",this,t),o=Ln(i,"footer",this,t),c=Ln(i,"afterFooter",this,t);let h=[];return h=us(h,qs(r)),h=us(h,qs(o)),h=us(h,qs(c)),h}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],c=[];let h=[],f,g;for(f=0,g=e.length;f<g;++f)h.push(x3(this.chart,e[f]));return t.filter&&(h=h.filter((y,_,x)=>t.filter(y,_,x,i))),t.itemSort&&(h=h.sort((y,_)=>t.itemSort(y,_,i))),ue(h,y=>{const _=CT(t.callbacks,y);r.push(Ln(_,"labelColor",this,y)),o.push(Ln(_,"labelPointStyle",this,y)),c.push(Ln(_,"labelTextColor",this,y))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const h=Uc[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const f=this._size=ET(this,i),g=Object.assign({},h,f),y=wT(this.chart,i,g),_=ST(i,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:_.x,y:_.y,width:f.width,height:f.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:f,topRight:g,bottomLeft:y,bottomRight:_}=Wc(h),{x,y:w}=t,{width:k,height:R}=e;let D,U,W,J,at,st;return o==="center"?(at=w+R/2,r==="left"?(D=x,U=D-c,J=at+c,st=at-c):(D=x+k,U=D+c,J=at-c,st=at+c),W=D):(r==="left"?U=x+Math.max(f,y)+c:r==="right"?U=x+k-Math.max(g,_)-c:U=this.caretX,o==="top"?(J=w,at=J-c,D=U-c,W=U+c):(J=w+R,at=J+c,D=U+c,W=U-c),st=J),{x1:D,x2:U,x3:W,y1:J,y2:at,y3:st}}drawTitle(t,e,i){const r=this.title,o=r.length;let c,h,f;if(o){const g=il(i.rtl,this.x,this.width);for(t.x=vf(this,i.titleAlign,i),e.textAlign=g.textAlign(i.titleAlign),e.textBaseline="middle",c=xn(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,f=0;f<o;++f)e.fillText(r[f],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+h,f+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,r,o){const c=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:f,boxWidth:g}=o,y=xn(o.bodyFont),_=vf(this,"left",o),x=r.x(_),w=f<y.lineHeight?(y.lineHeight-f)/2:0,k=e.y+w;if(o.usePointStyle){const R={radius:Math.min(g,f)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},D=r.leftForLtr(x,g)+g/2,U=k+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,$p(t,R,D,U),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,$p(t,R,D,U)}else{t.lineWidth=te(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const R=r.leftForLtr(x,g),D=r.leftForLtr(r.xPlus(x,1),g-2),U=Wc(c.borderRadius);Object.values(U).some(W=>W!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Yp(t,{x:R,y:k,w:g,h:f,radius:U}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),Yp(t,{x:D,y:k+1,w:g-2,h:f-2,radius:U}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(R,k,g,f),t.strokeRect(R,k,g,f),t.fillStyle=c.backgroundColor,t.fillRect(D,k+1,g-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:f,boxWidth:g,boxPadding:y}=i,_=xn(i.bodyFont);let x=_.lineHeight,w=0;const k=il(i.rtl,this.x,this.width),R=function(A){e.fillText(A,k.x(t.x+w),t.y+x/2),t.y+=x+o},D=k.textAlign(c);let U,W,J,at,st,ot,I;for(e.textAlign=c,e.textBaseline="middle",e.font=_.string,t.x=vf(this,D,i),e.fillStyle=i.bodyColor,ue(this.beforeBody,R),w=h&&D!=="right"?c==="center"?g/2+y:g+2+y:0,at=0,ot=r.length;at<ot;++at){for(U=r[at],W=this.labelTextColors[at],e.fillStyle=W,ue(U.before,R),J=U.lines,h&&J.length&&(this._drawColorBox(e,t,at,k,i),x=Math.max(_.lineHeight,f)),st=0,I=J.length;st<I;++st)R(J[st]),x=_.lineHeight;ue(U.after,R)}w=0,x=_.lineHeight,ue(this.afterBody,R),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let c,h;if(o){const f=il(i.rtl,this.x,this.width);for(t.x=vf(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",c=xn(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,h=0;h<o;++h)e.fillText(r[h],f.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:c}=this,{x:h,y:f}=t,{width:g,height:y}=i,{topLeft:_,topRight:x,bottomLeft:w,bottomRight:k}=Wc(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(h+_,f),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(h+g-x,f),e.quadraticCurveTo(h+g,f,h+g,f+x),c==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(h+g,f+y-k),e.quadraticCurveTo(h+g,f+y,h+g-k,f+y),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(h+w,f+y),e.quadraticCurveTo(h,f+y,h,f+y-w),c==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(h,f+_),e.quadraticCurveTo(h,f,h+_,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=Uc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=ET(this,t),f=Object.assign({},c,this._size),g=wT(e,t,f),y=ST(t,f,g,e);(r._to!==y.x||o._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=xi(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),HS(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),FS(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:h,index:f})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[f],index:f}}),o=!id(i,r),c=this._positionChanged(r,e);(o||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),h=this._positionChanged(c,t),f=e||!id(c,o)||h;return f&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,c=Uc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}var R3={id:"tooltip",_element:RT,positioners:Uc,afterInit(n,t,e){e&&(n.tooltip=new RT({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const I3=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function k3(n,t,e,i){const r=n.indexOf(t);if(r===-1)return I3(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const N3=(n,t)=>n===null?null:bi(Math.round(n),0,t);function IT(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class D3 extends Sl{static id="category";static defaults={ticks:{callback:IT}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ye(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:k3(i,t,Wt(e,t),this._addedLabels),N3(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)r.push({value:c});return r}getLabelForValue(t){return IT.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function M3(n,t){const e=[],{bounds:r,step:o,min:c,max:h,precision:f,count:g,maxTicks:y,maxDigits:_,includeBounds:x}=n,w=o||1,k=y-1,{min:R,max:D}=t,U=!ye(c),W=!ye(h),J=!ye(g),at=(D-R)/(_+1);let st=Rx((D-R)/k/w)*w,ot,I,A,N;if(st<1e-14&&!U&&!W)return[{value:R},{value:D}];N=Math.ceil(D/st)-Math.floor(R/st),N>k&&(st=Rx(N*st/k/w)*w),ye(f)||(ot=Math.pow(10,f),st=Math.ceil(st*ot)/ot),r==="ticks"?(I=Math.floor(R/st)*st,A=Math.ceil(D/st)*st):(I=R,A=D),U&&W&&o&&Z4((h-c)/o,st/1e3)?(N=Math.round(Math.min((h-c)/st,y)),st=(h-c)/N,I=c,A=h):J?(I=U?c:I,A=W?h:A,N=g-1,st=(A-I)/N):(N=(A-I)/st,Kc(N,Math.round(N),st/1e3)?N=Math.round(N):N=Math.ceil(N));const V=Math.max(Ix(st),Ix(I));ot=Math.pow(10,ye(f)?V:f),I=Math.round(I*ot)/ot,A=Math.round(A*ot)/ot;let M=0;for(U&&(x&&I!==c?(e.push({value:c}),I<c&&M++,Kc(Math.round((I+M*st)*ot)/ot,c,kT(c,at,n))&&M++):I<c&&M++);M<N;++M){const L=Math.round((I+M*st)*ot)/ot;if(W&&L>h)break;e.push({value:L})}return W&&x&&A!==h?e.length&&Kc(e[e.length-1].value,h,kT(h,at,n))?e[e.length-1].value=h:e.push({value:h}):(!W||A===h)&&e.push({value:A}),e}function kT(n,t,{horizontal:e,minRotation:i}){const r=Ha(i),o=(e?Math.sin(r):Math.cos(r))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class O3 extends Sl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ye(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=f=>r=e?r:f,h=f=>o=i?o:f;if(t){const f=dl(r),g=dl(o);f<0&&g<0?h(0):f>0&&g>0&&c(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);h(o+f),t||c(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=M3(r,o);return t.bounds==="ticks"&&J4(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return MS(t,this.chart.options.locale,this.options.ticks.format)}}class z3 extends O3{static id="linear";static defaults={ticks:{callback:OS.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=En(t)?t:0,this.max=En(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ha(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const jd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hn=Object.keys(jd);function NT(n,t){return n-t}function DT(n,t){if(ye(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),En(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(uu(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,r)),+c)}function MT(n,t,e,i){const r=Hn.length;for(let o=Hn.indexOf(n);o<r-1;++o){const c=jd[Hn[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(h*c.size))<=i)return Hn[o]}return Hn[r-1]}function V3(n,t,e,i,r){for(let o=Hn.length-1;o>=Hn.indexOf(e);o--){const c=Hn[o];if(jd[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return Hn[e?Hn.indexOf(e):0]}function P3(n){for(let t=Hn.indexOf(n)+1,e=Hn.length;t<e;++t)if(jd[Hn[t]].common)return Hn[t]}function OT(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=ty(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function L3(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),c=t[t.length-1].value;let h,f;for(h=o;h<=c;h=+r.add(h,1,i))f=e[h],f>=0&&(t[f].major=!0);return t}function zT(n,t,e){const i=[],r={},o=t.length;let c,h;for(c=0;c<o;++c)h=t[c],r[h]=c,i.push({value:h,major:!1});return o===0||!e?i:L3(n,i,r,e)}class VT extends Sl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new R5._date(t.adapters.date);r.init(e),Yc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:DT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function f(g){!c&&!isNaN(g.min)&&(r=Math.min(r,g.min)),!h&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!c||!h)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=En(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=En(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,h=rz(r,o,c);return this._unit=e.unit||(i.autoSkip?MT(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):V3(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:P3(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),zT(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=bi(e,0,c),i=bi(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||MT(o.minUnit,e,i,this._getLabelCapacity(e)),h=Wt(r.ticks.stepSize,1),f=c==="week"?o.isoWeekday:!1,g=uu(f)||f===!0,y={};let _=e,x,w;if(g&&(_=+t.startOf(_,"isoWeek",f)),_=+t.startOf(_,g?"day":c),t.diff(i,e,c)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+c);const k=r.ticks.source==="data"&&this.getDataTimestamps();for(x=_,w=0;x<i;x=+t.add(x,h,c),w++)OT(y,x,k);return(x===i||r.bounds==="ticks"||w===1)&&OT(y,x,k),Object.keys(y).sort(NT).map(R=>+R)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,c=e||r[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const o=this.options,c=o.ticks.callback;if(c)return ve(c,[t,e,i],this);const h=o.time.displayFormats,f=this._unit,g=this._majorUnit,y=f&&h[f],_=g&&h[g],x=i[e],w=g&&_&&x&&x.major;return this._adapter.format(t,r||(w?_:y))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Ha(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),c=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*c,h:i*c+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,zT(this,[t],this._majorUnit),r),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(DT(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return oz(t.sort(NT))}}function xf(n,t,e){let i=0,r=n.length-1,o,c,h,f;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Fa(n,"pos",t)),{pos:o,time:h}=n[i],{pos:c,time:f}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Fa(n,"time",t)),{time:o,pos:h}=n[i],{time:c,pos:f}=n[r]);const g=c-o;return g?h+(f-h)*(t-o)/g:h}class lP extends VT{static id="timeseries";static defaults=VT.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=xf(e,this.min),this._tableRange=xf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let c,h,f,g,y;for(c=0,h=t.length;c<h;++c)g=t[c],g>=e&&g<=i&&r.push(g);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,h=r.length;c<h;++c)y=r[c+1],f=r[c-1],g=r[c],Math.round((y+f)/2)!==g&&o.push({time:g,pos:c/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(xf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return xf(this._table,i*this._tableRange+this._minPos,!0)}}const dA="label";function PT(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function j3(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function gA(n,t){n.labels=t}function mA(n,t,e=dA){const i=[];n.datasets=t.map(r=>{const o=n.datasets.find(c=>c[e]===r[e]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function U3(n,t=dA){const e={labels:[],datasets:[]};return gA(e,n.labels),mA(e,n.datasets,t),e}function B3(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:c,data:h,options:f,plugins:g=[],fallbackContent:y,updateMode:_,...x}=n,w=lt.useRef(null),k=lt.useRef(null),R=()=>{w.current&&(k.current=new Vd(w.current,{type:c,data:U3(h,o),options:f&&{...f},plugins:g}),PT(t,k.current))},D=()=>{PT(t,null),k.current&&(k.current.destroy(),k.current=null)};return lt.useEffect(()=>{!r&&k.current&&f&&j3(k.current,f)},[r,f]),lt.useEffect(()=>{!r&&k.current&&gA(k.current.config.data,h.labels)},[r,h.labels]),lt.useEffect(()=>{!r&&k.current&&h.datasets&&mA(k.current.config.data,h.datasets,o)},[r,h.datasets]),lt.useEffect(()=>{k.current&&(r?(D(),setTimeout(R)):k.current.update(_))},[r,f,h.labels,h.datasets,_]),lt.useEffect(()=>{k.current&&(D(),setTimeout(R))},[c]),lt.useEffect(()=>(R(),()=>D()),[]),E.jsx("canvas",{ref:w,role:"img",height:e,width:i,...x,children:y})}const H3=lt.forwardRef(B3);function F3(n,t){return Vd.register(t),lt.forwardRef((e,i)=>E.jsx(H3,{...e,ref:i,type:n}))}const q3=F3("line",C5);Vd.register(D3,z3,$V,Pd,v3,R3,_3,f3);const G3=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyAvBYzH_B2CY7e5tqJkHqj83hT62POyVT4",authDomain:"tracker-7953b.firebaseapp.com",projectId:"tracker-7953b",storageBucket:"tracker-7953b.firebasestorage.app",messagingSenderId:"277129788312",appId:"1:277129788312:web:ed28693354f33d1d6609ed"},pA=QT(G3),Ya=lN(pA),Xe=aO(pA),sn=typeof __app_id<"u"?__app_id:"default-app-id",ud={blue:{label:"Blue",primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-blue-600/20",secondary:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",border:"border-blue-200 dark:border-blue-800",text:"text-blue-600 dark:text-blue-400",ring:"focus:ring-blue-500",chartLine:"#2563EB",chartFill:"rgba(37, 99, 235, 0.1)",chartPoint:"#2563EB",activeNav:"bg-blue-50 dark:bg-blue-900/20 border-blue-500 ring-1 ring-blue-500 dark:border-blue-500",activeNavText:"text-blue-700 dark:text-blue-400"},purple:{label:"Purple",primary:"bg-purple-600 hover:bg-purple-700 text-white shadow-purple-600/20",secondary:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400",border:"border-purple-200 dark:border-purple-800",text:"text-purple-600 dark:text-purple-400",ring:"focus:ring-purple-500",chartLine:"#9333EA",chartFill:"rgba(147, 51, 234, 0.1)",chartPoint:"#9333EA",activeNav:"bg-purple-50 dark:bg-purple-900/20 border-purple-500 ring-1 ring-purple-500 dark:border-purple-500",activeNavText:"text-purple-700 dark:text-purple-400"},emerald:{label:"Emerald",primary:"bg-emerald-600 hover:bg-emerald-700 text-white shadow-emerald-600/20",secondary:"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400",border:"border-emerald-200 dark:border-emerald-800",text:"text-emerald-600 dark:text-emerald-400",ring:"focus:ring-emerald-500",chartLine:"#059669",chartFill:"rgba(5, 150, 105, 0.1)",chartPoint:"#059669",activeNav:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-500 ring-1 ring-emerald-500 dark:border-emerald-500",activeNavText:"text-emerald-700 dark:text-emerald-400"},amber:{label:"Amber",primary:"bg-amber-500 hover:bg-amber-600 text-white shadow-amber-500/20",secondary:"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400",border:"border-amber-200 dark:border-amber-800",text:"text-amber-600 dark:text-amber-400",ring:"focus:ring-amber-500",chartLine:"#D97706",chartFill:"rgba(217, 119, 6, 0.1)",chartPoint:"#D97706",activeNav:"bg-amber-50 dark:bg-amber-900/20 border-amber-500 ring-1 ring-amber-500 dark:border-amber-500",activeNavText:"text-amber-700 dark:text-amber-400"},rose:{label:"Rose",primary:"bg-rose-600 hover:bg-rose-700 text-white shadow-rose-600/20",secondary:"bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400",border:"border-rose-200 dark:border-rose-800",text:"text-rose-600 dark:text-rose-400",ring:"focus:ring-rose-500",chartLine:"#E11D48",chartFill:"rgba(225, 29, 72, 0.1)",chartPoint:"#E11D48",activeNav:"bg-rose-50 dark:bg-rose-900/20 border-rose-500 ring-1 ring-rose-500 dark:border-rose-500",activeNavText:"text-rose-700 dark:text-rose-400"},indigo:{label:"Indigo",primary:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-indigo-600/20",secondary:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400",border:"border-indigo-200 dark:border-indigo-800",text:"text-indigo-600 dark:text-indigo-400",ring:"focus:ring-indigo-500",chartLine:"#4F46E5",chartFill:"rgba(79, 70, 229, 0.1)",chartPoint:"#4F46E5",activeNav:"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-500 ring-1 ring-indigo-500 dark:border-indigo-500",activeNavText:"text-indigo-700 dark:text-indigo-400"}},Hr=[{name:"Red",class:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/40 dark:text-red-300 dark:border-red-800",dot:"bg-red-500"},{name:"Green",class:"bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/40 dark:text-emerald-300 dark:border-emerald-800",dot:"bg-emerald-500"},{name:"Blue",class:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/40 dark:text-blue-300 dark:border-blue-800",dot:"bg-blue-500"},{name:"Yellow",class:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/40 dark:text-yellow-300 dark:border-yellow-800",dot:"bg-yellow-500"},{name:"Purple",class:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/40 dark:text-purple-300 dark:border-purple-800",dot:"bg-purple-500"},{name:"Orange",class:"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/40 dark:text-orange-300 dark:border-orange-800",dot:"bg-orange-500"},{name:"Pink",class:"bg-pink-100 text-pink-800 border-pink-200 dark:bg-pink-900/40 dark:text-pink-300 dark:border-pink-800",dot:"bg-pink-500"},{name:"Indigo",class:"bg-indigo-100 text-indigo-800 border-indigo-200 dark:bg-indigo-900/40 dark:text-indigo-300 dark:border-indigo-800",dot:"bg-indigo-500"}],yA=n=>{if(!n||n.length===0)return Hr[0];const t=new Set(n.map(i=>i.colorClass)),e=Hr.filter(i=>!t.has(i.class));return e.length>0?e[0]:Hr[Math.floor(Math.random()*Hr.length)]},_A=n=>new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric"}),Fn=n=>{if(!n)return"";const t=new Date(n);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},bA=(n,t)=>{const e=new Date(n,t,1);return{daysInMonth:new Date(n,t+1,0).getDate(),startDay:e.getDay()}},$3=(n,t="average")=>{if(!n||n.length===0)return 0;const e=n.map(Number).filter(i=>!isNaN(i));return e.length===0?0:t==="sum"?e.reduce((i,r)=>i+r,0):e.reduce((i,r)=>i+r,0)/e.length},vA=(n,t)=>{if(!t||!n||n.length===0)return{streak:0,lastDate:null};const e=[...new Set(n)].sort((c,h)=>new Date(h)-new Date(c));if(e.length===0)return{streak:0,lastDate:null};let i=null,r=0;for(let c=0;c<e.length;c++){const h=e[c];if(i===null)r=1,i=h;else if((new Date(i).getTime()-new Date(h).getTime())/864e5===1)r++,i=h;else break}return(new Date(Fn(new Date)).getTime()-new Date(e[0]).getTime())/(1e3*3600*24)>1?{streak:0,lastDate:e[0]}:{streak:r,lastDate:e[0]}},Y3=n=>new Promise(t=>{const e=new FileReader;e.onload=i=>{const r=new Image;r.onload=()=>{const o=document.createElement("canvas");let{width:c,height:h}=r;const f=256;c>h?c>f&&(h*=f/c,c=f):h>f&&(c*=f/h,h=f),o.width=c,o.height=h,o.getContext("2d").drawImage(r,0,0,c,h),t(o.toDataURL("image/jpeg",.7))},r.src=i.target.result},e.readAsDataURL(n)}),cy=({isOpen:n,onClose:t,title:e,children:i,isAmoled:r})=>n?E.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 ${r?"bg-black/80":"bg-zinc-900/60 backdrop-blur-sm"}`,onClick:t,children:E.jsxs("div",{className:`rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col max-h-[90vh] ${r?"bg-black border border-zinc-800":"bg-white dark:bg-zinc-800"}`,onClick:o=>o.stopPropagation(),children:[E.jsxs("div",{className:`p-6 flex justify-between items-center border-b ${r?"border-zinc-800":"border-zinc-200 dark:border-zinc-700"}`,children:[E.jsx("h2",{className:"text-xl font-bold dark:text-white",children:e}),E.jsx("button",{onClick:t,children:E.jsx(nd,{className:"w-5 h-5 text-zinc-500"})})]}),E.jsx("div",{className:"p-6 space-y-6 overflow-y-auto",children:i})]})}):null,Tf=({value:n,onChange:t,options:e,theme:i,isAmoled:r,disabled:o=!1})=>{const[c,h]=lt.useState(!1),f=lt.useRef(null),g=e.find(_=>_.value===n)||e[0];lt.useEffect(()=>{const _=x=>{f.current&&!f.current.contains(x.target)&&h(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const y=_=>{t({target:{value:_}}),h(!1)};return E.jsxs("div",{className:`relative ${o?"opacity-50 pointer-events-none":""}`,ref:f,children:[E.jsxs("button",{type:"button",onClick:()=>h(!c),className:`w-full px-4 py-2.5 rounded-xl border flex items-center justify-between transition-all ${c?`${r?"border-zinc-700 bg-zinc-900":"border-zinc-300 bg-white dark:bg-zinc-800"}`:`${r?"border-zinc-800 bg-zinc-900":"border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-900"}`}`,children:[E.jsx("span",{className:"text-sm font-medium dark:text-white truncate",children:g?.label}),E.jsx(NO,{className:`w-4 h-4 text-zinc-500 transition-transform ${c?"rotate-180":""}`})]}),c&&E.jsx("div",{className:`absolute left-0 right-0 top-full mt-2 rounded-xl border shadow-xl z-50 overflow-hidden max-h-60 overflow-y-auto ${r?"bg-black border-zinc-800":"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700"}`,children:E.jsx("div",{className:"p-1.5 space-y-0.5",children:e.map(_=>E.jsxs("button",{onClick:()=>y(_.value),className:`w-full text-left px-3 py-2 text-sm rounded-lg flex items-center justify-between transition-colors ${_.value===n?`${r?"bg-zinc-900 text-white":"bg-zinc-100 dark:bg-zinc-700 text-zinc-900 dark:text-white"}`:"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-900"}`,children:[_.label,_.value===n&&E.jsx(gs,{className:"w-3.5 h-3.5 opacity-70"})]},_.value))})})]})},K3=({system:n,value:t,onChange:e})=>{const[i,r]=lt.useState(null),o=parseInt(t)||0,c=n==="colors"?[1,2,3]:[1,2,3,4,5];return E.jsx("div",{className:"flex justify-between px-2",onMouseLeave:()=>r(null),children:c.map(h=>{let f,g;return n==="colors"?(f=o===h,h===1?g="bg-red-500 border-red-600":h===2?g="bg-yellow-500 border-yellow-600":g="bg-green-500 border-green-600"):(f=(i!==null?i:o)>=h,g="fill-amber-400 text-amber-400"),E.jsx("button",{onClick:()=>e(String(h)),onMouseEnter:()=>n==="stars"&&r(h),className:`p-1 rounded-full transition-transform active:scale-90 ${f?"scale-110":"opacity-30 hover:opacity-100"}`,type:"button",children:n==="colors"?E.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${f?g:"border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800"}`}):E.jsx(c4,{className:`w-8 h-8 ${f?g:"text-zinc-300 dark:text-zinc-600"}`})},h)})})},Q3=({value:n,onChange:t,theme:e,isAmoled:i})=>{const[r,o]=lt.useState(new Date(n||new Date)),{daysInMonth:c,startDay:h}=lt.useMemo(()=>bA(r.getFullYear(),r.getMonth()),[r]);lt.useEffect(()=>{n&&o(new Date(n))},[n]);const f=(y,_)=>{_.preventDefault();const x=new Date(r);x.setMonth(x.getMonth()+y),o(x)},g=[];for(let y=0;y<h;y++)g.push(E.jsx("div",{className:"h-8 md:h-10"},`empty-${y}`));for(let y=1;y<=c;y++){const _=new Date(r.getFullYear(),r.getMonth(),y),x=Fn(_)===n;g.push(E.jsx("button",{onClick:w=>{w.preventDefault(),t(Fn(_))},className:`h-8 md:h-10 w-full rounded-lg text-sm font-medium transition-all duration-200 active:scale-95 ${x?`${e.primary} shadow-md`:"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:y},y))}return E.jsxs("div",{className:`border rounded-xl p-4 ${i?"border-zinc-800 bg-zinc-900":"border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-900/50"}`,children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("span",{className:"font-bold text-zinc-800 dark:text-white",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),E.jsxs("div",{className:"flex space-x-1",children:[E.jsx("button",{onClick:y=>f(-1,y),className:"p-1.5 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-lg text-zinc-500",children:E.jsx(_S,{className:"w-4 h-4"})}),E.jsx("button",{onClick:y=>f(1,y),className:"p-1.5 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-lg text-zinc-500",children:E.jsx(Q0,{className:"w-4 h-4"})})]})]}),E.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Su","Mo","Tu","We","Th","Fr","Sa"].map(y=>E.jsx("div",{className:"text-center text-xs font-semibold text-zinc-400 mb-1",children:y},y)),g]})]})},X3=({aggregates:n,tracker:t,theme:e,isAmoled:i})=>{const r=n.length,o=n[n.length-1],{streak:c}=lt.useMemo(()=>vA(n.map(g=>g.date),t.enableStreak),[n,t.enableStreak]);let h=null;if(t.goalDirection==="target"&&t.targetValue&&o){const g=Math.abs(o.value-t.targetValue);h=g===0?"Target Hit":`${g.toFixed(1)} off`}const f=`p-4 rounded-xl shadow-sm border ${i?"bg-black border-zinc-800":"bg-white dark:bg-zinc-800 border-zinc-100 dark:border-zinc-700"}`;return E.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 animate-in slide-in-from-bottom-2 duration-500 delay-100",children:[E.jsxs("div",{className:f,children:[E.jsxs("p",{className:"text-sm text-zinc-500 mb-1 flex items-center",children:[E.jsx(K0,{className:`w-4 h-4 mr-1 ${e.text}`})," Total Days"]}),E.jsx("p",{className:"text-2xl font-bold dark:text-white",children:r})]}),E.jsxs("div",{className:f,children:[E.jsx("p",{className:"text-sm text-zinc-500 mb-1",children:"Latest Value"}),E.jsx("p",{className:"text-2xl font-bold dark:text-white",children:o?E.jsxs(E.Fragment,{children:[o.value.toFixed(t.type==="numeric"?1:0),E.jsx("span",{className:"text-sm font-normal text-zinc-400 ml-1",children:t.unit})]}):"-"})]}),E.jsxs("div",{className:f,children:[E.jsxs("p",{className:"text-sm text-zinc-500 mb-1 flex items-center",children:[E.jsx(d4,{className:"w-4 h-4 mr-1 text-green-500"})," Goal"]}),t.goalDirection==="target"?E.jsxs("div",{children:[E.jsx("p",{className:"text-2xl font-bold dark:text-white",children:h||t.targetValue}),E.jsxs("p",{className:"text-xs text-zinc-400",children:["Target: ",t.targetValue," ",t.unit]})]}):E.jsx("p",{className:"text-2xl font-bold dark:text-white capitalize",children:t.goalDirection==="none"?"No Set Goal":t.goalDirection})]}),E.jsxs("div",{className:f,children:[E.jsxs("p",{className:"text-sm text-zinc-500 mb-1 flex items-center",children:[E.jsx(bS,{className:"w-4 h-4 mr-1 text-amber-500"})," Streak"]}),E.jsx("p",{className:"text-2xl font-bold dark:text-white",children:t.enableStreak?`${c} Day${c===1?"":"s"}`:"Disabled"})]})]})},W3=({dailyAggregates:n,onDayClick:t,tracker:e,theme:i,isAmoled:r})=>{const[o,c]=lt.useState(new Date),{daysInMonth:h,startDay:f}=lt.useMemo(()=>bA(o.getFullYear(),o.getMonth()),[o]),g=lt.useMemo(()=>[...n].sort((_,x)=>new Date(_.date)-new Date(x.date)),[n]),y=[];for(let _=0;_<f;_++)y.push(E.jsx("div",{className:`h-20 md:h-24 rounded-xl ${r?"bg-zinc-900/30":"bg-zinc-50/50 dark:bg-zinc-900/30"}`},`empty-${_}`));for(let _=1;_<=h;_++){const x=Fn(new Date(o.getFullYear(),o.getMonth(),_)),w=n.find(D=>D.date===x);let k=`${i.secondary} ${i.border}`;if(w&&e.goalDirection!=="none"){const D=w.value,U=e.tolerance||0,W=g[g.findIndex(at=>at.date===x)-1];let J=null;if(e.goalDirection==="target"&&e.targetValue){const at=Math.abs(D-e.targetValue);at<=U||W&&at<Math.abs(W.value-e.targetValue)?J=!0:J=!1}else W&&(e.goalDirection==="increase"?J=D>W.value:e.goalDirection==="decrease"&&(J=D<W.value));J===!0&&(k=`border-emerald-200 dark:border-emerald-800 ${r?"bg-emerald-900/40":"bg-emerald-50 dark:bg-emerald-900/20"}`),J===!1&&(k=`border-red-200 dark:border-red-800 ${r?"bg-red-900/40":"bg-red-50 dark:bg-red-900/20"}`)}const R=k.includes("emerald")?"text-emerald-700 dark:text-emerald-400":k.includes("red")?"text-red-700 dark:text-red-400":"text-zinc-400";y.push(E.jsxs("div",{onClick:()=>t(new Date(o.getFullYear(),o.getMonth(),_)),className:`h-20 md:h-24 border rounded-xl p-1 md:p-2 cursor-pointer transition-all duration-300 hover:scale-[1.02] relative flex flex-col justify-between group hover:shadow-md ${k} ${Fn(new Date)===x?`ring-2 ${i.ring} ring-offset-2 dark:ring-offset-zinc-800`:""}`,children:[E.jsx("span",{className:`text-xs md:text-sm font-medium ${w?R:"text-zinc-400"}`,children:_}),w?E.jsxs("div",{className:"text-right",children:[E.jsx("span",{className:`block text-sm md:text-lg font-bold leading-tight ${w?"dark:text-white":""}`,children:w.value.toFixed(e.type==="numeric"?1:0)}),E.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 uppercase tracking-wider",children:e.unit})]}):E.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute inset-0 flex items-center justify-center text-zinc-300 dark:text-zinc-600",children:E.jsx(ed,{className:"w-6 h-6"})})]},_))}return E.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h3",{className:"text-lg font-bold dark:text-white",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("button",{onClick:()=>c(new Date(o.setMonth(o.getMonth()-1))),className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg text-zinc-600 dark:text-zinc-400",children:E.jsx(_S,{className:"w-5 h-5"})}),E.jsx("button",{onClick:()=>c(new Date(o.setMonth(o.getMonth()+1))),className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg text-zinc-600 dark:text-zinc-400",children:E.jsx(Q0,{className:"w-5 h-5"})})]})]}),E.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(_=>E.jsx("div",{className:"text-center text-xs font-semibold text-zinc-400 uppercase tracking-wide py-2",children:_},_)),y]})]})},Z3=({entries:n,tracker:t,onEntryClick:e,theme:i,isAmoled:r})=>{const o=[...n].sort((c,h)=>new Date(h.date)-new Date(c.date)).slice(0,10);return o.length===0?null:E.jsxs("div",{className:`rounded-2xl shadow-sm border overflow-hidden animate-in slide-in-from-bottom-4 duration-500 delay-200 ${r?"bg-black border-zinc-800":"bg-white dark:bg-zinc-800 border-zinc-100 dark:border-zinc-700"}`,children:[E.jsx("div",{className:`p-4 border-b flex items-center justify-between ${r?"border-zinc-800":"border-zinc-100 dark:border-zinc-700"}`,children:E.jsxs("h3",{className:"font-semibold text-zinc-800 dark:text-white flex items-center gap-2",children:[E.jsx(qO,{className:"w-4 h-4 text-zinc-400"})," Recent Entries"]})}),E.jsx("div",{className:`divide-y ${r?"divide-zinc-800":"divide-zinc-100 dark:divide-zinc-700"}`,children:o.map(c=>E.jsxs("div",{onClick:()=>e(c),className:"p-4 flex items-center justify-between hover:bg-zinc-50 dark:hover:bg-zinc-700/50 cursor-pointer transition-colors",children:[E.jsxs("div",{children:[E.jsx("p",{className:"font-medium text-zinc-800 dark:text-white",children:_A(c.date)}),c.note&&E.jsx("p",{className:"text-xs text-zinc-500 truncate max-w-[200px]",children:c.note})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("span",{className:`font-bold ${i.text}`,children:t.type==="boolean"?c.value?"Yes":"No":c.value}),E.jsx("span",{className:"text-xs text-zinc-400 ml-1",children:t.unit})]})]},c.id))})]})},J3=({isAmoled:n})=>{const[t,e]=lt.useState(""),[i,r]=lt.useState(""),[o,c]=lt.useState(!1),[h,f]=lt.useState(""),g=async _=>{_.preventDefault(),c(!0),f("");try{try{await $I(Ya,t,i)}catch(x){if(x.code==="auth/user-not-found"||x.code==="auth/invalid-credential")await GI(Ya,t,i);else throw x}}catch(x){console.error(x),f(x.message.replace("Firebase:","").trim()),c(!1)}},y=async()=>{c(!0);try{await jI(Ya)}catch(_){console.error(_),f("Could not sign in as guest."),c(!1)}};return E.jsx("div",{className:`flex items-center justify-center min-h-screen p-4 ${n?"bg-black text-white":"bg-zinc-50 dark:bg-zinc-900"}`,children:E.jsxs("div",{className:`rounded-2xl shadow-2xl p-8 w-full max-w-md border animate-in fade-in zoom-in-95 duration-300 ${n?"bg-zinc-900 border-zinc-800":"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700"}`,children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg shadow-blue-600/30",children:E.jsx(Hp,{className:"text-white w-8 h-8"})}),E.jsx("h2",{className:"text-3xl font-bold mb-2 dark:text-white",children:"TrackIt"}),E.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Sign in to sync your progress"})]}),E.jsxs("form",{onSubmit:g,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Email"}),E.jsx("input",{type:"email",required:!0,className:`w-full px-4 py-3 rounded-xl outline-none dark:text-white transition-all focus:ring-2 focus:ring-blue-500 ${n?"bg-black border-zinc-800":"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700"}`,value:t,onChange:_=>e(_.target.value),placeholder:"hello@example.com"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Password"}),E.jsx("input",{type:"password",required:!0,className:`w-full px-4 py-3 rounded-xl outline-none dark:text-white transition-all focus:ring-2 focus:ring-blue-500 ${n?"bg-black border-zinc-800":"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700"}`,value:i,onChange:_=>r(_.target.value),placeholder:""})]}),h&&E.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-500 rounded-lg text-sm",children:h}),E.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium shadow-lg shadow-blue-600/20 transition-all transform active:scale-95 disabled:opacity-50 disabled:active:scale-100 flex items-center justify-center",children:o?E.jsx(vS,{className:"w-5 h-5 animate-spin"}):"Continue"})]}),E.jsx("div",{className:"mt-8 text-center",children:E.jsx("button",{type:"button",onClick:y,disabled:o,className:"w-full py-3 mt-4 border-2 border-zinc-300 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300 font-bold rounded-xl hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-all",children:"Or continue as Guest"})})]})})},tP=({isOpen:n,onClose:t,user:e,tags:i,onTagsChange:r,theme:o,onThemeChange:c,currentThemeKey:h,onImport:f,themeMode:g,onThemeModeChange:y,isAmoled:_,avatarUrl:x,onAvatarChange:w})=>{const[k,R]=lt.useState(""),[D,U]=lt.useState(!1),[W,J]=lt.useState(""),[at,st]=lt.useState(null),[ot,I]=lt.useState(""),A=lt.useRef(null),N=lt.useRef(null),[V,M]=lt.useState("upload"),[L,O]=lt.useState("");lt.useEffect(()=>{if(e){const Y=e.isAnonymous?`Guest (${e.uid.slice(0,5)}...)`:"User";J(e.displayName||Y)}},[e,n]);const kt=async()=>{if(!k.trim())return;const Y={id:Date.now(),name:k,colorClass:yA(i).class};r([...i,Y]),R("")},Nt=Y=>r(i.filter(bt=>bt.id!==Y)),q=Y=>{st(Y.id),I(Y.name)},tt=()=>{ot.trim()&&(r(i.map(Y=>Y.id===at?{...Y,name:ot}:Y)),st(null))},pt=Y=>{const bt=i.find(xt=>xt.id===Y);if(!bt)return;const Ut=(Hr.findIndex(xt=>xt.class===bt.colorClass)+1)%Hr.length;r(i.map(xt=>xt.id===Y?{...xt,colorClass:Hr[Ut].class}:xt))},Dt=async()=>{await KI(e,{displayName:W}),U(!1)},At=async()=>{await wE(Ya),t()},z=()=>A.current?.click(),X=Y=>{const bt=Y.target.files[0];if(!bt)return;const Ft=new FileReader;Ft.onload=Ut=>{try{f(JSON.parse(Ut.target.result))}catch{alert("Invalid backup file.")}},Ft.readAsText(bt),Y.target.value=null},ut=async()=>{try{const Y={version:1,timestamp:new Date().toISOString(),settings:{tags:i,theme:h,mode:g},trackers:[]},bt=Up(fl(Xe,"artifacts",sn,"users",e.uid,"trackers")),Ft=await yx(bt);for(const wn of Ft.docs){const Ie={id:wn.id,...wn.data()},In=await yx(fl(Xe,"artifacts",sn,"users",e.uid,"trackers",wn.id,"entries"));Ie.entries=In.docs.map(Ui=>({id:Ui.id,...Ui.data()})),Y.trackers.push(Ie)}const Ut=new Blob([JSON.stringify(Y,null,2)],{type:"application/json"}),xt=URL.createObjectURL(Ut),Re=document.createElement("a");Re.href=xt,Re.download=`trackit-backup-${Fn(new Date)}.json`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)}catch{alert("Failed to export data.")}},ht=async Y=>{const bt=Y.target.files[0];if(bt)try{const Ft=await Y3(bt);w(Ft)}catch(Ft){console.error("Failed to process image",Ft)}},Tt=()=>{L&&w(L)};return E.jsxs(cy,{isOpen:n,onClose:t,title:"Settings",isAmoled:_,children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-3xl shrink-0 overflow-hidden ${_?"bg-zinc-900":"bg-zinc-100 dark:bg-zinc-700"}`,children:x?E.jsx("img",{src:x,alt:"Avatar",className:"w-full h-full object-cover"}):e?.isAnonymous?"":""}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"flex items-center space-x-2 mb-1",children:D?E.jsxs(E.Fragment,{children:[E.jsx("input",{value:W,onChange:Y=>J(Y.target.value),className:"px-3 py-1 rounded bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 dark:text-white flex-1",autoFocus:!0}),E.jsx("button",{onClick:Dt,className:"p-1.5 bg-green-500 text-white rounded hover:bg-green-600",children:E.jsx(gs,{className:"w-4 h-4"})}),E.jsx("button",{onClick:()=>U(!1),className:"p-1.5 bg-zinc-200 dark:bg-zinc-700 text-zinc-500 rounded hover:bg-zinc-300",children:E.jsx(nd,{className:"w-4 h-4"})})]}):E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"font-bold dark:text-white text-lg",children:e?.displayName||(e?.isAnonymous?`Guest (${e?.uid.substring(0,5)}...)`:"User")}),E.jsx("button",{onClick:()=>U(!0),className:"p-1 text-zinc-400 hover:text-blue-500 rounded-full",children:E.jsx(TS,{className:"w-4 h-4"})})]})}),E.jsx("p",{className:"text-sm text-zinc-500",children:e?.email||(e?.isAnonymous?`Guest: ${e?.uid.substring(0,5)}...`:"User Session")})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold mb-3 dark:text-white",children:"Avatar"}),E.jsxs("div",{className:`p-4 rounded-xl border ${_?"border-zinc-800":"border-zinc-200 dark:border-zinc-700"}`,children:[E.jsxs("div",{className:"flex gap-2 mb-4",children:[E.jsx("button",{onClick:()=>M("upload"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-colors ${V==="upload"?o.primary:"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:E.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.jsx(PO,{className:"w-4 h-4"})," Upload"]})}),E.jsx("button",{onClick:()=>M("url"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-colors ${V==="url"?o.primary:"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:E.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.jsx(KO,{className:"w-4 h-4"})," URL"]})})]}),V==="upload"?E.jsxs("div",{className:"text-center",children:[E.jsx("input",{type:"file",ref:N,onChange:ht,accept:"image/*",className:"hidden"}),E.jsxs("button",{onClick:()=>N.current?.click(),className:`w-full py-8 border-2 border-dashed rounded-xl flex flex-col items-center justify-center gap-2 transition-colors ${_?"border-zinc-800 hover:bg-zinc-900":"border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900"}`,children:[E.jsx(vx,{className:"w-6 h-6 text-zinc-400"}),E.jsx("span",{className:"text-sm text-zinc-500",children:"Click to upload image"})]})]}):E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{value:L,onChange:Y=>O(Y.target.value),placeholder:"https://example.com/avatar.png",className:`flex-1 px-3 py-2 text-sm rounded-lg border outline-none ${_?"bg-zinc-900 border-zinc-800 text-white":"bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-700 dark:text-white"}`}),E.jsx("button",{onClick:Tt,className:`px-4 py-2 rounded-lg text-sm font-medium ${o.primary}`,children:"Save"})]})]})]}),E.jsxs("div",{children:[E.jsxs("h3",{className:"font-bold mb-3 dark:text-white flex items-center gap-2",children:[E.jsx(xS,{className:"w-4 h-4 text-zinc-400"})," Theme Mode"]}),E.jsx("div",{className:`flex rounded-lg p-1 ${_?"bg-zinc-900":"bg-zinc-100 dark:bg-zinc-700"}`,children:["light","dark","amoled"].map(Y=>E.jsx("button",{onClick:()=>y(Y),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all capitalize ${g===Y?"bg-white dark:bg-zinc-600 shadow text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"}`,children:Y==="amoled"?"True Dark":Y},Y))})]}),E.jsxs("div",{children:[E.jsxs("h3",{className:"font-bold mb-3 dark:text-white flex items-center gap-2",children:[E.jsx(e4,{className:"w-4 h-4 text-zinc-400"})," Accent Color"]}),E.jsx("div",{className:"grid grid-cols-6 gap-2",children:Object.keys(ud).map(Y=>{const bt=ud[Y],Ft=bt.primary.split(" ")[0];return E.jsx("button",{onClick:()=>c(Y),className:`h-10 rounded-full ${Ft} transition-transform hover:scale-110 flex items-center justify-center shadow-sm ${h===Y?"ring-2 ring-offset-2 ring-zinc-400 dark:ring-offset-zinc-800":""}`,title:bt.label,children:h===Y&&E.jsx(gs,{className:"w-4 h-4 text-white"})},Y)})})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold mb-3 dark:text-white",children:"Manage Tags"}),E.jsxs("div",{className:"flex gap-2 mb-3",children:[E.jsx("input",{value:k,onChange:Y=>R(Y.target.value),placeholder:"New Tag Name",className:`flex-1 px-3 py-1.5 text-sm rounded-lg border dark:text-white ${_?"bg-zinc-900 border-zinc-800":"dark:bg-zinc-900 dark:border-zinc-700"}`,onKeyDown:Y=>Y.key==="Enter"&&kt()}),E.jsx("button",{onClick:kt,disabled:!k.trim(),className:"text-sm bg-zinc-100 dark:bg-zinc-700 hover:bg-zinc-200 px-3 py-1.5 rounded-lg font-medium transition-colors dark:text-white",children:"Add"})]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(Y=>at===Y.id?E.jsxs("div",{className:`flex items-center gap-1 border rounded-lg p-1 ${_?"bg-zinc-900 border-zinc-800":"bg-white dark:bg-zinc-800"}`,children:[E.jsx("input",{value:ot,onChange:bt=>I(bt.target.value),className:"w-24 text-sm px-1 outline-none dark:bg-zinc-800 bg-transparent dark:text-white",autoFocus:!0}),E.jsx("button",{onClick:()=>pt(Y.id),className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-full",children:E.jsx("div",{className:`w-4 h-4 rounded-full ${Hr.find(bt=>bt.class===Y.colorClass)?.dot||"bg-zinc-400"}`})}),E.jsx("button",{onClick:tt,className:"p-1 text-green-500 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded",children:E.jsx(gs,{className:"w-3 h-3"})})]},Y.id):E.jsxs("span",{className:`${Y.colorClass} pl-3 pr-2 py-1 rounded-full text-sm flex items-center border cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>q(Y),children:[Y.name,E.jsx("button",{className:"ml-2 p-0.5 hover:bg-black/10 rounded-full",onClick:bt=>{bt.stopPropagation(),Nt(Y.id)},children:E.jsx(nd,{className:"w-3 h-3"})})]},Y.id))})]}),E.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[E.jsx("h3",{className:"font-bold mb-3 dark:text-white",children:"Data Management"}),E.jsxs("div",{className:"flex gap-4",children:[E.jsxs("button",{onClick:ut,className:"flex-1 flex flex-col items-center justify-center p-4 rounded-xl border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors group",children:[E.jsx(zO,{className:`w-6 h-6 mb-2 ${o.text}`}),E.jsx("span",{className:"text-sm font-medium dark:text-white",children:"Export Data"})]}),E.jsxs("button",{onClick:z,className:"flex-1 flex flex-col items-center justify-center p-4 rounded-xl border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors group",children:[E.jsx(vx,{className:`w-6 h-6 mb-2 ${o.text}`}),E.jsx("span",{className:"text-sm font-medium dark:text-white",children:"Import Data"})]}),E.jsx("input",{type:"file",ref:A,onChange:X,accept:".json",className:"hidden"})]})]}),E.jsxs("button",{onClick:At,className:"w-full py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors font-medium flex items-center justify-center",children:[E.jsx(WO,{className:"w-4 h-4 mr-2"})," Sign Out"]})]})},eP=({isOpen:n,onClose:t,user:e,editTracker:i=null,availableTags:r,onTagsChange:o,theme:c,isAmoled:h,nextOrder:f=0})=>{const[g,y]=lt.useState(""),[_,x]=lt.useState("numeric"),[w,k]=lt.useState(""),[R,D]=lt.useState("stars"),[U,W]=lt.useState("increase"),[J,at]=lt.useState(""),[st,ot]=lt.useState(""),[I,A]=lt.useState(!1),[N,V]=lt.useState("graph"),[M,L]=lt.useState([]),[O,kt]=lt.useState(!0),[Nt,q]=lt.useState(!1),[tt,pt]=lt.useState(""),[Dt,At]=lt.useState("average"),[z,X]=lt.useState("none"),[ut,ht]=lt.useState(!1);lt.useEffect(()=>{i?(y(i.name),x(i.type),k(i.unit||""),D(i.ratingSystem||"stars"),W(i.goalDirection||"none"),at(i.targetValue||""),ot(i.tolerance||""),V(i.preferredView||"graph"),L(i.tags||[]),kt(i.enableStreak!==void 0?i.enableStreak:!0),At(i.aggregation||"average"),X(i.listDisplayValue||"none"),ht(i.showTypeInList!==void 0?i.showTypeInList:!1),A(!0),q(!1)):(y(""),x("numeric"),k(""),W("increase"),at(""),ot(""),V("graph"),L([]),kt(!0),At("average"),X("none"),ht(!1),A(!1),q(!1))},[i,n]);const Tt=xt=>{M.some(Re=>Re.id===xt.id)?L(M.filter(Re=>Re.id!==xt.id)):L([...M,xt])},Y=()=>{if(!tt.trim())return;const xt={id:Date.now(),name:tt,colorClass:yA(r).class};o([...r,xt]),L([...M,xt]),pt("")},bt=async()=>{if(!g.trim())return;const xt={name:g,type:_,unit:_==="numeric"?w:null,ratingSystem:_==="rating"?R:null,goalDirection:U,targetValue:U==="target"&&J?parseFloat(J):null,tolerance:st?parseFloat(st):0,preferredView:N,tags:M,enableStreak:O,aggregation:Dt,listDisplayValue:z,showTypeInList:ut,updatedAt:Bp()};i?await Y0(ei(Xe,"artifacts",sn,"users",e.uid,"trackers",i.id),xt):await mS(fl(Xe,"artifacts",sn,"users",e.uid,"trackers"),{...xt,order:f,createdAt:Bp()}),t()},Ft=async()=>{if(i)try{await gS(ei(Xe,"artifacts",sn,"users",e.uid,"trackers",i.id)),t()}catch(xt){console.error("Error deleting tracker",xt)}},Ut=`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 dark:text-white ${h?"bg-zinc-900 border-zinc-800":"bg-zinc-50 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-700"} ${c.ring}`;return E.jsxs(cy,{isOpen:n,onClose:t,title:i?"Edit Tracker":"New Tracker",isAmoled:h,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Name"}),E.jsx("input",{value:g,onChange:xt=>y(xt.target.value),className:Ut,placeholder:"e.g. Water Intake, Meditation"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Type"}),E.jsx(Tf,{value:_,onChange:xt=>x(xt.target.value),options:[{value:"numeric",label:"Numeric"},{value:"boolean",label:"Yes / No"},{value:"rating",label:"Rating"}],theme:c,isAmoled:h,disabled:!!i})]}),_==="numeric"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Units"}),E.jsx("input",{value:w,onChange:xt=>k(xt.target.value),className:Ut,placeholder:"e.g. ml, pages, km"})]}),_==="rating"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"System"}),E.jsx(Tf,{value:R,onChange:xt=>D(xt.target.value),options:[{value:"stars",label:"5 Stars"},{value:"colors",label:"Traffic Lights"}],theme:c,isAmoled:h})]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Goal Direction"}),E.jsx(Tf,{value:U,onChange:xt=>W(xt.target.value),options:[{value:"increase",label:"Increase"},{value:"decrease",label:"Decrease"},{value:"target",label:"Target Value"},{value:"none",label:"None"}],theme:c,isAmoled:h})]}),U==="target"&&_!=="boolean"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Target Value"}),E.jsx("input",{type:"number",value:J,onChange:xt=>at(xt.target.value),className:Ut,placeholder:"2000"})]})]}),E.jsxs("div",{className:`border rounded-xl overflow-hidden ${h?"border-zinc-800":"border-zinc-200 dark:border-zinc-700"}`,children:[E.jsxs("button",{onClick:()=>A(!I),className:`w-full flex justify-between items-center p-4 font-medium ${h?"bg-zinc-900 text-zinc-300":"bg-zinc-50 dark:bg-zinc-900 text-zinc-700 dark:text-zinc-300"}`,children:["Advanced Settings ",E.jsx(Q0,{className:`w-4 h-4 transition-transform ${I?"rotate-90":""}`})]}),I&&E.jsxs("div",{className:`p-4 space-y-6 animate-in slide-in-from-top-2 duration-300 ${h?"bg-black":"bg-white dark:bg-zinc-800"}`,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"List Display Value"}),E.jsx(Tf,{value:z,onChange:xt=>X(xt.target.value),options:[{value:"none",label:"None (Hidden)"},{value:"last",label:"Last Inputted Value"},{value:"average",label:"Average of All Entries"}],theme:c,isAmoled:h})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex items-center gap-2",children:E.jsx("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Show Type in List"})}),E.jsx("button",{onClick:()=>ht(!ut),className:`w-12 h-6 rounded-full transition-colors relative ${ut?"bg-blue-500":"bg-zinc-300 dark:bg-zinc-600"}`,children:E.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-transform ${ut?"left-7":"left-1"}`})})]}),E.jsx("div",{className:"h-px bg-zinc-100 dark:bg-zinc-700 my-2"}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Daily Aggregation"}),E.jsxs("div",{className:`flex rounded-lg p-1 ${h?"bg-zinc-900":"bg-zinc-100 dark:bg-zinc-700"}`,children:[E.jsx("button",{onClick:()=>At("average"),className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${Dt==="average"?"bg-white dark:bg-zinc-600 shadow text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"}`,children:"Average"}),E.jsx("button",{onClick:()=>At("sum"),className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${Dt==="sum"?"bg-white dark:bg-zinc-600 shadow text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"}`,children:"Total (Sum)"})]})]}),_==="numeric"&&U==="target"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Goal Tolerance (+/-)"}),E.jsx("input",{type:"number",value:st,onChange:xt=>ot(xt.target.value),className:Ut,placeholder:"0"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"flex justify-between items-end mb-3",children:E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Assign Tags"})}),E.jsxs("div",{className:"flex gap-2 mb-3",children:[E.jsx("input",{value:tt,onChange:xt=>pt(xt.target.value),placeholder:"Create new tag...",className:`flex-1 px-3 py-1.5 text-sm rounded-lg border dark:text-white ${h?"bg-zinc-900 border-zinc-800":"dark:bg-zinc-900 dark:border-zinc-700"}`,onKeyDown:xt=>xt.key==="Enter"&&Y()}),E.jsx("button",{onClick:Y,disabled:!tt.trim(),className:"text-sm bg-zinc-100 dark:bg-zinc-700 hover:bg-zinc-200 px-3 py-1.5 rounded-lg font-medium transition-colors dark:text-white",children:"Add"})]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(xt=>{const Re=M.some(wn=>wn.id===xt.id);return E.jsx("button",{onClick:()=>Tt(xt),className:`px-3 py-1 rounded-full text-sm border transition-all ${xt.colorClass} ${Re?"opacity-100 font-semibold shadow-sm scale-105":"opacity-40 hover:opacity-100 grayscale hover:grayscale-0"}`,children:xt.name},xt.id)})})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex items-center gap-2",children:E.jsx("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Track Streak"})}),E.jsx("button",{onClick:()=>kt(!O),className:`w-12 h-6 rounded-full transition-colors relative ${O?"bg-green-500":"bg-zinc-300 dark:bg-zinc-600"}`,children:E.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-transform ${O?"left-7":"left-1"}`})})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-3 text-center",children:"Preferred View"}),E.jsxs("div",{className:"flex justify-center space-x-6",children:[E.jsxs("button",{onClick:()=>V("graph"),className:`w-32 h-32 p-4 rounded-xl border-2 flex flex-col items-center justify-center space-y-2 transition-all hover:scale-105 ${N==="graph"?`${c.border} ${c.secondary} ${c.text} shadow-md`:"border-zinc-200 dark:border-zinc-700 text-zinc-400 hover:border-zinc-300"}`,children:[E.jsx(K0,{className:"w-10 h-10"}),E.jsx("span",{className:"font-medium",children:"Graph"})]}),E.jsxs("button",{onClick:()=>V("calendar"),className:`w-32 h-32 p-4 rounded-xl border-2 flex flex-col items-center justify-center space-y-2 transition-all hover:scale-105 ${N==="calendar"?`${c.border} ${c.secondary} ${c.text} shadow-md`:"border-zinc-200 dark:border-zinc-700 text-zinc-400 hover:border-zinc-300"}`,children:[E.jsx(yS,{className:"w-10 h-10"}),E.jsx("span",{className:"font-medium",children:"Calendar"})]})]})]})]})]}),E.jsxs("div",{className:"flex gap-3",children:[i&&(Nt?E.jsxs("div",{className:"flex-1 flex gap-2 animate-in fade-in slide-in-from-right duration-200",children:[E.jsx("button",{onClick:()=>q(!1),className:"flex-1 py-3 bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-xl font-medium",children:"Cancel"}),E.jsx("button",{onClick:Ft,className:"flex-1 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium shadow-lg shadow-red-600/20",children:"Confirm"})]}):E.jsx("button",{onClick:()=>q(!0),className:"px-4 py-3 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 rounded-xl font-medium transition-colors",children:E.jsx(ES,{className:"w-5 h-5"})})),E.jsx("button",{onClick:bt,disabled:!g.trim(),className:`flex-1 py-3 rounded-xl font-medium shadow-lg transition-all active:scale-95 hover:scale-105 disabled:opacity-50 disabled:scale-100 ${c.primary}`,children:i?"Save Changes":"Create Tracker"})]})]})},LT=({entry:n,tracker:t,theme:e,isAmoled:i,onSave:r,onDelete:o,onCancel:c})=>{const[h,f]=lt.useState(n.value!==void 0?String(n.value):""),[g,y]=lt.useState(n.note||""),_=()=>{if(!h)return;let w;t.type==="numeric"?w=parseFloat(h):t.type==="boolean"?w=h==="true":w=parseInt(h),r({...n,value:w,note:g})},x=`w-full px-3 py-1.5 text-sm rounded-lg border focus:outline-none focus:ring-2 dark:text-white ${i?"bg-zinc-900 border-zinc-800":"bg-zinc-50 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-700"} ${e.ring}`;return E.jsx("div",{className:`p-3 rounded-xl border ${i?"border-zinc-700 bg-zinc-900":"border-zinc-300 bg-white dark:bg-zinc-800"} animate-in fade-in zoom-in-95 duration-200`,children:E.jsxs("div",{className:"space-y-3",children:[E.jsx("div",{className:"flex items-center gap-3",children:E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase mb-1 block",children:"Value"}),t.type==="numeric"?E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("input",{type:"number",value:h,onChange:w=>f(w.target.value),className:x,autoFocus:!0,placeholder:"0"}),E.jsx("span",{className:"text-sm text-zinc-500",children:t.unit})]}):t.type==="boolean"?E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>f("true"),className:`flex-1 py-1.5 text-sm rounded-lg border ${h==="true"?"bg-green-500 text-white border-green-600":"border-zinc-200 dark:border-zinc-700"}`,children:"Yes"}),E.jsx("button",{onClick:()=>f("false"),className:`flex-1 py-1.5 text-sm rounded-lg border ${h==="false"?"bg-red-500 text-white border-red-600":"border-zinc-200 dark:border-zinc-700"}`,children:"No"})]}):E.jsx(K3,{system:t.ratingSystem,value:h,onChange:f})]})}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase mb-1 block",children:"Note"}),E.jsx("textarea",{value:g,onChange:w=>y(w.target.value),className:x,rows:2,placeholder:"Optional note..."})]}),E.jsxs("div",{className:"flex gap-2 justify-end",children:[o&&E.jsx("button",{onClick:o,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:E.jsx(ES,{className:"w-4 h-4"})}),E.jsx("button",{onClick:c,className:"px-3 py-1.5 text-sm font-medium text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg",children:"Cancel"}),E.jsxs("button",{onClick:_,disabled:!h,className:`px-4 py-1.5 text-sm font-medium text-white rounded-lg shadow-sm ${e.primary} disabled:opacity-50`,children:[E.jsx(r4,{className:"w-4 h-4 inline mr-1"})," Save"]})]})]})})},nP=({isOpen:n,onClose:t,user:e,tracker:i,existingEntry:r,theme:o,isAmoled:c,allEntries:h=[]})=>{const[f,g]=lt.useState(Fn(new Date)),[y,_]=lt.useState(null);lt.useEffect(()=>{r?(g(Fn(r.date)),r.isNew?_("new"):_(r.id)):n&&(g(Fn(new Date)),_(null))},[r,n]);const x=lt.useMemo(()=>h.filter(R=>Fn(R.date)===f).sort((R,D)=>D.timestamp-R.timestamp),[h,f]),w=async R=>{const D={value:R.value,note:R.note,date:f};R.id&&R.id!=="new"?await Y0(ei(Xe,"artifacts",sn,"users",e.uid,"trackers",i.id,"entries",R.id),D):await mS(fl(Xe,"artifacts",sn,"users",e.uid,"trackers",i.id,"entries"),{...D,timestamp:Bp()}),_(null)},k=async R=>{R&&R!=="new"&&await gS(ei(Xe,"artifacts",sn,"users",e.uid,"trackers",i.id,"entries",R)),_(null)};return!n||!i?null:E.jsxs(cy,{isOpen:n,onClose:t,title:`Entries for ${i.name}`,isAmoled:c,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Date"}),E.jsx(Q3,{value:f,onChange:R=>{g(R),_(null)},theme:o,isAmoled:c})]}),E.jsxs("div",{className:"space-y-3",children:[x.length===0&&y!=="new"&&E.jsxs("div",{className:"text-center py-6",children:[E.jsx("p",{className:"text-zinc-400 mb-3",children:"No entries for this day."}),E.jsx("button",{onClick:()=>_("new"),className:`px-4 py-2 rounded-lg font-medium ${o.primary} text-white shadow-lg`,children:"Add Entry"})]}),y==="new"&&E.jsx(LT,{entry:{},tracker:i,theme:o,isAmoled:c,onSave:w,onCancel:()=>_(null)}),x.map(R=>y===R.id?E.jsx(LT,{entry:R,tracker:i,theme:o,isAmoled:c,onSave:w,onDelete:()=>k(R.id),onCancel:()=>_(null)},R.id):E.jsxs("div",{onClick:()=>_(R.id),className:`p-3 rounded-xl border flex justify-between items-center cursor-pointer transition-all hover:shadow-sm ${c?"border-zinc-800 hover:bg-zinc-900":"border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700/50"}`,children:[E.jsx("div",{className:"min-w-0 flex-1 mr-2",children:R.note?E.jsx("p",{className:"text-sm text-zinc-800 dark:text-white truncate",children:R.note}):E.jsx("p",{className:"text-sm text-zinc-400 italic",children:"No note"})}),E.jsx("div",{className:`font-mono font-bold text-lg ${o.text}`,children:i.type==="boolean"?R.value?"Yes":"No":R.value})]},R.id)),x.length>0&&y!=="new"&&E.jsxs("button",{onClick:()=>_("new"),className:"w-full py-3 rounded-xl border-2 border-dashed border-zinc-300 dark:border-zinc-700 text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-200 hover:border-zinc-400 dark:hover:border-zinc-600 transition-colors flex items-center justify-center font-medium",children:[E.jsx(ed,{className:"w-5 h-5 mr-2"})," Add Another Entry"]})]})]})},iP=()=>{const[n,t]=lt.useState(null),[e,i]=lt.useState(!1),[r,o]=lt.useState("dark"),[c,h]=lt.useState("dark"),[f,g]=lt.useState("blue"),y=lt.useMemo(()=>ud[f]||ud.blue,[f]),_=r==="amoled";lt.useEffect(()=>{(async()=>{if(typeof __initial_auth_token<"u"&&__initial_auth_token)try{await qI(Ya,__initial_auth_token)}catch(D){console.error("Custom token sign-in failed",D)}else await wE(Ya)})().then(()=>{const D=WI(Ya,U=>{t(U),i(!0)});return()=>D()})},[]),lt.useEffect(()=>{const R=document.documentElement;R.classList.remove("dark"),(r==="dark"||r==="amoled")&&R.classList.add("dark")},[r]),lt.useEffect(()=>{if(!n)return;const R=Of(ei(Xe,"artifacts",sn,"users",n.uid,"settings","tags"),D=>{if(D.exists()){const U=D.data();U.theme&&g(U.theme),U.mode&&(o(U.mode),(U.mode==="dark"||U.mode==="amoled")&&h(U.mode))}});return()=>R()},[n]);const x=async R=>{o(R),(R==="dark"||R==="amoled")&&h(R),n&&await Mf(ei(Xe,"artifacts",sn,"users",n.uid,"settings","tags"),{mode:R},{merge:!0})},w=async R=>{g(R),n&&await Mf(ei(Xe,"artifacts",sn,"users",n.uid,"settings","tags"),{theme:R},{merge:!0})},k=async R=>{n&&await Mf(ei(Xe,"artifacts",sn,"users",n.uid,"settings","tags"),{list:R,theme:f},{merge:!0})};return e?n?E.jsx(sP,{user:n,theme:y,isAmoled:_,themeMode:r,preferredDark:c,onThemeModeChange:x,onThemeChange:w,onTagsChange:k,accentColor:f}):E.jsx(J3,{isAmoled:_}):E.jsx("div",{className:`h-screen w-full flex items-center justify-center ${_?"bg-black text-white":"bg-zinc-50 dark:bg-zinc-900 dark:text-white"}`,children:E.jsx(vS,{className:"w-10 h-10 animate-spin text-blue-500"})})},sP=({user:n,theme:t,isAmoled:e,themeMode:i,preferredDark:r,onThemeModeChange:o,onThemeChange:c,onTagsChange:h,accentColor:f})=>{const[g,y]=lt.useState([]),[_,x]=lt.useState([]),[w,k]=lt.useState(null),[R,D]=lt.useState(null),[U,W]=lt.useState(!1),[J,at]=lt.useState(!1),[st,ot]=lt.useState(!1),[I,A]=lt.useState(null),[N,V]=lt.useState("graph"),[M,L]=lt.useState([]),[O,kt]=lt.useState(null),[Nt,q]=lt.useState(!1),[tt,pt]=lt.useState("manual"),[Dt,At]=lt.useState(!1),[z,X]=lt.useState({isDragging:!1,itemId:null,draggedItem:null,initialY:0,currentY:0,initialX:0,currentX:0,itemHeight:0,itemWidth:0,placeholderIndex:null,originalIndex:null}),ut=lt.useRef(null),ht=lt.useRef(z);lt.useEffect(()=>{ht.current=z},[z]),lt.useEffect(()=>{const ft=Of(ei(Xe,"artifacts",sn,"users",n.uid,"settings","tags"),dt=>{if(dt.exists()){const ct=dt.data();x(ct.list||[]),D(ct.avatar||null)}});return()=>ft()},[n]);const Tt=async ft=>{await Mf(ei(Xe,"artifacts",sn,"users",n.uid,"settings","tags"),{avatar:ft},{merge:!0})};lt.useEffect(()=>{const ft=Up(fl(Xe,"artifacts",sn,"users",n.uid,"trackers"),gx("createdAt","desc")),dt=Of(ft,ct=>{const Et=ct.docs.map(Mt=>({id:Mt.id,...Mt.data()}));y(Et),Et.length>0&&!w?k(Et[0].id):Et.length===0?k(null):w&&!Et.find(Mt=>Mt.id===w)&&k(Et[0].id)});return()=>dt()},[n,w]),lt.useEffect(()=>{if(!w)return;const ft=Up(fl(Xe,"artifacts",sn,"users",n.uid,"trackers",w,"entries"),gx("date","asc")),dt=Of(ft,ct=>{L(ct.docs.map(Et=>({id:Et.id,...Et.data()})))});return()=>dt()},[n,w]);const Y=lt.useMemo(()=>g.find(ft=>ft.id===w),[g,w]),bt=lt.useMemo(()=>{let ft=[...g];if(tt==="manual")return ft.sort((dt,ct)=>(dt.order??1/0)!==(ct.order??1/0)?(dt.order??1/0)-(ct.order??1/0):ct.createdAt-dt.createdAt),[{title:null,items:ft}];if(tt==="tag"){const dt={},ct=[];ft.forEach(Mt=>{if(Mt.tags&&Mt.tags.length>0){const qt=Mt.tags[0].name;dt[qt]||(dt[qt]=[]),dt[qt].push(Mt)}else ct.push(Mt)});const Et=Object.keys(dt).sort().map(Mt=>({title:Mt,items:dt[Mt]}));return ct.length>0&&Et.push({title:"Uncategorized",items:ct}),Et}if(tt==="goal"){const dt={"Habits (Increase)":[],"Vices (Decrease)":[],Targets:[],None:[]};return ft.forEach(ct=>{ct.goalDirection==="increase"?dt["Habits (Increase)"].push(ct):ct.goalDirection==="decrease"?dt["Vices (Decrease)"].push(ct):ct.goalDirection==="target"?dt.Targets.push(ct):dt.None.push(ct)}),Object.keys(dt).filter(ct=>dt[ct].length>0).map(ct=>({title:ct,items:dt[ct]}))}if(tt==="type"){const dt={Numeric:[],"Yes/No":[],Rating:[]};return ft.forEach(ct=>{ct.type==="numeric"?dt.Numeric.push(ct):ct.type==="boolean"?dt["Yes/No"].push(ct):dt.Rating.push(ct)}),Object.keys(dt).filter(ct=>dt[ct].length>0).map(ct=>({title:ct,items:dt[ct]}))}return tt==="name"?ft.sort((dt,ct)=>dt.name.localeCompare(ct.name)):tt==="streak"&&ft.sort((dt,ct)=>(ct.computedStreak||0)-(dt.computedStreak||0)),[{title:null,items:ft}]},[g,tt]),Ft=lt.useRef(bt);lt.useEffect(()=>{Ft.current=bt},[bt]);const Ut=(ft,dt,ct)=>{if(tt!=="manual")return;ft.preventDefault(),ft.stopPropagation();const Mt=ft.currentTarget.closest(".tracker-item-container").querySelector(".tracker-item").getBoundingClientRect(),qt={isDragging:!0,itemId:dt.id,draggedItem:dt,initialY:ft.clientY,currentY:ft.clientY,initialX:ft.clientX,currentX:ft.clientX,itemHeight:Mt.height,itemWidth:Mt.width,placeholderIndex:ct,originalIndex:ct};X(qt),ht.current=qt,document.addEventListener("pointermove",xt),document.addEventListener("pointerup",Re)},xt=ft=>{const ct=ut.current;if(ct){const qt=ct.getBoundingClientRect();ft.clientY<qt.top+50?ct.scrollTop-=5:ft.clientY>qt.bottom-50&&(ct.scrollTop+=5)}let Et=ht.current.placeholderIndex;if(ut.current){const qt=Array.from(ut.current.querySelectorAll(".tracker-item-container"));let Zt=1/0,ke=-1;qt.forEach((mn,Sn)=>{const qn=mn.getBoundingClientRect(),kn=qn.top+qn.height/2,ii=Math.abs(ft.clientY-kn);ii<Zt&&(Zt=ii,ke=Sn)}),ke!==-1&&(Et=ke)}const Mt={...ht.current,currentY:ft.clientY,currentX:ft.clientX,placeholderIndex:Et};X(Mt),ht.current=Mt},Re=()=>{document.removeEventListener("pointermove",xt),document.removeEventListener("pointerup",Re);const{originalIndex:ft,placeholderIndex:dt}=ht.current,ct=Ft.current[0].items;if(ft!==dt&&dt!==null){const Mt=[...ct],[qt]=Mt.splice(ft,1);Mt.splice(dt,0,qt);const Zt=_O(Xe);Mt.forEach((ke,mn)=>{const Sn=ei(Xe,"artifacts",sn,"users",n.uid,"trackers",ke.id);Zt.update(Sn,{order:mn})}),Zt.commit().catch(ke=>console.error("Reorder failed",ke))}const Et={...ht.current,isDragging:!1,itemId:null,draggedItem:null};X(Et),ht.current=Et},wn=(ft,dt=!1)=>{const ct=ft.lastEntryDate===Fn(new Date),Et=ft.computedStreak||0,Mt=ft.showTypeInList!==!1,qt=ft.listDisplayValue||"none";let Zt=null,ke=null;return qt==="last"&&ft.lastValue!==void 0&&ft.lastValue!==null?(Zt=ft.lastValue,ke="Last"):qt==="average"&&ft.averageValue!==void 0&&ft.averageValue!==null&&(Zt=ft.averageValue,ke="Avg"),E.jsxs("div",{className:`p-3 rounded-xl border relative flex justify-between items-center bg-transparent ${dt?"shadow-2xl z-50 pointer-events-none opacity-90":""} ${w===ft.id&&!dt?`${t.activeNav} ${t.border}`:`${e?"bg-zinc-900 border-zinc-800":"bg-white dark:bg-zinc-800 border-zinc-100 dark:border-zinc-700"}`}`,children:[E.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[tt==="manual"&&E.jsx("div",{className:`text-zinc-400 ${dt?"":"cursor-grab touch-none"}`,children:E.jsx(HO,{className:"w-4 h-4"})}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("h3",{className:`font-bold truncate text-sm ${w===ft.id&&!dt?t.activeNavText:"text-zinc-700 dark:text-zinc-300"}`,children:ft.name}),E.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[Mt&&E.jsxs("p",{className:"text-[10px] text-zinc-500 capitalize",children:[ft.type," ",ft.unit?`(${ft.unit})`:""]}),ft.tags&&ft.tags.length>0&&ft.tags.filter(mn=>_.some(Sn=>Sn.id===mn.id)).map((mn,Sn)=>E.jsx("span",{className:`${mn.colorClass} px-1.5 py-0.5 rounded-full text-[9px] font-medium border opacity-80 flex-shrink-0`,children:mn.name},Sn))]})]})]}),E.jsxs("div",{className:"flex flex-col items-end gap-1 ml-2",children:[ft.enableStreak&&E.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[E.jsx(bS,{className:`w-3.5 h-3.5 ${ct?"text-amber-500 fill-amber-500":"text-zinc-300 dark:text-zinc-600"}`}),E.jsx("span",{className:`text-xs font-bold ${ct?"text-amber-600":"text-zinc-400"}`,children:Et})]}),Zt!==null&&E.jsxs("div",{className:`text-[10px] px-1.5 py-0.5 rounded-md font-mono font-medium ${e?"bg-zinc-800 text-zinc-300":"bg-zinc-100 dark:bg-zinc-700 text-zinc-600 dark:text-zinc-300"}`,children:[E.jsxs("span",{className:"text-zinc-400 mr-1",children:[ke,":"]}),ft.type==="boolean"?qt==="average"?`${(Zt*100).toFixed(0)}%`:Zt?"Yes":"No":typeof Zt=="number"?Zt.toFixed(qt==="average"?1:0):Zt]})]})]})};lt.useEffect(()=>{if(!Y)return;const ft=M.map(kn=>Fn(kn.date)),{streak:dt,lastDate:ct}=vA(ft,Y.enableStreak),Mt=[...M].sort((kn,ii)=>new Date(ii.date)-new Date(kn.date)||ii.timestamp-kn.timestamp)[0],qt=Mt?Mt.value:null,Zt=M.length>0?M.reduce((kn,ii)=>kn+(Number(ii.value)||0),0)/M.length:null,ke=Y.computedStreak,mn=Y.lastEntryDate,Sn=Y.lastValue,qn=Y.averageValue;(dt!==ke||ct!==mn||qt!==Sn||Zt!==null&&Math.abs(Zt-(qn||0))>.001)&&Y0(ei(Xe,"artifacts",sn,"users",n.uid,"trackers",Y.id),{computedStreak:dt,lastEntryDate:ct,lastValue:qt,averageValue:Zt}).catch(kn=>console.error("Failed to sync stats",kn))},[M,Y,n]),lt.useEffect(()=>{Y?.preferredView&&V(Y.preferredView)},[w,Y]);const Ie=lt.useMemo(()=>{if(!M.length||!Y)return[];const ft=M.reduce((ct,Et)=>{const Mt=Fn(Et.date);return ct[Mt]||(ct[Mt]=[]),ct[Mt].push(Et),ct},{}),dt=Y.aggregation||"average";return Object.keys(ft).map(ct=>{const Et=ft[ct],Mt=Et.map(qt=>Y.type==="boolean"?qt.value?1:0:qt.value);return{date:ct,value:$3(Mt,dt),entryId:Et[0].id,rawEntries:Et,allEntryIds:Et.map(qt=>qt.id)}}).sort((ct,Et)=>new Date(ct.date)-new Date(Et.date))},[M,Y]),In=lt.useMemo(()=>{if(!Ie.length)return{labels:[],datasets:[]};const ft=[{label:Y?.name||"Value",data:Ie.map(dt=>dt.value),borderColor:t.chartLine,backgroundColor:t.chartFill,tension:.3,fill:!0,pointBackgroundColor:t.chartPoint,pointRadius:4,pointHoverRadius:6}];return Y?.goalDirection==="target"&&Y?.targetValue&&ft.push({label:"Target",data:Ie.map(()=>Y.targetValue),borderColor:"#10B981",borderWidth:2,borderDash:[5,5],pointRadius:0,fill:!1,tension:0}),{labels:Ie.map(dt=>_A(dt.date)),datasets:ft}},[Ie,Y,t]),Ui={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:Y?.goalDirection==="target"},tooltip:{callbacks:{label:ft=>ft.dataset.label==="Target"?`Target: ${ft.raw}`:Y?.type==="boolean"?ft.raw===1?"Yes":"No":`${ft.raw.toFixed(Y?.type==="numeric"?1:0)} ${Y?.unit||""}`}}},scales:{y:{display:!0,grid:{color:e?"#27272a":i==="dark"?"#334155":"#E4E4E7"},ticks:{color:e||i==="dark"?"#A1A1AA":"#71717A"},...Y?.type==="boolean"?{min:0,max:1,ticks:{stepSize:1,callback:ft=>ft===1?"Yes":"No"}}:{},...Y?.type==="rating"?{min:0,max:5,ticks:{stepSize:1}}:{}},x:{grid:{display:!1},ticks:{color:e||i==="dark"?"#A1A1AA":"#71717A"}}},onClick:(ft,dt)=>{if(dt.length>0&&dt[0].datasetIndex===0){const ct=dt[0].index,Et=Ie[ct],Mt=M.find(qt=>qt.id===Et.entryId);kt(Mt),ot(!0)}}},Bi=ft=>{const dt=Fn(ft),ct=Ie.find(Et=>Et.date===dt);if(ct){const Et=M.find(Mt=>Mt.id===ct.entryId);kt(Et)}else kt({date:dt,value:"",isNew:!0});ot(!0)},aa=()=>{o(i==="light"?r:"light")};return E.jsxs("div",{className:`h-screen w-full flex overflow-hidden font-sans transition-colors duration-300 ${e?"bg-black text-white":"bg-zinc-50 dark:bg-zinc-900 dark:text-white"}`,children:[E.jsx("style",{children:"input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; } input[type=number] { -moz-appearance: textfield; }"}),E.jsx(tP,{isOpen:U,onClose:()=>W(!1),user:n,tags:_,onTagsChange:h,theme:t,onThemeChange:c,currentThemeKey:f,onImport:()=>{},themeMode:i,onThemeModeChange:o,trackers:g,isAmoled:e,avatarUrl:R,onAvatarChange:Tt}),E.jsx(eP,{isOpen:J,onClose:()=>{at(!1),A(null)},user:n,editTracker:I,availableTags:_,onTagsChange:h,theme:t,isAmoled:e,nextOrder:g.length}),E.jsx(nP,{isOpen:st,onClose:()=>{ot(!1),kt(null)},user:n,tracker:Y,existingEntry:O?.isNew?O:O||null,theme:t,isAmoled:e,allEntries:M}),Nt&&E.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 md:hidden backdrop-blur-sm",onClick:()=>q(!1)}),E.jsxs("aside",{className:`fixed md:relative top-0 left-0 h-full z-30 w-80 flex flex-col shadow-2xl md:shadow-none transition-transform duration-300 transform ${Nt?"translate-x-0":"-translate-x-full md:translate-x-0"} ${e?"bg-black border-r border-zinc-800":"bg-white dark:bg-zinc-800 border-r border-zinc-200 dark:border-zinc-700"}`,children:[E.jsxs("div",{className:`p-6 border-b flex items-center justify-between ${e?"border-zinc-800":"border-zinc-200 dark:border-zinc-700"}`,children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:`rounded-lg p-2 ${t.primary} animate-in zoom-in duration-300`,children:E.jsx(Hp,{className:"text-white w-5 h-5"})}),E.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"TrackIt"})]}),E.jsx("button",{onClick:()=>q(!1),className:"md:hidden text-zinc-500",children:E.jsx(nd,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"p-4 flex gap-2",children:[E.jsxs("button",{onClick:()=>{A(null),at(!0),q(!1)},className:`flex-1 flex items-center justify-center space-x-2 py-3 rounded-xl transition-all shadow-md active:scale-95 hover:brightness-110 ${t.primary}`,children:[E.jsx(ed,{className:"w-5 h-5"}),E.jsx("span",{className:"font-medium",children:"New Tracker"})]}),E.jsxs("div",{className:"relative",children:[E.jsx("button",{onClick:()=>At(!Dt),className:`h-full px-3 rounded-xl border flex items-center justify-center transition-colors ${e?"border-zinc-800 hover:bg-zinc-900":"border-zinc-200 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:tt==="manual"?E.jsx(AO,{className:"w-5 h-5 text-zinc-500"}):tt==="tag"||tt==="type"||tt==="goal"?E.jsx($O,{className:"w-5 h-5 text-zinc-500"}):E.jsx(UO,{className:"w-5 h-5 text-zinc-500"})}),Dt&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>At(!1)}),E.jsxs("div",{className:`absolute right-0 top-full mt-2 w-48 rounded-xl shadow-xl border z-40 overflow-hidden ${e?"bg-black border-zinc-800":"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700"}`,children:[E.jsxs("div",{className:"p-2 border-b border-zinc-100 dark:border-zinc-700",children:[E.jsx("p",{className:"px-2 py-1 text-xs font-semibold text-zinc-500 uppercase",children:"Sort By"}),E.jsxs("button",{onClick:()=>{pt("manual"),At(!1)},className:`w-full text-left px-2 py-1.5 text-sm rounded-lg flex items-center justify-between ${tt==="manual"?t.text+" bg-zinc-50 dark:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:["Manual (Drag) ",tt==="manual"&&E.jsx(gs,{className:"w-3 h-3"})]}),E.jsxs("button",{onClick:()=>{pt("name"),At(!1)},className:`w-full text-left px-2 py-1.5 text-sm rounded-lg flex items-center justify-between ${tt==="name"?t.text+" bg-zinc-50 dark:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:["Name ",tt==="name"&&E.jsx(gs,{className:"w-3 h-3"})]}),E.jsxs("button",{onClick:()=>{pt("streak"),At(!1)},className:`w-full text-left px-2 py-1.5 text-sm rounded-lg flex items-center justify-between ${tt==="streak"?t.text+" bg-zinc-50 dark:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:["Highest Streak ",tt==="streak"&&E.jsx(gs,{className:"w-3 h-3"})]})]}),E.jsxs("div",{className:"p-2",children:[E.jsx("p",{className:"px-2 py-1 text-xs font-semibold text-zinc-500 uppercase",children:"Group By"}),E.jsxs("button",{onClick:()=>{pt("tag"),At(!1)},className:`w-full text-left px-2 py-1.5 text-sm rounded-lg flex items-center justify-between ${tt==="tag"?t.text+" bg-zinc-50 dark:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:["Tag ",tt==="tag"&&E.jsx(gs,{className:"w-3 h-3"})]}),E.jsxs("button",{onClick:()=>{pt("goal"),At(!1)},className:`w-full text-left px-2 py-1.5 text-sm rounded-lg flex items-center justify-between ${tt==="goal"?t.text+" bg-zinc-50 dark:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:["Habit vs Vice ",tt==="goal"&&E.jsx(gs,{className:"w-3 h-3"})]}),E.jsxs("button",{onClick:()=>{pt("type"),At(!1)},className:`w-full text-left px-2 py-1.5 text-sm rounded-lg flex items-center justify-between ${tt==="type"?t.text+" bg-zinc-50 dark:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:["Type ",tt==="type"&&E.jsx(gs,{className:"w-3 h-3"})]})]})]})]})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 scroll-smooth",ref:ut,children:[g.length===0&&E.jsxs("div",{className:"text-center text-zinc-400 py-10 animate-in fade-in duration-500",children:[E.jsx("p",{className:"text-sm",children:"No trackers yet."}),E.jsx("p",{className:"text-xs",children:"Create one to get started!"})]}),bt.map((ft,dt)=>E.jsxs("div",{className:"mb-4",children:[ft.title&&E.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 mt-4 px-2",children:ft.title}),E.jsx("div",{className:"space-y-2",children:(()=>{const ct=[...ft.items];if(tt==="manual"&&z.isDragging&&z.itemId){const Et=ct.findIndex(Mt=>Mt.id===z.itemId);Et>-1&&ct.splice(Et,1),z.placeholderIndex!==null&&z.placeholderIndex<=ct.length&&ct.splice(z.placeholderIndex,0,{id:"placeholder",isPlaceholder:!0})}return ct.map((Et,Mt)=>Et.isPlaceholder?E.jsx("div",{className:"border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-xl w-full mb-2 transition-all duration-200",style:{height:z.itemHeight||80}},"placeholder"):E.jsx("div",{className:"tracker-item-container relative",children:E.jsx("div",{className:`tracker-item ${z.isDragging&&z.itemId===Et.id?"opacity-0":"opacity-100"} transition-opacity`,onPointerDown:qt=>tt==="manual"&&qt.target.closest(".cursor-grab")&&Ut(qt,Et,Mt),onClick:()=>{z.isDragging||(k(Et.id),q(!1))},children:wn(Et)})},Et.id))})()})]},dt))]}),E.jsxs("div",{className:`p-4 border-t flex space-x-2 mt-auto ${e?"border-zinc-800":"border-zinc-200 dark:border-zinc-700"}`,children:[E.jsxs("button",{onClick:()=>{W(!0),q(!1)},className:`flex-1 flex items-center space-x-3 px-4 py-3 rounded-xl transition-colors text-zinc-600 dark:text-zinc-400 ${e?"hover:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:[E.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 overflow-hidden ${e?"bg-zinc-900":"bg-zinc-200 dark:bg-zinc-600"}`,children:R?E.jsx("img",{src:R,alt:"Avatar",className:"w-full h-full object-cover"}):E.jsx(y4,{className:"w-4 h-4"})}),E.jsxs("div",{className:"text-left flex-1 truncate",children:[E.jsx("p",{className:"text-sm font-medium dark:text-white truncate",children:n?.displayName||(n.isAnonymous?`Guest (${n.uid.slice(0,5)}...)`:"User")}),E.jsx("p",{className:"text-xs text-zinc-500",children:"Settings"})]}),E.jsx(o4,{className:"w-4 h-4"})]}),E.jsx("button",{onClick:aa,className:`w-12 flex items-center justify-center rounded-xl transition-colors text-zinc-500 hover:text-amber-500 dark:hover:text-amber-400 ${e?"bg-zinc-900":"bg-zinc-100 dark:bg-zinc-700"}`,children:i==="light"?E.jsx(h4,{className:"w-5 h-5"}):E.jsx(xS,{className:"w-5 h-5"})})]})]}),z.isDragging&&z.draggedItem&&E.jsx("div",{className:"fixed pointer-events-none z-[100]",style:{top:z.currentY-20,left:z.currentX+20,width:z.itemWidth,height:z.itemHeight},children:wn(z.draggedItem,!0)}),E.jsx("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:Y?E.jsxs(E.Fragment,{children:[E.jsxs("header",{className:`p-6 flex justify-between items-center z-10 sticky top-0 animate-in slide-in-from-top-4 duration-500 border-b ${e?"bg-black/80 border-zinc-800 backdrop-blur-md":"bg-white/80 dark:bg-zinc-900/80 border-zinc-200 dark:border-zinc-700 backdrop-blur-md"}`,children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("button",{onClick:()=>q(!0),className:"md:hidden -ml-2 p-2 mr-1",children:E.jsx(bx,{className:"w-6 h-6 text-zinc-700 dark:text-zinc-200"})}),E.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white truncate max-w-[150px] md:max-w-xs",children:Y.name}),E.jsx("button",{onClick:()=>{A(Y),at(!0)},className:`p-1.5 rounded-lg text-zinc-400 hover:${t.text} transition-colors ${e?"hover:bg-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:E.jsx(TS,{className:"w-4 h-4"})}),Y.goalDirection==="target"&&Y.targetValue&&E.jsxs("span",{className:`hidden sm:inline-block text-sm text-zinc-500 px-2 py-1 rounded-md ml-2 animate-in fade-in ${e?"bg-zinc-900":"bg-zinc-100 dark:bg-zinc-800"}`,children:["Target: ",Y.targetValue," ",Y.unit]})]}),E.jsx("div",{className:"flex items-center space-x-4",children:E.jsxs("div",{className:`flex rounded-lg p-1 ${e?"bg-zinc-900":"bg-zinc-100 dark:bg-zinc-800"}`,children:[E.jsx("button",{onClick:()=>V("graph"),className:`p-2 rounded-md transition-all ${N==="graph"?`${e?"bg-zinc-800":"bg-white dark:bg-zinc-700 shadow"} ${t.text}`:"text-zinc-400"}`,children:E.jsx(K0,{className:"w-5 h-5"})}),E.jsx("button",{onClick:()=>V("calendar"),className:`p-2 rounded-md transition-all ${N==="calendar"?`${e?"bg-zinc-800":"bg-white dark:bg-zinc-700 shadow"} ${t.text}`:"text-zinc-400"}`,children:E.jsx(yS,{className:"w-5 h-5"})})]})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6",children:[E.jsx("div",{className:"w-full",children:E.jsxs("button",{onClick:()=>Bi(new Date),className:`w-full py-3 rounded-xl font-medium shadow-lg transition-transform hover:scale-[1.005] active:scale-[0.99] flex items-center justify-center space-x-2 animate-in fade-in duration-500 ${t.primary}`,children:[E.jsx(ed,{className:"w-5 h-5"}),E.jsx("span",{children:"Add New Entry"})]})}),E.jsx("div",{className:`p-6 rounded-2xl shadow-lg border min-h-[400px] animate-in slide-in-from-bottom-4 duration-500 ${e?"bg-black border-zinc-800":"bg-white dark:bg-zinc-800 border-zinc-100 dark:border-zinc-700"}`,children:N==="graph"?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"flex justify-between items-center mb-4",children:E.jsx("h3",{className:"text-lg font-semibold dark:text-white",children:"Activity Overview"})}),Ie.length===0?E.jsx("div",{className:"h-80 flex items-center justify-center text-zinc-400",children:E.jsx("p",{children:"No data recorded yet. Add your first entry!"})}):E.jsx("div",{className:"h-80 w-full",children:E.jsx(q3,{data:In,options:Ui})})]}):E.jsx(W3,{dailyAggregates:Ie,onDayClick:Bi,tracker:Y,theme:t,isAmoled:e})}),Ie.length>0&&E.jsx(X3,{aggregates:Ie,tracker:Y,theme:t,isAmoled:e}),M.length>0&&E.jsx(Z3,{entries:M,tracker:Y,onEntryClick:ft=>{kt(ft),ot(!0)},theme:t,isAmoled:e}),E.jsx("div",{className:"h-4"})]})]}):E.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-400 animate-in fade-in duration-500 p-8 text-center",children:[E.jsx("button",{onClick:()=>q(!0),className:"md:hidden absolute top-4 left-4 p-2 bg-white dark:bg-zinc-800 rounded-lg shadow",children:E.jsx(bx,{className:"w-6 h-6 text-zinc-700 dark:text-zinc-200"})}),E.jsx(Hp,{className:"w-16 h-16 mb-4 opacity-20"}),E.jsx("p",{className:"mb-4",children:"Select a tracker or create a new one to get started."}),E.jsx("button",{onClick:()=>q(!0),className:"md:hidden text-blue-500 font-medium",children:"Open Menu"})]})})]})};aC.createRoot(document.getElementById("root")).render(E.jsx(lt.StrictMode,{children:E.jsx(iP,{})}));
